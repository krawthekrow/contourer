"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function isPointInRect(e,t){return e.x>=t.left&&e.x<t.right&&e.y>=t.top&&e.y<t.bottom}function compute1DArray(e,t){return new Array(e).fill(void 0).map(function(e,n){return t(n)})}function compute2DArray(e,t){return compute1DArray(e.height,function(n){return compute1DArray(e.width,function(e){return t(new Vector(e,n))})})}function flatten(e){var t;return(t=[]).concat.apply(t,_toConsumableArray(e))}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function getCanvasMousePos(e,t){var n=e.getBoundingClientRect();return new Vector((t.clientX-n.left)*(e.width/n.width),(t.clientY-n.top)*(e.height/n.height))}function getScrollDir(e){return 0==e.deltaY?0:e.deltaY/Math.abs(e.deltaY)}function setCanvasSmoothing(e,t){e.imageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.webkitImageSmoothingEnabled=t,e.mnImageSmoothingEnabled=t}function createCanvas(e,t){var n=document.createElement("canvas");return n.width=t.width,n.height=t.height,n.style.position="absolute",n.style.left=t.left.toString()+"px",n.style.top=t.top.toString()+"px",e.appendChild(n),n.getContext("2d")}function getCanvasDims(e){return new Dimensions(e.canvas.width,e.canvas.height)}function compileShader(e,t,n){var a=e.createShader(n);if(e.shaderSource(a,t),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw console.log(t),"Shader compile error: "+e.getShaderInfoLog(a);return a}function createProgram(e,t,n){var a=e.createProgram();return e.attachShader(a,compileShader(e,t,e.VERTEX_SHADER)),e.attachShader(a,compileShader(e,n,e.FRAGMENT_SHADER)),e.linkProgram(a),a}function createComputeTexture(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.FLOAT,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,n,a),r}function createFBO(e,t,n){var a=e.createFramebuffer();if(e.bindFramebuffer(e.FRAMEBUFFER,a),n.length>1?(t.drawBuffersWEBGL(compute1DArray(n.length,function(e){return t["COLOR_ATTACHMENT"+e.toString()+"_WEBGL"]})),n.forEach(function(n,a){e.framebufferTexture2D(e.FRAMEBUFFER,t["COLOR_ATTACHMENT"+a.toString()+"_WEBGL"],e.TEXTURE_2D,n,0)})):e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n[0],0),e.checkFramebufferStatus(e.FRAMEBUFFER)!=e.FRAMEBUFFER_COMPLETE)throw"GL_FRAMEBUFFER_COMPLETE failed.";return a}function createArrayBuffer(e,t,n){var a=e.createBuffer();return e.bindBuffer(t,a),e.bufferData(t,n,e.STATIC_DRAW),a}function registerVertexAttrib(e,t,n,a,r){var i=e.getAttribLocation(t,n);e.enableVertexAttribArray(i),e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(i,a,e.FLOAT,!1,0,0)}function registerTextures(e,t,n){n.forEach(function(n,a){var r=e.getUniformLocation(t,n);e.uniform1i(r,a)})}function registerUniforms(e,t,n,a){n.forEach(function(n){var r=e.getUniformLocation(t,n.name);"int"==n.type?e.uniform1i(r,a[n.name]):"float"==n.type?e.uniform1f(r,a[n.name]):/^ivec[2-4]$/g.test(n.type)?e["uniform"+n.type[4].toString()+"iv"](r,new Int32Array(a[n.name])):/^vec[2-4]$/g.test(n.type)&&e["uniform"+n.type[3].toString()+"fv"](r,new Float32Array(a[n.name]))})}function bindTextures(e,t){t.forEach(function(t,n){e.activeTexture(e["TEXTURE"+n.toString()]),e.bindTexture(e.TEXTURE_2D,t)})}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function init(){var e=new ContourerManager;initRender(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function initRender(e){var t=document.getElementById("indexContainer");ReactDOM.render(React.createElement(ContourerApp,{manager:e}),t),document.getElementById("github-ribbon").innerHTML='<a href="https://github.com/krawthekrow/contourer"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>'}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Vector=function(){function e(t,n){_classCallCheck(this,e),this.x=t,this.y=n}return _createClass(e,[{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"subtract",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"multiply",value:function(t){return new e(this.x*t,this.y*t)}},{key:"divide",value:function(t){return new e(this.x/t,this.y/t)}},{key:"equals",value:function(e){return this.x==e.x&&this.y==e.y}},{key:"floor",value:function(){return new e(Math.floor(this.x),Math.floor(this.y))}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"getLength",value:function(){return Math.sqrt(this.dot(this))}},{key:"getAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"toArray",value:function(){return[this.x,this.y]}}],[{key:"fromPolar",value:function(t,n){return new e(t*Math.cos(n),t*Math.sin(n))}}]),e}(),Dimensions=function(){function e(t,n){_classCallCheck(this,e),this.width=t,this.height=n}return _createClass(e,[{key:"contains",value:function(e){return isPointInRect(e,new Rect(new Vector(0,0),this))}},{key:"getArea",value:function(){return this.width*this.height}},{key:"toArray",value:function(){return[this.width,this.height]}}]),e}(),Color=function(){function e(t,n,a){_classCallCheck(this,e),this.r=t,this.g=n,this.b=a}return _createClass(e,[{key:"toArray",value:function(){return[this.r,this.g,this.b]}}]),e}(),Rect=function(){function e(t,n){_classCallCheck(this,e),this.pos=t,this.dims=n}return _createClass(e,[{key:"x",get:function(){return this.pos.x}},{key:"y",get:function(){return this.pos.y}},{key:"width",get:function(){return this.dims.width}},{key:"height",get:function(){return this.dims.height}},{key:"left",get:function(){return this.pos.x}},{key:"right",get:function(){return this.pos.x+this.dims.width}},{key:"top",get:function(){return this.pos.y}},{key:"bottom",get:function(){return this.pos.y+this.dims.height}}]),e}(),MOUSE_LEFT=0,MOUSE_RIGHT=2,MOUSE_MIDDLE=1,DIRS4=[new Vector(1,0),new Vector(0,1),new Vector((-1),0),new Vector(0,(-1))],ScalableViewportManager=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vector(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;_classCallCheck(this,e),this.pos=t,this.scale=n}return _createClass(e,[{key:"viewportToWorld",value:function(e){return e.multiply(this.scale).add(this.pos)}},{key:"worldToViewport",value:function(e){return e.subtract(this.pos).divide(this.scale)}},{key:"translate",value:function(e){this.pos=this.pos.subtract(e.multiply(this.scale))}},{key:"scaleAtPoint",value:function(e,t){var n=this.scale*Math.exp(e),a=this.pos.add(t.multiply(this.scale-n));this.scale=n,this.pos=a}}]),e}(),MouseDownTracker=function e(t,n,a){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return!0};_classCallCheck(this,e),this.initTrackCallback=n,this.trackCallback=a,this.isTrackingEnabled=i,this.canvas=t,this.onMouseDown=function(e){r.isTrackingEnabled(e)&&(r.initTrackCallback(e),window.addEventListener("mousemove",r.onMouseMove),window.addEventListener("mouseup",r.onMouseUp),r.canvas.removeEventListener("mousedown",r.onMouseDown),e.preventDefault())},this.onMouseUp=function(e){window.removeEventListener("mousemove",r.onMouseMove),window.removeEventListener("mouseup",r.onMouseUp),r.canvas.addEventListener("mousedown",r.onMouseDown)},this.onMouseMove=function(e){r.trackCallback(e)},this.canvas.addEventListener("mousedown",this.onMouseDown)},DragManager=function(e){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return!0};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,function(e){r.prevMousePos=getCanvasMousePos(r.canvas,e)},function(e){var t=getCanvasMousePos(r.canvas,e);n(t.subtract(r.prevMousePos)),r.prevMousePos=t},a));return r.prevMousePos=new Vector(0,0),r}return _inherits(t,e),t}(MouseDownTracker),FULLSCREEN_QUAD_POS_ARRAY=new Float32Array([-1,-1,1,-1,1,1,-1,1]),FULLSCREEN_QUAD_INDEX_ARRAY=new Uint16Array([0,1,2,0,2,3]),FULLSCREEN_QUAD_NUM_VERTICES=6,_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),GPGPUKernelResult=function(){function e(t,n,a){_classCallCheck(this,e),this.ctx=t,this.fbo=n,this.textures=a}return _createClass(e,[{key:"dispose",value:function(){var e=this;null!=this.fbo&&this.ctx.deleteFramebuffer(this.fbo),this.textures.forEach(function(t){e.ctx.deleteTexture(t)})}}]),e}(),GPGPUKernel=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,e),this.manager=t,this.program=n,this.params=a,this.numOutputs=r,this.isGraphical=i}return _createClass(e,[{key:"run",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.ctx.useProgram(this.program),registerUniforms(this.ctx,this.program,this.params,a),registerUniforms(this.ctx,this.program,[{name:"uDims",type:"ivec2"}],{uDims:t.toArray()});var i=compute1DArray(this.numOutputs,function(e){return createComputeTexture(n.ctx,t,r?n.ctx.FLOAT:n.ctx.UNSIGNED_BYTE)}),o=this.isGraphical?null:createFBO(this.ctx,this.extDB,i);return this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,o),bindTextures(this.ctx,e),this.ctx.viewport(0,0,t.width,t.height),this.manager.drawFullscreenQuad(this.program),new GPGPUKernelResult(this.ctx,o,i)}},{key:"ctx",get:function(){return this.manager.ctx}},{key:"extDB",get:function(){return this.manager.extDB}}]),e}(),GPGPUManager=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_classCallCheck(this,e),this.ctx=t,this.extDB=this.ctx.getExtension("WEBGL_draw_buffers"),n&&this.ctx.getExtension("OES_texture_float"),this.quadPosBuffer=createArrayBuffer(this.ctx,this.ctx.ARRAY_BUFFER,FULLSCREEN_QUAD_POS_ARRAY),this.quadIndexBuffer=createArrayBuffer(this.ctx,this.ctx.ELEMENT_ARRAY_BUFFER,FULLSCREEN_QUAD_INDEX_ARRAY)}return _createClass(e,[{key:"drawFullscreenQuad",value:function(e){this.ctx.useProgram(e),this.ctx.bindBuffer(this.ctx.ELEMENT_ARRAY_BUFFER,this.quadIndexBuffer),this.ctx.drawElements(this.ctx.TRIANGLE_STRIP,FULLSCREEN_QUAD_NUM_VERTICES,this.ctx.UNSIGNED_SHORT,0)}},{key:"readPackedFloatData",value:function(e){var t=new Uint8Array(4*e.getArea());return this.ctx.readPixels(0,0,e.width,e.height,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,t),new Float32Array(t.buffer)}},{key:"arrayToTexture",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=new Float32Array(flatten(flatten(t))),r=n?a:new Uint8Array(r.buffer);return createComputeTexture(this.ctx,e,n?this.ctx.FLOAT:this.ctx.UNSIGNED_BYTE,r)}},{key:"textureToArray",value:function(t,n){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i="vec4 cVal = texture2D(uInput, vCoord);\ngl_FragData[0] = "+(a?"packFloat(cVal."+"xyzw"[r]+")":"cVal")+";\n",o=["uInput"],s=this.createKernel(i,o,t,[],1,e.PACK_FLOAT_INCLUDE),c=s.run([n],t,{},!1),l=this.readPackedFloatData(t);return c.dispose(),compute2DArray(t,function(e){return l[e.y*t.width+e.x]})}},{key:"createKernel",value:function(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=[].concat(r,n.map(function(e){return{type:"sampler2D",name:e}}),[{type:"ivec2",name:"uDims"}]),l=e.createVertShaderSrc(s),u=e.createFragShaderSrc(t.trim().split("\n").map(function(e){return"    "+e}).join("\n")+"\n",c,o,i>1),m=createProgram(this.ctx,l,u);return this.ctx.useProgram(m),registerVertexAttrib(this.ctx,m,"aPos",2,this.quadPosBuffer),registerTextures(this.ctx,m,n),new GPGPUKernel(this,m,r,i,s)}},{key:"createGraphicalKernel",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return this.createKernel(e,t,n,a,0,r,!0)}}]),e}();GPGPUManager.endianness=function(){var e=new ArrayBuffer(4),t=new Uint32Array(e),n=new Uint8Array(e);if(t[0]=3735928559,239==n[0])return"LE";if(222==n[0])return"BE";throw new Error("unknown endianness")}(),GPGPUManager.getCanvasContext=function(e){var t={depth:!1,antialias:!1};return e.getContext("webgl",t)||e.getContext("webgl-experimental",t)},GPGPUManager.createVertShaderSrc=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"precision highp float;\n\nattribute vec2 aPos;\n\nvarying vec2 vCoord;\n\nvoid main(){\n    gl_Position = vec4("+(e?"aPos.x, -aPos.y":"aPos")+", 0.0, 1.0);\n    vCoord = (aPos + 1.0) / 2.0;\n}"},GPGPUManager.PACK_FLOAT_INCLUDE="float round(float x) {\n    return floor(x + 0.5);\n}\n\nvec2 integerMod(vec2 x, float y) {\n    vec2 res = floor(mod(x, y));\n    return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n    float res = floor(mod(x, y));\n    return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat unpackFloat(vec4 rgba) {\n"+("LE"==GPGPUManager.endianness?"":"    rgba.rgba = rgba.abgr;\n")+"    rgba *= 255.0;\n    vec2 gte128;\n    gte128.x = rgba.b >= 128.0 ? 1.0 : 0.0;\n    gte128.y = rgba.a >= 128.0 ? 1.0 : 0.0;\n    float exponent = 2.0 * rgba.a - 127.0 + dot(gte128, MAGIC_VEC);\n    float res = exp2(round(exponent));\n    rgba.b = rgba.b - 128.0 * gte128.x;\n    res = dot(rgba, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n    res *= gte128.y * -2.0 + 1.0;\n    return res;\n}\n\nvec4 packFloat(float f) {\n    float F = abs(f);\n    float sign = f < 0.0 ? 1.0 : 0.0;\n    float exponent = floor(log2(F));\n    float mantissa = (exp2(-exponent) * F);\n    // exponent += floor(log2(mantissa));\n    vec4 rgba = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n    rgba.rg = integerMod(rgba.rg, 256.0);\n    rgba.b = integerMod(rgba.b, 128.0);\n    rgba.a = exponent*0.5 + 63.5;\n    rgba.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n    rgba = floor(rgba);\n    rgba *= 0.003921569; // 1/255\n"+("LE"==GPGPUManager.endianness?"":"    rgba.rgba = rgba.abgr;\n")+"    return rgba;\n}\n\n",GPGPUManager.createFragShaderSrc=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return[a?"#extension GL_EXT_draw_buffers: require\n":"","precision highp float;\nprecision highp sampler2D;\n\n#define EPS 0.0000001\n\n"].concat(_toConsumableArray(t.map(function(e){return"uniform "+e.type+" "+e.name+";\n"})),["\nvarying vec2 vCoord;\n\nvec4 arrGet(sampler2D arr, ivec2 id){\n    return texture2D(arr, (vec2(id) + vec2(0.5)) / vec2(uDims));\n}\n\n",n,"void main(){\n    ivec2 threadId = ivec2(vCoord * vec2(uDims));\n",e,"}"]).join("")};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),RED=new Color(255,0,0),GREEN=new Color(0,255,0),BLUE=new Color(0,0,255),WHITE=new Color(255,255,255),ContourerManager=function(){function e(t){_classCallCheck(this,e),this.viewport=new ScalableViewportManager(new Vector(0,0),.01),this.zoomSensitivity=.3,this.contourSpacing=1}return _createClass(e,[{key:"changeDrawFunc",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(r){var i="vec2 cPos = (vec2(threadId) * uScale) + uPos;\nvec2 res;\n"+e.trim()+"\ngl_FragData[0] = packFloat(res."+r+");\n";return n.gpgpuManager.createKernel(i,[],n.dims,[{type:"float",name:"uScale"},{type:"vec2",name:"uPos"}].concat(a?[{type:"float",name:"time"}]:[]),1,GPGPUManager.PACK_FLOAT_INCLUDE+t.trim()+"\n\n")};this.fieldKernelX=r("x"),this.fieldKernelY=r("y"),this.viewport.scale=10/this.dims.width,this.viewport.pos=new Vector((-this.dims.width),(-this.dims.height)).divide(2).multiply(this.viewport.scale),this.contourSpacing=1,this.isAnimated=a}},{key:"useCanvas",value:function(t){this.ctx=GPGPUManager.getCanvasContext(t),this.gpgpuManager=new GPGPUManager(this.ctx,(!1)),this.dims=getCanvasDims(this.ctx),this.plotKernel=this.gpgpuManager.createGraphicalKernel(e.plotFunc,["uFieldX","uFieldY"],this.dims,[{type:"float",name:"uContourSpacing"}],GPGPUManager.PACK_FLOAT_INCLUDE+e.FIELD_CHECK_INCLUDE)}},{key:"destroyContext",value:function(){this.ctx.canvas.width=1,this.ctx.canvas.height=1}},{key:"changeZoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vector(this.dims.width/2,this.dims.height/2);this.viewport.scaleAtPoint(-e*this.zoomSensitivity,t)}},{key:"changeContourSpacing",value:function(e){this.contourSpacing*=Math.exp(e*this.zoomSensitivity)}},{key:"translate",value:function(e){this.viewport.translate(e)}},{key:"drawContours",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t={uScale:this.viewport.scale,uPos:this.viewport.pos.toArray()};this.isAnimated&&(t.time=e);var n=this.fieldKernelX.run([],this.dims,t,!1),a=this.fieldKernelY.run([],this.dims,t,!1);this.plotKernel.run([n.textures[0],a.textures[0]],this.dims,{uContourSpacing:this.contourSpacing}),n.dispose(),a.dispose()}}]),e}();ContourerManager.plotFunc="ivec2 lineIndex = ivec2(floor(vec2(\n    unpackFloat(texture2D(uFieldX, vCoord)),\n    unpackFloat(texture2D(uFieldY, vCoord))\n) / uContourSpacing));\nvec2 cmpField = vec2(lineIndex) * uContourSpacing;\nivec2 drawData = ivec2(greaterThanEqual(\n    fieldCheck(threadId, ivec2(0, 1), cmpField) +\n    fieldCheck(threadId, ivec2(1, 0), cmpField) +\n    fieldCheck(threadId, ivec2(0, -1), cmpField) +\n    fieldCheck(threadId, ivec2(-1, 0), cmpField),\n    ivec2(1)));\nif(all(equal(drawData, ivec2(0)))){\n    gl_FragData[0] = vec4(1.0, 1.0, 1.0, 1.0);\n}\nelse{\n    vec2 isAxis = vec2(equal(lineIndex, ivec2(0)));\n    vec2 lineColor = vec2(drawData) * (1.0 - 0.5 * isAxis);\n    gl_FragData[0] = vec4(lineColor.x, 0.5 * dot(vec2(drawData), isAxis), lineColor.y, 1.0);\n}\n",ContourerManager.FIELD_CHECK_INCLUDE="vec2 getField(ivec2 pos){\n    return vec2(\n        unpackFloat(arrGet(uFieldX, pos)),\n        unpackFloat(arrGet(uFieldY, pos))\n    );\n}\n\nivec2 fieldCheck(ivec2 cPos, ivec2 dir, vec2 cmpField){\n    ivec2 oPos = cPos + dir;\n    if(all(greaterThanEqual(oPos, ivec2(0))) && all(lessThan(oPos, uDims))){\n        return ivec2(lessThan(getField(oPos), cmpField));\n    }\n    else return ivec2(0);\n}\n\n";var ContourerAnimationManager=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;_classCallCheck(this,e),this.manager=t,this.isAnimating=!1,this.numFrames=n,this.currentFrame=0,this.onStopCallback=null,this.animationLoop=this.animationLoop.bind(this)}return _createClass(e,[{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.currentFrame=e,this.isAnimating=!0,this.onDraw=t,window.requestAnimationFrame(this.animationLoop)}},{key:"animationLoop",value:function(e){this.isAnimating?(this.manager.drawContours(this.currentFrame/this.numFrames),null!=this.onDraw&&this.onDraw(this.currentFrame),this.currentFrame=(this.currentFrame+1)%this.numFrames,window.requestAnimationFrame(this.animationLoop)):null!=this.onStopCallback&&this.onStopCallback()}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isAnimating?(this.isAnimating=!1,this.onStopCallback=e):null!=e&&e()}}]),e}(),DemoFunctions=function t(){_classCallCheck(this,t)};DemoFunctions.INCLUDES={pi:"const float PI = 3.1415926535897932384626433832795;\n\n",complexLib:"vec2 complexMult(vec2 a, vec2 b){\n    return vec2(a.x * b.x - a.y * b.y, a.y * b.x + a.x * b.y);\n}\n\nvec2 complexDiv(vec2 a, vec2 b){\n    float divisor = dot(b, b);\n    return vec2(dot(a, b), a.y * b.x - a.x * b.y) / divisor;\n}\n\nvec2 complexPow(vec2 a, vec2 b){\n    float r = length(a), phi = atan(a.y, a.x);\n    float newR = pow(r, b.x) * exp(-b.y * phi);\n    float newPhi = b.y * log(r) + b.x * phi;\n    return newR * vec2(cos(newPhi), sin(newPhi));\n}\n\nvec2 complexExp(vec2 b){\n    return exp(b.x) * vec2(cos(b.y), sin(b.y));\n}\n\nvec2 complexLog(vec2 x){\n    return vec2(log(length(x)), atan(x.y, x.x));\n}\n\n",gamma:'/**\n * Translated to OpenGL ES from math.js\n * https://github.com/josdejong/mathjs\n *\n * Math.js is an extensive math library for JavaScript and Node.js,\n * It features real and complex numbers, units, matrices, a large set of\n * mathematical functions, and a flexible expression parser.\n *\n * @version 3.2.1\n * @date    2016-04-26\n *\n * @license\n * Copyright (C) 2013-2016 Jos de Jong <wjosdejong@gmail.com>\n *\n * Licensed under the Apache License, Version 2.0 (the "License"); you may not\n * use this file except in compliance with the License. You may obtain a copy\n * of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */\n\nvec2 gammaStep(vec2 x, int i, vec2 n, float p){\n    float real = n.x + float(i);\n    float den = real * real + n.y * n.y;\n    if(den != 0.0){\n        return x + vec2(p * real / den, -(p * n.y) / den);\n    }\n    else return vec2(0.0);\n}\n\nvec2 gamma(vec2 n){\n    n.x -= 1.0;\n    vec2 x = vec2(0.99999999999999709182, 0.0);\n\tx = gammaStep(x, 1, n, 57.156235665862923517);\n\tx = gammaStep(x, 2, n, -59.597960355475491248);\n\tx = gammaStep(x, 3, n, 14.136097974741747174);\n\tx = gammaStep(x, 4, n, -0.49191381609762019978);\n\tx = gammaStep(x, 5, n, 0.33994649984811888699e-4);\n\tx = gammaStep(x, 6, n, 0.46523628927048575665e-4);\n\tx = gammaStep(x, 7, n, -0.98374475304879564677e-4);\n\tx = gammaStep(x, 8, n, 0.15808870322491248884e-3);\n\tx = gammaStep(x, 9, n, -0.21026444172410488319e-3);\n\tx = gammaStep(x, 10, n, 0.21743961811521264320e-3);\n\tx = gammaStep(x, 11, n, -0.16431810653676389022e-3);\n\tx = gammaStep(x, 12, n, 0.84418223983852743293e-4);\n\tx = gammaStep(x, 13, n, -0.26190838401581408670e-4);\n\tx = gammaStep(x, 14, n, 0.36899182659531622704e-5);\n    vec2 t = vec2(n.x + 4.7421875 + 0.5, n.y);\n    float twoPiSqrt = sqrt(2.0 * PI);\n\n    n.x += 0.5;\n    vec2 result = complexPow(t, n);\n    result *= twoPiSqrt;\n    float r = exp(-t.x);\n    t = r * vec2(cos(-t.y), sin(-t.y));\n\n    return complexMult(complexMult(result, t), x);\n}\n\n',rotateWithTime:"vec2 rotateWithTime(vec2 v){\n    float cosT = cos(time * 2.0 * PI), sinT = sin(time * 2.0 * PI);\n    return vec2(\n        v.x * cosT - v.y * sinT,\n        v.x * sinT + v.y * cosT\n    );\n}\n\n",snoise:"//\n// Description : Array and textureless GLSL 2D/3D/4D simplex \n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n// \n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat permute(float x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \n\n  return p;\n  }\n\t\t\t\t\t\t\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289(i); \n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n\n"},DemoFunctions.functions={lorentz:{displayName:"Lorentz Boost",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"float beta = sin(time * 2.0 * PI) * 0.9;\nfloat gamma = 1.0 / sqrt(1.0 - beta * beta);\nres = gamma * vec2(\n    cPos.x * 1.0 + cPos.y * beta,\n    cPos.y * 1.0 + cPos.x * beta\n);\n\n"},mercatorwarp:{displayName:"Mercator Warp",isAnimated:!0,numFrames:800,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib+DemoFunctions.INCLUDES.rotateWithTime,drawFunc:"vec2 scaledPos = cPos * 0.6;\nvec2 invMercator = vec2(scaledPos.x, 2.0 * atan(exp(scaledPos.y)) - 0.5 * PI) * 8.0;\nres = rotateWithTime(invMercator);\n"},mercatorMollweide:{displayName:"Mercator to Mollweide",isAnimated:!0,numFrames:100,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"vec2 scaledPos = cPos * 0.3;\nfloat theta = asin(scaledPos.y * 2.0 / PI);\nvec2 invMollweide = vec2(\n    scaledPos.x / cos(theta),\n    asin((2.0 * theta + sin(2.0 * theta)) / PI)\n);\nvec2 invMercator = vec2(scaledPos.x, 2.0 * atan(exp(scaledPos.y)) - 0.5 * PI);\nfloat mixParam = - cos(time * 2.0 * PI) / 2.0 + 0.5;\nres = (invMollweide * mixParam + invMercator * (1.0 - mixParam)) * 8.0;\n"},dipole:{displayName:"Dipole Formation",isAnimated:!0,numFrames:300,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"float dist = sin(time * 2.0 * PI + PI / 2.0) * 2.0 + 2.5;\nres = 50.0 / (2.0 * dist) * (\n    complexLog(cPos - vec2(dist, 0.0)) -\n    complexLog(cPos - vec2(-dist, 0.0))\n);\n"},attractRepel:{displayName:"Attraction to Repulsion",isAnimated:!0,numFrames:1e3,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"res = 10.0 * (\n    complexLog(cPos - vec2(1.0, 0.0)) +\n    sin(time * 2.0 * PI - PI / 2.0) * complexLog(cPos - vec2(-1.0, 0.0))\n);\n"},neuralnetwork:{displayName:"Neural Network",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"float mixParam = -cos(time * 2.0 * PI) / 2.0 + 0.5;\nvec2 unsigmoid = -log(1.0 / ((cPos + vec2(3.3, 3.0)) / 6.3) - 1.0);\nres = (vec2(\n    unsigmoid.x * 2.0 + unsigmoid.y * 1.0,\n    unsigmoid.x * 2.0 + unsigmoid.y * 3.0\n) - vec2(1.0, -2.0)) * mixParam + cPos * (1.0 - mixParam);\n"
},galaxy:{displayName:"Galaxy Warp",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi,drawFunc:"float mixParam = -cos(time * 2.0 * PI) / 2.0 + 0.5;\nvec2 polPos = vec2(length(cPos), atan(cPos.y, cPos.x));\npolPos = vec2(polPos.x, polPos.y - mixParam / 50.0 * sqrt(1.0 / pow(polPos.x / 40.0, 3.0)));\nres = vec2(polPos.x * cos(polPos.y), polPos.x * sin(polPos.y));\n"},simplex:{displayName:"Simplex Warp",isAnimated:!0,numFrames:1e3,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.snoise,drawFunc:"vec2 circleVary = 2.0 * vec2(\n    cos(time * 2.0 * PI),\n    sin(time * 2.0 * PI)\n);\nres = 2.0 * (cPos +\n0.5 * vec2(\n    snoise(vec4(cPos * 0.25, circleVary + vec2(100.0, 100.0))),\n    snoise(vec4(cPos * 0.25, circleVary + vec2(200.0, 200.0)))\n));\n"},exponentiation:{displayName:"Complex Exponentiation",isAnimated:!0,numFrames:300,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"vec2 cartRes = 10.0 * complexPow(cPos, vec2(1.0 / (2.5 - 1.5 * cos(time * 2.0 * PI)), 0.0));\nres = vec2(length(cartRes), 10.0 * atan(cartRes.y, cartRes.x));\n"},mobius:{displayName:"Mobius Transformation",isAnimated:!0,numFrames:1e3,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib+DemoFunctions.INCLUDES.rotateWithTime,drawFunc:"res = rotateWithTime(10.0 * complexDiv(\n    complexMult(vec2(0.5, 3.0), cPos) + vec2(0.5, 1.5),\n    complexMult(vec2(4.0, 1.5), cPos) + vec2(2.0, 3.5)\n));\n"},arcsin:{displayName:"Complex Inverse Sine",isAnimated:!0,numFrames:200,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"vec2 invSin = - 10.0 * complexMult(complexLog(complexPow(vec2(1.0, 0.0) - complexPow(cPos, vec2(2.0, 0.0)), vec2(0.5, 0.0)) + complexMult(cPos, vec2(0.0, 1.0))), vec2(0.0, 1.0));\nfloat mixParam = - cos(time * 2.0 * PI) / 2.0 + 0.5;\nres = invSin * mixParam + cPos * (1.0 - mixParam);\n"},gamma:{displayName:"Gamma Function",isAnimated:!0,numFrames:400,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib+DemoFunctions.INCLUDES.gamma+DemoFunctions.INCLUDES.rotateWithTime,drawFunc:"res = rotateWithTime(10.0 * gamma((cPos + vec2(2.0, 0.0)) / 2.0));\n"},madness:{displayName:"Complex ???",isAnimated:!0,numFrames:800,includeSrc:DemoFunctions.INCLUDES.pi+DemoFunctions.INCLUDES.complexLib,drawFunc:"vec2 madness = - 10.0 * complexMult(complexLog(complexPow(vec2(2.0, 3.0) - complexPow(cPos * 2.0, vec2(2.0, 1.0)), vec2(0.5, 1.0)) + complexMult(cPos * 2.0, vec2(2.0, 1.0))), vec2(2.0, 1.0));\nfloat mixParam = - cos(time * 2.0 * PI) / 2.0 + 0.5;\nres = madness * mixParam + cPos * (1.0 - mixParam);\n"}};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),CanvasDisplayPane=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){if("onMountCallback"in this.props){var e=ReactDOM.findDOMNode(this);this.props.onMountCallback(e)}}},{key:"componentWillUnmount",value:function(){"onDismountCallback"in this.props&&this.props.onDismountCallback()}},{key:"render",value:function(){return React.createElement("canvas",{width:this.props.dims.width,height:this.props.dims.height,style:{width:"100%"}})}}]),t}(React.Component);CanvasDisplayPane.propTypes={dims:React.PropTypes.instanceOf(Dimensions).isRequired,onMountCallback:React.PropTypes.func};var DrawFunctionSelectorButton=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this;return React.createElement("button",{type:"button",className:"list-group-item"+(this.props.selected?" active":""),onClick:function(){e.props.onClick(e.props.funcName)}},this.props.displayName)}}]),t}(React.Component),DrawFunctionSelector=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedFunc:t.DEFAULT_FUNC},n.handleClick=n.handleClick.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this;return React.createElement("div",{className:"list-group"},Object.keys(DemoFunctions.functions).map(function(t){return React.createElement(DrawFunctionSelectorButton,{displayName:DemoFunctions.functions[t].displayName,key:t,funcName:t,selected:t==e.state.selectedFunc,onClick:e.handleClick})}))}},{key:"handleClick",value:function(e){this.setState({selectedFunc:e}),this.props.onSelect(e)}}]),t}(React.Component);DrawFunctionSelector.DEFAULT_FUNC="attractRepel";var AceEditor=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=ReactDOM.findDOMNode(this);this.editor=ace.edit(e),this.editor.setTheme("ace/theme/monokai"),this.editor.getSession().setUseWorker(!1),this.editor.getSession().setMode("ace/mode/glsl"),this.editor.$blockScrolling=1/0,this.editor.setFontSize(18),this.editor.setOptions({maxLines:1/0}),this.editor.getSession().setUseWrapMode(!0)}},{key:"componentWillUnmount",value:function(){this.editor.destroy()}},{key:"setValue",value:function(e){this.editor.setValue(e),this.editor.clearSelection()}},{key:"getValue",value:function(){return this.editor.getSession().getValue()}},{key:"render",value:function(){return React.createElement("div",{style:{height:this.props.height.toString()+"px"}})}}]),t}(React.Component),ContourerApp=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.animationManager=new ContourerAnimationManager(n.props.manager),n.state={isAnimated:!1,isAnimating:!1,currentFrame:0,numFrames:0,isAnimatedSelectState:!1,numFramesInputVal:"0",shaderCompileError:""},n.useCanvas=n.useCanvas.bind(n),n.setDrawFunc=n.setDrawFunc.bind(n),n.onDrawFuncSelect=n.onDrawFuncSelect.bind(n),n.redraw=n.redraw.bind(n),n.changeZoomAndRedraw=n.changeZoomAndRedraw.bind(n),n.changeContourSpacingAndRedraw=n.changeContourSpacingAndRedraw.bind(n),n.translateAndRedraw=n.translateAndRedraw.bind(n),n.handlePlotClick=n.handlePlotClick.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){this.onDrawFuncSelect(DrawFunctionSelector.DEFAULT_FUNC)}},{key:"render",value:function(){var e=this,t=new Dimensions(640,480);return React.createElement("div",_defineProperty({className:"container"},"className","col-lg-12"),React.createElement("div",{className:"page-header"},React.createElement("h1",null,"Contourer")),React.createElement("div",{className:"well"},React.createElement("p",null,React.createElement("b",null,"Drag")," to move the graph, ",React.createElement("b",null,"scroll")," to zoom, and ",React.createElement("b",null,"Ctrl + scroll")," to change the contour density.",React.createElement("br",null),"Or, if you're on mobile, use the ",React.createElement("b",null,"buttons"),"."),React.createElement("p",null,"Modify ",React.createElement("b",null,React.createElement("a",{href:"#",onClick:function(t){e.numFramesInput.focus(),t.preventDefault()}},"Frames"))," (number of frames), then click ",React.createElement("b",null,"Plot")," to change the animation speed.",React.createElement("br",null),"Or use the ",React.createElement("b",null,"slider")," to explore the animation in more detail."),React.createElement("p",null,"Plot your own functions with the ",React.createElement("b",null,"code editors")," below."),React.createElement("p",null,"Just enjoy the pretty animations, or ",React.createElement("b",null,React.createElement("a",{href:"https://github.com/krawthekrow/contourer"},"click here"))," to learn more."),React.createElement("p",null,React.createElement("b",null,"Note: This app uses WebGL, so it needs a sufficiently modern browser and GPU to work."))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3"},React.createElement(DrawFunctionSelector,{onSelect:this.onDrawFuncSelect})),React.createElement("div",{className:"col-sm-9"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-8"},React.createElement("div",{role:"toolbar"},React.createElement("div",{className:"btn-group",role:"group"},React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeZoomAndRedraw(1)}},React.createElement("span",{className:"glyphicon glyphicon-zoom-in"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeZoomAndRedraw(-1)}},React.createElement("span",{className:"glyphicon glyphicon-zoom-out"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeContourSpacingAndRedraw(-1)}},React.createElement("span",{className:"glyphicon glyphicon-plus"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.changeContourSpacingAndRedraw(1)}},React.createElement("span",{className:"glyphicon glyphicon-minus"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector(1,0))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-left"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector(0,1))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-up"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector(0,(-1)))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-down"})),React.createElement("button",{type:"button",className:"btn btn-default",onClick:function(t){e.translateAndRedraw(new Vector((-1),0))}},React.createElement("span",{className:"glyphicon glyphicon-arrow-right"})),this.state.isAnimated&&this.state.isAnimating?React.createElement("button",{type:"button",className:classNames("btn","btn-default",{disabled:!this.state.isAnimated}),onClick:function(t){e.state.isAnimated&&e.state.isAnimating&&e.animationManager.stop(function(){e.setState({isAnimating:!1})})}},React.createElement("span",{className:"glyphicon glyphicon-pause"})):React.createElement("button",{type:"button",className:classNames("btn","btn-default",{disabled:!this.state.isAnimated}),onClick:function(t){e.state.isAnimated&&!e.state.isAnimating&&(e.animationManager.start(e.state.currentFrame,function(t){e.setState({currentFrame:t})}),e.setState({isAnimating:!0}))}},React.createElement("span",{className:"glyphicon glyphicon-play"}))))),React.createElement("div",{className:"col-xs-4"},this.state.isAnimated?React.createElement("input",{type:"range",min:"0",max:(this.state.numFrames-1).toString(),value:this.state.currentFrame,style:{marginTop:"5px"},onChange:function(t){e.setState({currentFrame:parseInt(t.target.value)}),e.state.isAnimating?e.animationManager.stop(function(){e.setState({isAnimating:!1}),e.props.manager.drawContours(e.state.currentFrame/e.state.numFrames)}):e.props.manager.drawContours(e.state.currentFrame/e.state.numFrames)}}):null)),React.createElement("div",{style:{marginTop:"10px"}},React.createElement(CanvasDisplayPane,{dims:t,onMountCallback:function(t){e.useCanvas(t)},onDismountCallback:function(){e.props.manager.destroyContext()}})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-12"},React.createElement("h1",null,"Plot Function"),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-9"},React.createElement("div",{className:"form-inline"},React.createElement("div",{className:"btn-group",style:{marginRight:"10px"},role:"group"},React.createElement("button",{type:"button",className:classNames("btn",this.state.isAnimatedSelectState?"btn-default":"btn-primary",{active:!this.state.isAnimatedSelectState}),onClick:function(t){e.setState({isAnimatedSelectState:!1})}},"Graph"),React.createElement("button",{type:"button",className:classNames("btn",this.state.isAnimatedSelectState?"btn-primary":"btn-default",{active:this.state.isAnimatedSelectState}),onClick:function(t){e.setState({isAnimatedSelectState:!0})}},"Animation")),React.createElement("div",{className:classNames("form-group",{"has-error":this.isNumFramesInputInvalid()}),style:{display:"inline-block",marginBottom:0,verticalAlign:"middle"}},React.createElement("div",{className:"input-group"},React.createElement("span",{className:"input-group-addon"},"Frames"),React.createElement("input",{type:"text",className:"form-control",value:this.state.numFramesInputVal,disabled:!this.state.isAnimatedSelectState,ref:function(t){e.numFramesInput=t},onChange:function(t){e.setState({numFramesInputVal:t.target.value})},style:{width:"60px"}})),React.createElement("div",{className:"help-block",style:{display:this.isNumFramesInputInvalid()?"inline-block":"none",marginLeft:"10px"}},"Must be an integer")))),React.createElement("div",{className:"col-xs-3"},React.createElement("button",{type:"button",className:"btn btn-success btn-block pull-right",style:{width:"80px"},disabled:this.isNumFramesInputInvalid(),ref:function(t){e.plotButton=t},onClick:this.handlePlotClick},"Plot"))),""==this.state.shaderCompileError?null:React.createElement("div",{className:"has-error"},React.createElement("div",{className:"help-block"},React.createElement("p",null,"Your code failed to compile with the following error:"),React.createElement("p",null,this.state.shaderCompileError.trim().split("\n").map(function(e,t){return React.createElement("span",{key:t},e,React.createElement("br",null))})),this.state.shaderCompileError.indexOf("wrong operand types")!=-1?React.createElement("p",null,React.createElement("b",null,'Note that GLSL ES does not implicitly cast ints to floats. Write numbers like "23" as "23.0".')):null,this.state.shaderCompileError.indexOf("gl_FragData")!=-1?React.createElement("p",null,React.createElement("b",null,"Did you forget a semicolon on the last line?")):null,React.createElement("p",null,"View the console to see the full generated WebGL shader code."))),React.createElement("div",{style:{marginTop:"10px"}},React.createElement(AceEditor,{height:"200",key:"drawFuncEditor",ref:function(t){e.drawFuncEditor=t}})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-12"},React.createElement("h1",null,"Library Functions"),React.createElement("div",{style:{marginBottom:"10px"}},React.createElement(AceEditor,{height:"200",key:"includeSrcEditor",ref:function(t){e.includeSrcEditor=t}})))))}},{key:"useCanvas",value:function(e){var t=this;new DragManager(e,function(e){t.props.manager.viewport.translate(e),t.redraw()},function(e){return!0});e.addEventListener("wheel",function(n){n.ctrlKey?t.changeContourSpacingAndRedraw(getScrollDir(n)):(t.props.manager.changeZoom(-getScrollDir(n),getCanvasMousePos(e,n)),t.redraw()),n.preventDefault()}),this.props.manager.useCanvas(e)}},{key:"isNumFramesInputInvalid",value:function(){return this.state.isAnimatedSelectState&&this.state.numFramesInputVal.split("").some(function(e){return e.charCodeAt()<"0".charCodeAt()||e.charCodeAt()>"9".charCodeAt()})}},{key:"handlePlotClick",value:function(e){this.setDrawFunc(this.drawFuncEditor.getValue(),this.includeSrcEditor.getValue(),this.state.isAnimatedSelectState,this.state.isAnimatedSelectState?parseInt(this.state.numFramesInputVal):0)}},{key:"redraw",value:function(){this.state.isAnimated?this.props.manager.drawContours(this.state.currentFrame/this.state.numFrames):this.props.manager.drawContours()}},{key:"changeZoomAndRedraw",value:function(e){this.props.manager.changeZoom(e),this.redraw()}},{key:"changeContourSpacingAndRedraw",value:function(e){this.props.manager.changeContourSpacing(e),this.redraw()}},{key:"translateAndRedraw",value:function(e){this.props.manager.translate(e.multiply(50)),this.redraw()}},{key:"setDrawFunc",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;try{this.props.manager.changeDrawFunc(e,t,a)}catch(i){return void this.setState({shaderCompileError:i})}a&&0==r&&(r=1),this.setState({isAnimated:a,isAnimating:a,currentFrame:0,numFrames:r,isAnimatedSelectState:a,numFramesInputVal:r.toString(),shaderCompileError:""}),this.animationManager.numFrames=r,a?this.animationManager.stop(function(){n.animationManager.start(0,function(e){n.setState({currentFrame:e})})}):this.animationManager.stop(function(){n.props.manager.drawContours()})}},{key:"onDrawFuncSelect",value:function(e){var t=DemoFunctions.functions[e];this.drawFuncEditor.setValue(t.drawFunc.trim()),this.includeSrcEditor.setValue(t.includeSrc.trim()),t.isAnimated?this.setDrawFunc(t.drawFunc,t.includeSrc,t.isAnimated,t.numFrames):this.setDrawFunc(t.drawFunc,t.includeSrc)}}]),t}(React.Component);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIiwiYnVuZGxlLm1pbi5qcyIsImNhbnZhc1V0aWxzLmpzIiwid2ViZ2xVdGlscy5qcyIsImNvbnRvdXJlci5qcyIsInJlYWN0Q29tcG9uZW50cy5qc3giLCJncGdwdVV0aWxzLmpzIiwiZGVtb0Z1bmN0aW9ucy5qcyJdLCJuYW1lcyI6WyJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJBcnJheSIsImlzQXJyYXkiLCJpIiwiYXJyMiIsImxlbmd0aCIsImZyb20iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiaXNQb2ludEluUmVjdCIsInAiLCJyZWN0IiwieCIsImxlZnQiLCJyaWdodCIsInkiLCJ0b3AiLCJib3R0b20iLCJjb21wdXRlMURBcnJheSIsImZ1bmMiLCJmaWxsIiwidW5kZWZpbmVkIiwibWFwIiwidW51c2VkIiwiY29tcHV0ZTJEQXJyYXkiLCJkaW1zIiwiaGVpZ2h0Iiwid2lkdGgiLCJpMiIsIlZlY3RvciIsImZsYXR0ZW4iLCJfcmVmIiwiY29uY2F0IiwiYXBwbHkiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJjYWxsIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJnZXRDYW52YXNNb3VzZVBvcyIsImNhbnZhcyIsImV2IiwiYm91bmRpbmdSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xpZW50WCIsImNsaWVudFkiLCJnZXRTY3JvbGxEaXIiLCJkZWx0YVkiLCJNYXRoIiwiYWJzIiwic2V0Q2FudmFzU21vb3RoaW5nIiwiY3R4IiwiZW5hYmxlIiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwibW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwid2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwibW5JbWFnZVNtb290aGluZ0VuYWJsZWQiLCJjcmVhdGVDYW52YXMiLCJjb250YWluZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsInBvc2l0aW9uIiwidG9TdHJpbmciLCJhcHBlbmRDaGlsZCIsImdldENvbnRleHQiLCJnZXRDYW52YXNEaW1zIiwiRGltZW5zaW9ucyIsImNvbXBpbGVTaGFkZXIiLCJzcmMiLCJ0eXBlIiwic2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwic2hhZGVyU291cmNlIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJjb25zb2xlIiwibG9nIiwiZ2V0U2hhZGVySW5mb0xvZyIsImNyZWF0ZVByb2dyYW0iLCJ2ZXJ0U3JjIiwiZnJhZ1NyYyIsInByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJWRVJURVhfU0hBREVSIiwiRlJBR01FTlRfU0hBREVSIiwibGlua1Byb2dyYW0iLCJjcmVhdGVDb21wdXRlVGV4dHVyZSIsInRleFR5cGUiLCJhcmd1bWVudHMiLCJGTE9BVCIsImNvbnRlbnRzIiwidGV4IiwiY3JlYXRlVGV4dHVyZSIsImJpbmRUZXh0dXJlIiwiVEVYVFVSRV8yRCIsInRleFBhcmFtZXRlcmkiLCJURVhUVVJFX01JTl9GSUxURVIiLCJORUFSRVNUIiwiVEVYVFVSRV9NQUdfRklMVEVSIiwiVEVYVFVSRV9XUkFQX1MiLCJDTEFNUF9UT19FREdFIiwiVEVYVFVSRV9XUkFQX1QiLCJ0ZXhJbWFnZTJEIiwiUkdCQSIsImNyZWF0ZUZCTyIsImV4dERCIiwidGV4dHVyZXMiLCJmYm8iLCJjcmVhdGVGcmFtZWJ1ZmZlciIsImJpbmRGcmFtZWJ1ZmZlciIsIkZSQU1FQlVGRkVSIiwiZHJhd0J1ZmZlcnNXRUJHTCIsImZvckVhY2giLCJmcmFtZWJ1ZmZlclRleHR1cmUyRCIsIkNPTE9SX0FUVEFDSE1FTlQwIiwiY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyIsIkZSQU1FQlVGRkVSX0NPTVBMRVRFIiwiY3JlYXRlQXJyYXlCdWZmZXIiLCJidWZUeXBlIiwiYnVmIiwiY3JlYXRlQnVmZmVyIiwiYmluZEJ1ZmZlciIsImJ1ZmZlckRhdGEiLCJTVEFUSUNfRFJBVyIsInJlZ2lzdGVyVmVydGV4QXR0cmliIiwiYXR0cmliTmFtZSIsIml0ZW1TaXplIiwiYXR0cmliIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsIkFSUkFZX0JVRkZFUiIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJyZWdpc3RlclRleHR1cmVzIiwidGV4TmFtZXMiLCJ0ZXhOYW1lIiwidGV4TG9jIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwidW5pZm9ybTFpIiwicmVnaXN0ZXJVbmlmb3JtcyIsInVuaWZvcm1zIiwidmFscyIsInVuaWZvcm0iLCJ1bmlmb3JtTG9jIiwibmFtZSIsInVuaWZvcm0xZiIsInRlc3QiLCJJbnQzMkFycmF5IiwiRmxvYXQzMkFycmF5IiwiYmluZFRleHR1cmVzIiwidGV4dHVyZSIsImFjdGl2ZVRleHR1cmUiLCJpbml0IiwibWFuYWdlciIsIkNvbnRvdXJlck1hbmFnZXIiLCJpbml0UmVuZGVyIiwiX2RlZmluZVByb3BlcnR5Iiwib2JqIiwia2V5IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRFbGVtZW50QnlJZCIsIlJlYWN0RE9NIiwicmVuZGVyIiwiUmVhY3QiLCJDb250b3VyZXJBcHAiLCJpbm5lckhUTUwiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwidGhpcyIsIm9WZWMiLCJzY2FsZSIsImZsb29yIiwic3FydCIsImRvdCIsImF0YW4yIiwiciIsInBoaSIsImNvcyIsInNpbiIsInBvcyIsIlJlY3QiLCJDb2xvciIsImciLCJiIiwiZ2V0IiwiTU9VU0VfTEVGVCIsIk1PVVNFX1JJR0hUIiwiTU9VU0VfTUlERExFIiwiRElSUzQiLCJTY2FsYWJsZVZpZXdwb3J0TWFuYWdlciIsInZlYyIsIm11bHRpcGx5IiwiYWRkIiwic3VidHJhY3QiLCJkaXZpZGUiLCJzY2FsZUFtb3VudCIsInNjYWxlUG9pbnQiLCJuZXdTY2FsZSIsImV4cCIsIm5ld1BvcyIsIk1vdXNlRG93blRyYWNrZXIiLCJpbml0VHJhY2tDYWxsYmFjayIsInRyYWNrQ2FsbGJhY2siLCJfdGhpcyIsImlzVHJhY2tpbmdFbmFibGVkIiwib25Nb3VzZURvd24iLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwib25Nb3VzZU1vdmUiLCJvbk1vdXNlVXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHJldmVudERlZmF1bHQiLCJEcmFnTWFuYWdlciIsImRyYWdDYWxsYmFjayIsImlzRHJhZ0VuYWJsZWQiLCJfdGhpczIiLCJnZXRQcm90b3R5cGVPZiIsInByZXZNb3VzZVBvcyIsIm1vdXNlUG9zIiwiX01vdXNlRG93blRyYWNrZXIiLCJGVUxMU0NSRUVOX1FVQURfUE9TX0FSUkFZIiwiRlVMTFNDUkVFTl9RVUFEX0lOREVYX0FSUkFZIiwiVWludDE2QXJyYXkiLCJGVUxMU0NSRUVOX1FVQURfTlVNX1ZFUlRJQ0VTIiwiR1BHUFVLZXJuZWxSZXN1bHQiLCJkZWxldGVGcmFtZWJ1ZmZlciIsImRlbGV0ZVRleHR1cmUiLCJHUEdQVUtlcm5lbCIsInBhcmFtcyIsIm51bU91dHB1dHMiLCJpc0dyYXBoaWNhbCIsImlucHV0VGV4dHVyZXMiLCJvdXRwdXREaW1zIiwicGFyYW1WYWxzIiwidXNlRmxvYXQiLCJ1c2VQcm9ncmFtIiwidURpbXMiLCJ0b0FycmF5Iiwib3V0cHV0VGV4dHVyZXMiLCJVTlNJR05FRF9CWVRFIiwidmlld3BvcnQiLCJkcmF3RnVsbHNjcmVlblF1YWQiLCJHUEdQVU1hbmFnZXIiLCJnZXRFeHRlbnNpb24iLCJxdWFkUG9zQnVmZmVyIiwicXVhZEluZGV4QnVmZmVyIiwiRUxFTUVOVF9BUlJBWV9CVUZGRVIiLCJkcmF3RWxlbWVudHMiLCJUUklBTkdMRV9TVFJJUCIsIlVOU0lHTkVEX1NIT1JUIiwiVWludDhBcnJheSIsImdldEFyZWEiLCJyZWFkUGl4ZWxzIiwiYnVmZmVyIiwiZmxvYXRGbGF0dGVuZWRBcnIiLCJmbGF0dGVuZWRBcnIiLCJjb21wb25lbnQiLCJjb21wdXRlRnVuYyIsImlucHV0TmFtZXMiLCJrZXJuZWwiLCJjcmVhdGVLZXJuZWwiLCJQQUNLX0ZMT0FUX0lOQ0xVREUiLCJyZXN1bHRzIiwicnVuIiwib3V0cHV0IiwicmVhZFBhY2tlZEZsb2F0RGF0YSIsImRpc3Bvc2UiLCJpbmNsdWRlU3JjIiwiaW5wdXROYW1lIiwidmVydFNoYWRlclNyYyIsImNyZWF0ZVZlcnRTaGFkZXJTcmMiLCJmcmFnU2hhZGVyU3JjIiwiY3JlYXRlRnJhZ1NoYWRlclNyYyIsInRyaW0iLCJzcGxpdCIsImxpbmUiLCJqb2luIiwiZW5kaWFubmVzcyIsIkFycmF5QnVmZmVyIiwiYSIsIlVpbnQzMkFycmF5IiwiYyIsIkVycm9yIiwiZ2V0Q2FudmFzQ29udGV4dCIsIm9wdGlvbnMiLCJkZXB0aCIsImFudGlhbGlhcyIsImZsaXBZIiwidXNlRHJhd0J1ZmZlcnMiLCJSRUQiLCJHUkVFTiIsIkJMVUUiLCJXSElURSIsImRyYXdGdW5jIiwiem9vbVNlbnNpdGl2aXR5IiwiY29udG91clNwYWNpbmciLCJpc0FuaW1hdGVkIiwiY3JlYXRlRmllbGRLZXJuZWwiLCJjb29yZCIsImZpZWxkRnVuYyIsImdwZ3B1TWFuYWdlciIsImZpZWxkS2VybmVsWCIsImZpZWxkS2VybmVsWSIsInBsb3RLZXJuZWwiLCJjcmVhdGVHcmFwaGljYWxLZXJuZWwiLCJwbG90RnVuYyIsIkZJRUxEX0NIRUNLX0lOQ0xVREUiLCJjaGFuZ2VBbW91bnQiLCJ6b29tUG9pbnQiLCJzY2FsZUF0UG9pbnQiLCJ0cmFuc2xhdGVBbW91bnQiLCJ0cmFuc2xhdGUiLCJ0aW1lIiwidW5pZm9ybUFzc2lnbm1lbnRzIiwidVNjYWxlIiwidVBvcyIsImZpZWxkUmVzdWx0WCIsImZpZWxkUmVzdWx0WSIsInVDb250b3VyU3BhY2luZyIsIkNvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXIiLCJudW1GcmFtZXMiLCJpc0FuaW1hdGluZyIsImN1cnJlbnRGcmFtZSIsIm9uU3RvcENhbGxiYWNrIiwiYW5pbWF0aW9uTG9vcCIsImJpbmQiLCJzdGFydEZyYW1lIiwib25EcmF3IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidGltZXN0YW1wIiwiZHJhd0NvbnRvdXJzIiwiRGVtb0Z1bmN0aW9ucyIsIklOQ0xVREVTIiwicGkiLCJjb21wbGV4TGliIiwiZ2FtbWEiLCJyb3RhdGVXaXRoVGltZSIsInNub2lzZSIsImZ1bmN0aW9ucyIsImxvcmVudHoiLCJkaXNwbGF5TmFtZSIsIm1lcmNhdG9yd2FycCIsIm1lcmNhdG9yTW9sbHdlaWRlIiwiZGlwb2xlIiwiYXR0cmFjdFJlcGVsIiwibmV1cmFsbmV0d29yayIsImdhbGF4eSIsInNpbXBsZXgiLCJleHBvbmVudGlhdGlvbiIsIm1vYml1cyIsImFyY3NpbiIsIm1hZG5lc3MiLCJDYW52YXNEaXNwbGF5UGFuZSIsIl9SZWFjdCRDb21wb25lbnQiLCJmaW5kRE9NTm9kZSIsIm9uTW91bnRDYWxsYmFjayIsIm9uRGlzbW91bnRDYWxsYmFjayIsIkNvbXBvbmVudCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImluc3RhbmNlT2YiLCJpc1JlcXVpcmVkIiwiRHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b24iLCJfUmVhY3QkQ29tcG9uZW50MiIsIl90aGlzMyIsImNsYXNzTmFtZSIsInNlbGVjdGVkIiwib25DbGljayIsImZ1bmNOYW1lIiwiRHJhd0Z1bmN0aW9uU2VsZWN0b3IiLCJfdGhpczQiLCJzdGF0ZSIsInNlbGVjdGVkRnVuYyIsIkRFRkFVTFRfRlVOQyIsImhhbmRsZUNsaWNrIiwiX1JlYWN0JENvbXBvbmVudDMiLCJfdGhpczUiLCJrZXlzIiwic2V0U3RhdGUiLCJvblNlbGVjdCIsIkFjZUVkaXRvciIsIl9SZWFjdCRDb21wb25lbnQ0IiwiZWRpdG9yRGl2IiwiZWRpdG9yIiwiYWNlIiwiZWRpdCIsInNldFRoZW1lIiwiZ2V0U2Vzc2lvbiIsInNldFVzZVdvcmtlciIsInNldE1vZGUiLCIkYmxvY2tTY3JvbGxpbmciLCJJbmZpbml0eSIsInNldEZvbnRTaXplIiwic2V0T3B0aW9ucyIsIm1heExpbmVzIiwic2V0VXNlV3JhcE1vZGUiLCJkZXN0cm95IiwibmV3Q29udGVudHMiLCJzZXRWYWx1ZSIsImNsZWFyU2VsZWN0aW9uIiwiZ2V0VmFsdWUiLCJfdGhpczciLCJhbmltYXRpb25NYW5hZ2VyIiwiaXNBbmltYXRlZFNlbGVjdFN0YXRlIiwibnVtRnJhbWVzSW5wdXRWYWwiLCJzaGFkZXJDb21waWxlRXJyb3IiLCJ1c2VDYW52YXMiLCJzZXREcmF3RnVuYyIsIm9uRHJhd0Z1bmNTZWxlY3QiLCJyZWRyYXciLCJjaGFuZ2Vab29tQW5kUmVkcmF3IiwiY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXciLCJ0cmFuc2xhdGVBbmRSZWRyYXciLCJoYW5kbGVQbG90Q2xpY2siLCJfUmVhY3QkQ29tcG9uZW50NSIsIl90aGlzOCIsIkNBTlZBU19ESU1TIiwiaHJlZiIsIm51bUZyYW1lc0lucHV0IiwiZm9jdXMiLCJyb2xlIiwiZSIsImNsYXNzTmFtZXMiLCJkaXNhYmxlZCIsInN0b3AiLCJzdGFydCIsIm1pbiIsIm1heCIsIm1hcmdpblRvcCIsIm9uQ2hhbmdlIiwicGFyc2VJbnQiLCJkZXN0cm95Q29udGV4dCIsIm1hcmdpblJpZ2h0IiwiYWN0aXZlIiwiaGFzLWVycm9yIiwiaXNOdW1GcmFtZXNJbnB1dEludmFsaWQiLCJkaXNwbGF5IiwibWFyZ2luQm90dG9tIiwidmVydGljYWxBbGlnbiIsInJlZiIsImlucHV0IiwibWFyZ2luTGVmdCIsImJ1dHRvbiIsInBsb3RCdXR0b24iLCJpbmRleCIsImluZGV4T2YiLCJkcmF3RnVuY0VkaXRvciIsImluY2x1ZGVTcmNFZGl0b3IiLCJfdGhpczkiLCJkcmFnVmVjIiwiY3RybEtleSIsImNoYW5nZVpvb20iLCJzb21lIiwiY2hhckNvZGVBdCIsImNoYW5nZUNvbnRvdXJTcGFjaW5nIiwiX3RoaXMxMCIsImNoYW5nZURyYXdGdW5jIiwiZXJyIl0sIm1hcHBpbmdzIjoiQUFBQSxZQ0lBLFNBQVNBLG9CQUFtQkMsR0FBTyxHQUFJQyxNQUFNQyxRQUFRRixHQUFNLENBQUUsSUFBSyxHQUFJRyxHQUFJLEVBQUdDLEVBQU9ILE1BQU1ELEVBQUlLLFFBQVNGLEVBQUlILEVBQUlLLE9BQVFGLElBQU9DLEVBQUtELEdBQUtILEVBQUlHLEVBQU0sT0FBT0MsR0FBZSxNQUFPSCxPQUFNSyxLQUFLTixHQUUxTCxRQUFTTyxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0R3SGhILFFBQVNDLGVBQWNDLEVBQUdDLEdBQ3RCLE1BQU9ELEdBQUVFLEdBQUtELEVBQUtFLE1BQVFILEVBQUVFLEVBQUlELEVBQUtHLE9BQy9CSixFQUFFSyxHQUFLSixFQUFLSyxLQUFPTixFQUFFSyxFQUFJSixFQUFLTSxPQU96QyxRQUFTQyxnQkFBZWYsRUFBUWdCLEdBQzVCLE1BQU8sSUFBSXBCLE9BQU1JLEdBQVFpQixLQUFLQyxRQUFXQyxJQUNyQyxTQUFDQyxFQUFRdEIsR0FBVCxNQUFla0IsR0FBS2xCLEtBSTVCLFFBQVN1QixnQkFBZUMsRUFBTU4sR0FDMUIsTUFBT0QsZ0JBQWVPLEVBQUtDLE9BQ3ZCLFNBQUF6QixHQUFBLE1BQUtpQixnQkFBZU8sRUFBS0UsTUFDckIsU0FBQUMsR0FBQSxNQUFNVCxHQUFLLEdBQUlVLFFBQU9ELEVBQUkzQixRQVl0QyxRQUFTNkIsU0FBUWhDLEdBQUksR0FBQWlDLEVBQ2pCLFFBQU9BLE1BQUdDLE9BQUhDLE1BQUFGLEVBQUFsQyxtQkFBYUMsSUNtR3hCLFFBQVNvQyw0QkFBMkJDLEVBQU1DLEdBQVEsSUFBS0QsRUFBUSxLQUFNLElBQUlFLGdCQUFlLDREQUFnRSxRQUFPRCxHQUF5QixnQkFBVEEsSUFBcUMsa0JBQVRBLEdBQThCRCxF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QWV6QyxjQUFjTyxVQUFVaFYsRUFDN0NzSyxNQUFLc1IsZUFBZWhELFNBQVMxQixFQUFhL0UsU0FBU3BCLFFBQ25EekcsS0FBS3VSLGlCQUFpQmpELFNBQVMxQixFQUFhekcsV0FBV00sUUFDcERtRyxFQUFhNUUsV0FDWmhJLEtBQUsrTyxZQUFZbkMsRUFBYS9FLFNBQVUrRSxFQUFhekcsV0FBWXlHLEVBQWE1RSxXQUFZNEUsRUFBYXBELFdBR3ZHeEosS0FBSytPLFlBQVluQyxFQUFhL0UsU0FBVStFLEVBQWF6RyxnQkp3NUN0RDVHLEdJOXFEZ0JELE1BQU11TSIsImZpbGUiOiJidW5kbGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jbGFzcyBWZWN0b3J7XG4gICAgY29uc3RydWN0b3IoeCwgeSl7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUG9sYXIociwgcGhpKXtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgICAgICByICogTWF0aC5jb3MocGhpKSxcbiAgICAgICAgICAgIHIgKiBNYXRoLnNpbihwaGkpXG4gICAgICAgICk7XG4gICAgfVxuICAgIGFkZChvVmVjKXtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgICAgICB0aGlzLnggKyBvVmVjLngsXG4gICAgICAgICAgICB0aGlzLnkgKyBvVmVjLnlcbiAgICAgICAgKTtcbiAgICB9XG4gICAgc3VidHJhY3Qob1ZlYyl7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdGhpcy54IC0gb1ZlYy54LFxuICAgICAgICAgICAgdGhpcy55IC0gb1ZlYy55XG4gICAgICAgICk7XG4gICAgfVxuICAgIG11bHRpcGx5KHNjYWxlKXtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgICAgICB0aGlzLnggKiBzY2FsZSxcbiAgICAgICAgICAgIHRoaXMueSAqIHNjYWxlXG4gICAgICAgICk7XG4gICAgfVxuICAgIGRpdmlkZShzY2FsZSl7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgdGhpcy54IC8gc2NhbGUsXG4gICAgICAgICAgICB0aGlzLnkgLyBzY2FsZVxuICAgICAgICApO1xuICAgIH1cbiAgICBlcXVhbHMob1ZlYyl7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB0aGlzLnggPT0gb1ZlYy54ICYmXG4gICAgICAgICAgICB0aGlzLnkgPT0gb1ZlYy55XG4gICAgICAgICk7XG4gICAgfVxuICAgIGZsb29yKCl7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yKFxuICAgICAgICAgICAgTWF0aC5mbG9vcih0aGlzLngpLFxuICAgICAgICAgICAgTWF0aC5mbG9vcih0aGlzLnkpXG4gICAgICAgICk7XG4gICAgfVxuICAgIGRvdChvVmVjKXtcbiAgICAgICAgcmV0dXJuIHRoaXMueCAqIG9WZWMueCArIHRoaXMueSAqIG9WZWMueTtcbiAgICB9XG4gICAgZ2V0TGVuZ3RoKCl7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5kb3QodGhpcykpO1xuICAgIH1cbiAgICBnZXRBbmdsZSgpe1xuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLnksIHRoaXMueCk7XG4gICAgfVxuICAgIHRvQXJyYXkoKXtcbiAgICAgICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueV07XG4gICAgfVxufTtcblxuY2xhc3MgRGltZW5zaW9uc3tcbiAgICBjb25zdHJ1Y3Rvcih3aWR0aCwgaGVpZ2h0KXtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB9XG4gICAgY29udGFpbnMocG9zKXtcbiAgICAgICAgcmV0dXJuIGlzUG9pbnRJblJlY3QocG9zLFxuICAgICAgICAgICAgbmV3IFJlY3QoXG4gICAgICAgICAgICAgICAgbmV3IFZlY3RvcigwLCAwKSxcbiAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuICAgIGdldEFyZWEoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkdGggKiB0aGlzLmhlaWdodDtcbiAgICB9XG4gICAgdG9BcnJheSgpe1xuICAgICAgICByZXR1cm4gW3RoaXMud2lkdGgsIHRoaXMuaGVpZ2h0XTtcbiAgICB9XG59O1xuXG5jbGFzcyBDb2xvcntcbiAgICBjb25zdHJ1Y3RvcihyLCBnLCBiKXtcbiAgICAgICAgdGhpcy5yID0gcjtcbiAgICAgICAgdGhpcy5nID0gZztcbiAgICAgICAgdGhpcy5iID0gYjtcbiAgICB9XG4gICAgdG9BcnJheSgpe1xuICAgICAgICByZXR1cm4gW3RoaXMuciwgdGhpcy5nLCB0aGlzLmJdO1xuICAgIH1cbn07XG5cbmNsYXNzIFJlY3R7XG4gICAgY29uc3RydWN0b3IocG9zLCBkaW1zKXtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuZGltcyA9IGRpbXM7XG4gICAgfVxuICAgIGdldCB4KCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcy54O1xuICAgIH1cbiAgICBnZXQgeSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wb3MueTtcbiAgICB9XG4gICAgZ2V0IHdpZHRoKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmRpbXMud2lkdGg7XG4gICAgfVxuICAgIGdldCBoZWlnaHQoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGltcy5oZWlnaHQ7XG4gICAgfVxuICAgIGdldCBsZWZ0KCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcy54O1xuICAgIH1cbiAgICBnZXQgcmlnaHQoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zLnggKyB0aGlzLmRpbXMud2lkdGg7XG4gICAgfVxuICAgIGdldCB0b3AoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zLnk7XG4gICAgfVxuICAgIGdldCBib3R0b20oKXtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zLnkgKyB0aGlzLmRpbXMuaGVpZ2h0O1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIGlzUG9pbnRJblJlY3QocCwgcmVjdCl7XG4gICAgcmV0dXJuIHAueCA+PSByZWN0LmxlZnQgJiYgcC54IDwgcmVjdC5yaWdodCAmJlxuICAgICAgICAgICBwLnkgPj0gcmVjdC50b3AgJiYgcC55IDwgcmVjdC5ib3R0b207XG59XG5cbmNvbnN0IE1PVVNFX0xFRlQgPSAwO1xuY29uc3QgTU9VU0VfUklHSFQgPSAyO1xuY29uc3QgTU9VU0VfTUlERExFID0gMTtcblxuZnVuY3Rpb24gY29tcHV0ZTFEQXJyYXkobGVuZ3RoLCBmdW5jKXtcbiAgICByZXR1cm4gbmV3IEFycmF5KGxlbmd0aCkuZmlsbCh1bmRlZmluZWQpLm1hcChcbiAgICAgICAgKHVudXNlZCwgaSkgPT4gZnVuYyhpKVxuICAgICk7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGUyREFycmF5KGRpbXMsIGZ1bmMpe1xuICAgIHJldHVybiBjb21wdXRlMURBcnJheShkaW1zLmhlaWdodCxcbiAgICAgICAgaSA9PiBjb21wdXRlMURBcnJheShkaW1zLndpZHRoLFxuICAgICAgICAgICAgaTIgPT4gZnVuYyhuZXcgVmVjdG9yKGkyLCBpKSlcbiAgICAgICAgKVxuICAgICk7XG59XG5cbmNvbnN0IERJUlM0ID0gW1xuICAgIG5ldyBWZWN0b3IoMSwgMCksXG4gICAgbmV3IFZlY3RvcigwLCAxKSxcbiAgICBuZXcgVmVjdG9yKC0xLCAwKSxcbiAgICBuZXcgVmVjdG9yKDAsIC0xKVxuXTtcblxuZnVuY3Rpb24gZmxhdHRlbihhcnIpe1xuICAgIHJldHVybiBbXS5jb25jYXQoLi4uYXJyKTtcbn1cblxuY2xhc3MgU2NhbGFibGVWaWV3cG9ydE1hbmFnZXJ7XG4gICAgY29uc3RydWN0b3IocG9zID0gbmV3IFZlY3RvcigwLCAwKSwgc2NhbGUgPSAxLjApe1xuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xuICAgIH1cbiAgICB2aWV3cG9ydFRvV29ybGQodmVjKXtcbiAgICAgICAgcmV0dXJuIHZlYy5tdWx0aXBseSh0aGlzLnNjYWxlKS5hZGQodGhpcy5wb3MpO1xuICAgIH1cbiAgICB3b3JsZFRvVmlld3BvcnQodmVjKXtcbiAgICAgICAgcmV0dXJuIHZlYy5zdWJ0cmFjdCh0aGlzLnBvcykuZGl2aWRlKHRoaXMuc2NhbGUpO1xuICAgIH1cbiAgICB0cmFuc2xhdGUodmVjKXtcbiAgICAgICAgdGhpcy5wb3MgPSB0aGlzLnBvcy5zdWJ0cmFjdCh2ZWMubXVsdGlwbHkodGhpcy5zY2FsZSkpO1xuICAgIH1cbiAgICBzY2FsZUF0UG9pbnQoc2NhbGVBbW91bnQsIHNjYWxlUG9pbnQpe1xuICAgICAgICBjb25zdCBuZXdTY2FsZSA9IHRoaXMuc2NhbGUgKiBNYXRoLmV4cChzY2FsZUFtb3VudCk7XG4gICAgICAgIGNvbnN0IG5ld1BvcyA9IHRoaXMucG9zLmFkZChzY2FsZVBvaW50Lm11bHRpcGx5KHRoaXMuc2NhbGUgLSBuZXdTY2FsZSkpO1xuICAgICAgICB0aGlzLnNjYWxlID0gbmV3U2NhbGU7XG4gICAgICAgIHRoaXMucG9zID0gbmV3UG9zO1xuICAgIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgVmVjdG9yID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFZlY3Rvcih4LCB5KSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWZWN0b3IpO1xuXG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFZlY3RvciwgW3tcbiAgICAgICAga2V5OiAnYWRkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZChvVmVjKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3Rvcih0aGlzLnggKyBvVmVjLngsIHRoaXMueSArIG9WZWMueSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3N1YnRyYWN0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN1YnRyYWN0KG9WZWMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCAtIG9WZWMueCwgdGhpcy55IC0gb1ZlYy55KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbXVsdGlwbHknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbXVsdGlwbHkoc2NhbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCAqIHNjYWxlLCB0aGlzLnkgKiBzY2FsZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RpdmlkZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXZpZGUoc2NhbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCAvIHNjYWxlLCB0aGlzLnkgLyBzY2FsZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2VxdWFscycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBlcXVhbHMob1ZlYykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMueCA9PSBvVmVjLnggJiYgdGhpcy55ID09IG9WZWMueTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZmxvb3InLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmxvb3IoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcihNYXRoLmZsb29yKHRoaXMueCksIE1hdGguZmxvb3IodGhpcy55KSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RvdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkb3Qob1ZlYykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMueCAqIG9WZWMueCArIHRoaXMueSAqIG9WZWMueTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0TGVuZ3RoJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldExlbmd0aCgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5kb3QodGhpcykpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRBbmdsZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBbmdsZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMueSwgdGhpcy54KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndG9BcnJheScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b0FycmF5KCkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueV07XG4gICAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgICAga2V5OiAnZnJvbVBvbGFyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZyb21Qb2xhcihyLCBwaGkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHIgKiBNYXRoLmNvcyhwaGkpLCByICogTWF0aC5zaW4ocGhpKSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVmVjdG9yO1xufSgpO1xuXG47XG5cbnZhciBEaW1lbnNpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERpbWVuc2lvbnMod2lkdGgsIGhlaWdodCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGltZW5zaW9ucyk7XG5cbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoRGltZW5zaW9ucywgW3tcbiAgICAgICAga2V5OiAnY29udGFpbnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29udGFpbnMocG9zKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNQb2ludEluUmVjdChwb3MsIG5ldyBSZWN0KG5ldyBWZWN0b3IoMCwgMCksIHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0QXJlYScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBcmVhKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2lkdGggKiB0aGlzLmhlaWdodDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndG9BcnJheScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b0FycmF5KCkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLndpZHRoLCB0aGlzLmhlaWdodF07XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRGltZW5zaW9ucztcbn0oKTtcblxuO1xuXG52YXIgQ29sb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29sb3IociwgZywgYikge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29sb3IpO1xuXG4gICAgICAgIHRoaXMuciA9IHI7XG4gICAgICAgIHRoaXMuZyA9IGc7XG4gICAgICAgIHRoaXMuYiA9IGI7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKENvbG9yLCBbe1xuICAgICAgICBrZXk6ICd0b0FycmF5JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvQXJyYXkoKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuciwgdGhpcy5nLCB0aGlzLmJdO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENvbG9yO1xufSgpO1xuXG47XG5cbnZhciBSZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlY3QocG9zLCBkaW1zKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWN0KTtcblxuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5kaW1zID0gZGltcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoUmVjdCwgW3tcbiAgICAgICAga2V5OiAneCcsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zLng7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3knLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvcy55O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd3aWR0aCcsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGltcy53aWR0aDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGVpZ2h0JyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaW1zLmhlaWdodDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbGVmdCcsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zLng7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3JpZ2h0JyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3MueCArIHRoaXMuZGltcy53aWR0aDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndG9wJyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3MueTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYm90dG9tJyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3MueSArIHRoaXMuZGltcy5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gUmVjdDtcbn0oKTtcblxuO1xuXG5mdW5jdGlvbiBpc1BvaW50SW5SZWN0KHAsIHJlY3QpIHtcbiAgICByZXR1cm4gcC54ID49IHJlY3QubGVmdCAmJiBwLnggPCByZWN0LnJpZ2h0ICYmIHAueSA+PSByZWN0LnRvcCAmJiBwLnkgPCByZWN0LmJvdHRvbTtcbn1cblxudmFyIE1PVVNFX0xFRlQgPSAwO1xudmFyIE1PVVNFX1JJR0hUID0gMjtcbnZhciBNT1VTRV9NSURETEUgPSAxO1xuXG5mdW5jdGlvbiBjb21wdXRlMURBcnJheShsZW5ndGgsIGZ1bmMpIHtcbiAgICByZXR1cm4gbmV3IEFycmF5KGxlbmd0aCkuZmlsbCh1bmRlZmluZWQpLm1hcChmdW5jdGlvbiAodW51c2VkLCBpKSB7XG4gICAgICAgIHJldHVybiBmdW5jKGkpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlMkRBcnJheShkaW1zLCBmdW5jKSB7XG4gICAgcmV0dXJuIGNvbXB1dGUxREFycmF5KGRpbXMuaGVpZ2h0LCBmdW5jdGlvbiAoaSkge1xuICAgICAgICByZXR1cm4gY29tcHV0ZTFEQXJyYXkoZGltcy53aWR0aCwgZnVuY3Rpb24gKGkyKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuYyhuZXcgVmVjdG9yKGkyLCBpKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG52YXIgRElSUzQgPSBbbmV3IFZlY3RvcigxLCAwKSwgbmV3IFZlY3RvcigwLCAxKSwgbmV3IFZlY3RvcigtMSwgMCksIG5ldyBWZWN0b3IoMCwgLTEpXTtcblxuZnVuY3Rpb24gZmxhdHRlbihhcnIpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHJldHVybiAoX3JlZiA9IFtdKS5jb25jYXQuYXBwbHkoX3JlZiwgX3RvQ29uc3VtYWJsZUFycmF5KGFycikpO1xufVxuXG52YXIgU2NhbGFibGVWaWV3cG9ydE1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2NhbGFibGVWaWV3cG9ydE1hbmFnZXIoKSB7XG4gICAgICAgIHZhciBwb3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG5ldyBWZWN0b3IoMCwgMCk7XG4gICAgICAgIHZhciBzY2FsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMS4wO1xuXG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTY2FsYWJsZVZpZXdwb3J0TWFuYWdlcik7XG5cbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoU2NhbGFibGVWaWV3cG9ydE1hbmFnZXIsIFt7XG4gICAgICAgIGtleTogJ3ZpZXdwb3J0VG9Xb3JsZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2aWV3cG9ydFRvV29ybGQodmVjKSB7XG4gICAgICAgICAgICByZXR1cm4gdmVjLm11bHRpcGx5KHRoaXMuc2NhbGUpLmFkZCh0aGlzLnBvcyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3dvcmxkVG9WaWV3cG9ydCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB3b3JsZFRvVmlld3BvcnQodmVjKSB7XG4gICAgICAgICAgICByZXR1cm4gdmVjLnN1YnRyYWN0KHRoaXMucG9zKS5kaXZpZGUodGhpcy5zY2FsZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3RyYW5zbGF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmFuc2xhdGUodmVjKSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IHRoaXMucG9zLnN1YnRyYWN0KHZlYy5tdWx0aXBseSh0aGlzLnNjYWxlKSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NjYWxlQXRQb2ludCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzY2FsZUF0UG9pbnQoc2NhbGVBbW91bnQsIHNjYWxlUG9pbnQpIHtcbiAgICAgICAgICAgIHZhciBuZXdTY2FsZSA9IHRoaXMuc2NhbGUgKiBNYXRoLmV4cChzY2FsZUFtb3VudCk7XG4gICAgICAgICAgICB2YXIgbmV3UG9zID0gdGhpcy5wb3MuYWRkKHNjYWxlUG9pbnQubXVsdGlwbHkodGhpcy5zY2FsZSAtIG5ld1NjYWxlKSk7XG4gICAgICAgICAgICB0aGlzLnNjYWxlID0gbmV3U2NhbGU7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IG5ld1BvcztcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBTY2FsYWJsZVZpZXdwb3J0TWFuYWdlcjtcbn0oKTtcblxuO1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIGdldENhbnZhc01vdXNlUG9zKGNhbnZhcywgZXYpIHtcbiAgICB2YXIgYm91bmRpbmdSZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiBuZXcgVmVjdG9yKChldi5jbGllbnRYIC0gYm91bmRpbmdSZWN0LmxlZnQpICogKGNhbnZhcy53aWR0aCAvIGJvdW5kaW5nUmVjdC53aWR0aCksIChldi5jbGllbnRZIC0gYm91bmRpbmdSZWN0LnRvcCkgKiAoY2FudmFzLmhlaWdodCAvIGJvdW5kaW5nUmVjdC5oZWlnaHQpKTtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsRGlyKGV2KSB7XG4gICAgaWYgKGV2LmRlbHRhWSA9PSAwKSByZXR1cm4gMDtlbHNlIHJldHVybiBldi5kZWx0YVkgLyBNYXRoLmFicyhldi5kZWx0YVkpO1xufVxuXG52YXIgTW91c2VEb3duVHJhY2tlciA9IGZ1bmN0aW9uIE1vdXNlRG93blRyYWNrZXIoY2FudmFzLCBpbml0VHJhY2tDYWxsYmFjaywgdHJhY2tDYWxsYmFjaykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgaXNUcmFja2luZ0VuYWJsZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZ1bmN0aW9uIChldikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vdXNlRG93blRyYWNrZXIpO1xuXG4gICAgdGhpcy5pbml0VHJhY2tDYWxsYmFjayA9IGluaXRUcmFja0NhbGxiYWNrO1xuICAgIHRoaXMudHJhY2tDYWxsYmFjayA9IHRyYWNrQ2FsbGJhY2s7XG4gICAgdGhpcy5pc1RyYWNraW5nRW5hYmxlZCA9IGlzVHJhY2tpbmdFbmFibGVkO1xuICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuXG4gICAgdGhpcy5vbk1vdXNlRG93biA9IGZ1bmN0aW9uIChldikge1xuICAgICAgICBpZiAoX3RoaXMuaXNUcmFja2luZ0VuYWJsZWQoZXYpKSB7XG4gICAgICAgICAgICBfdGhpcy5pbml0VHJhY2tDYWxsYmFjayhldik7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgX3RoaXMub25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBfdGhpcy5vbk1vdXNlVXApO1xuICAgICAgICAgICAgX3RoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIF90aGlzLm9uTW91c2VEb3duKTtcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMub25Nb3VzZVVwID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIC8vdGhpcy50cmFja0NhbGxiYWNrKGV2KTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIF90aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBfdGhpcy5vbk1vdXNlVXApO1xuICAgICAgICBfdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgX3RoaXMub25Nb3VzZURvd24pO1xuICAgIH07XG4gICAgdGhpcy5vbk1vdXNlTW92ZSA9IGZ1bmN0aW9uIChldikge1xuICAgICAgICBfdGhpcy50cmFja0NhbGxiYWNrKGV2KTtcbiAgICB9O1xuXG4gICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XG59O1xuXG47XG5cbnZhciBEcmFnTWFuYWdlciA9IGZ1bmN0aW9uIChfTW91c2VEb3duVHJhY2tlcikge1xuICAgIF9pbmhlcml0cyhEcmFnTWFuYWdlciwgX01vdXNlRG93blRyYWNrZXIpO1xuXG4gICAgZnVuY3Rpb24gRHJhZ01hbmFnZXIoY2FudmFzLCBkcmFnQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGlzRHJhZ0VuYWJsZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYWdNYW5hZ2VyKTtcblxuICAgICAgICB2YXIgX3RoaXMyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKERyYWdNYW5hZ2VyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRHJhZ01hbmFnZXIpKS5jYWxsKHRoaXMsIGNhbnZhcywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICBfdGhpczIucHJldk1vdXNlUG9zID0gZ2V0Q2FudmFzTW91c2VQb3MoX3RoaXMyLmNhbnZhcywgZXYpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIHZhciBtb3VzZVBvcyA9IGdldENhbnZhc01vdXNlUG9zKF90aGlzMi5jYW52YXMsIGV2KTtcbiAgICAgICAgICAgIGRyYWdDYWxsYmFjayhtb3VzZVBvcy5zdWJ0cmFjdChfdGhpczIucHJldk1vdXNlUG9zKSk7XG4gICAgICAgICAgICBfdGhpczIucHJldk1vdXNlUG9zID0gbW91c2VQb3M7XG4gICAgICAgIH0sIGlzRHJhZ0VuYWJsZWQpKTtcblxuICAgICAgICBfdGhpczIucHJldk1vdXNlUG9zID0gbmV3IFZlY3RvcigwLCAwKTtcbiAgICAgICAgcmV0dXJuIF90aGlzMjtcbiAgICB9XG5cbiAgICByZXR1cm4gRHJhZ01hbmFnZXI7XG59KE1vdXNlRG93blRyYWNrZXIpO1xuXG47XG5cbmZ1bmN0aW9uIHNldENhbnZhc1Ntb290aGluZyhjdHgsIGVuYWJsZSkge1xuICAgIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBlbmFibGU7XG4gICAgY3R4Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGVuYWJsZTtcbiAgICBjdHgud2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZW5hYmxlO1xuICAgIGN0eC5tbkltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGVuYWJsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2FudmFzKGNvbnRhaW5lciwgYm91bmRpbmdSZWN0KSB7XG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy53aWR0aCA9IGJvdW5kaW5nUmVjdC53aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gYm91bmRpbmdSZWN0LmhlaWdodDtcbiAgICBjYW52YXMuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIGNhbnZhcy5zdHlsZS5sZWZ0ID0gYm91bmRpbmdSZWN0LmxlZnQudG9TdHJpbmcoKSArICdweCc7XG4gICAgY2FudmFzLnN0eWxlLnRvcCA9IGJvdW5kaW5nUmVjdC50b3AudG9TdHJpbmcoKSArICdweCc7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgcmV0dXJuIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xufVxuXG5mdW5jdGlvbiBnZXRDYW52YXNEaW1zKGN0eCkge1xuICAgIHJldHVybiBuZXcgRGltZW5zaW9ucyhjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG59XG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGNvbXBpbGVTaGFkZXIoY3R4LCBzcmMsIHR5cGUpIHtcbiAgICB2YXIgc2hhZGVyID0gY3R4LmNyZWF0ZVNoYWRlcih0eXBlKTtcbiAgICBjdHguc2hhZGVyU291cmNlKHNoYWRlciwgc3JjKTtcbiAgICBjdHguY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuICAgIGlmICghY3R4LmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGN0eC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgICAgY29uc29sZS5sb2coc3JjKTtcbiAgICAgICAgdGhyb3cgJ1NoYWRlciBjb21waWxlIGVycm9yOiAnICsgY3R4LmdldFNoYWRlckluZm9Mb2coc2hhZGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHNoYWRlcjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJvZ3JhbShjdHgsIHZlcnRTcmMsIGZyYWdTcmMpIHtcbiAgICB2YXIgcHJvZ3JhbSA9IGN0eC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgY3R4LmF0dGFjaFNoYWRlcihwcm9ncmFtLCBjb21waWxlU2hhZGVyKGN0eCwgdmVydFNyYywgY3R4LlZFUlRFWF9TSEFERVIpKTtcbiAgICBjdHguYXR0YWNoU2hhZGVyKHByb2dyYW0sIGNvbXBpbGVTaGFkZXIoY3R4LCBmcmFnU3JjLCBjdHguRlJBR01FTlRfU0hBREVSKSk7XG4gICAgY3R4LmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuICAgIHJldHVybiBwcm9ncmFtO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21wdXRlVGV4dHVyZShjdHgsIGRpbXMpIHtcbiAgICB2YXIgdGV4VHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogY3R4LkZMT0FUO1xuICAgIHZhciBjb250ZW50cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogbnVsbDtcblxuICAgIHZhciB0ZXggPSBjdHguY3JlYXRlVGV4dHVyZSgpO1xuICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGV4KTtcbiAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUlOX0ZJTFRFUiwgY3R4Lk5FQVJFU1QpO1xuICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NQUdfRklMVEVSLCBjdHguTkVBUkVTVCk7XG4gICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX1dSQVBfUywgY3R4LkNMQU1QX1RPX0VER0UpO1xuICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9XUkFQX1QsIGN0eC5DTEFNUF9UT19FREdFKTtcbiAgICBjdHgudGV4SW1hZ2UyRChjdHguVEVYVFVSRV8yRCwgMCwgY3R4LlJHQkEsIGRpbXMud2lkdGgsIGRpbXMuaGVpZ2h0LCAwLCBjdHguUkdCQSwgdGV4VHlwZSwgY29udGVudHMpO1xuICAgIHJldHVybiB0ZXg7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZCTyhjdHgsIGV4dERCLCB0ZXh0dXJlcykge1xuICAgIHZhciBmYm8gPSBjdHguY3JlYXRlRnJhbWVidWZmZXIoKTtcbiAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgZmJvKTtcbiAgICBpZiAodGV4dHVyZXMubGVuZ3RoID4gMSkge1xuICAgICAgICBleHREQi5kcmF3QnVmZmVyc1dFQkdMKGNvbXB1dGUxREFycmF5KHRleHR1cmVzLmxlbmd0aCwgZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgIHJldHVybiBleHREQlsnQ09MT1JfQVRUQUNITUVOVCcgKyBpLnRvU3RyaW5nKCkgKyAnX1dFQkdMJ107XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGV4dHVyZXMuZm9yRWFjaChmdW5jdGlvbiAodGV4LCBpKSB7XG4gICAgICAgICAgICBjdHguZnJhbWVidWZmZXJUZXh0dXJlMkQoY3R4LkZSQU1FQlVGRkVSLCBleHREQlsnQ09MT1JfQVRUQUNITUVOVCcgKyBpLnRvU3RyaW5nKCkgKyAnX1dFQkdMJ10sIGN0eC5URVhUVVJFXzJELCB0ZXgsIDApO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjdHguZnJhbWVidWZmZXJUZXh0dXJlMkQoY3R4LkZSQU1FQlVGRkVSLCBjdHguQ09MT1JfQVRUQUNITUVOVDAsIGN0eC5URVhUVVJFXzJELCB0ZXh0dXJlc1swXSwgMCk7XG4gICAgfVxuICAgIGlmIChjdHguY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhjdHguRlJBTUVCVUZGRVIpICE9IGN0eC5GUkFNRUJVRkZFUl9DT01QTEVURSkge1xuICAgICAgICB0aHJvdyAnR0xfRlJBTUVCVUZGRVJfQ09NUExFVEUgZmFpbGVkLic7XG4gICAgfVxuICAgIHJldHVybiBmYm87XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFycmF5QnVmZmVyKGN0eCwgYnVmVHlwZSwgY29udGVudHMpIHtcbiAgICB2YXIgYnVmID0gY3R4LmNyZWF0ZUJ1ZmZlcigpO1xuICAgIGN0eC5iaW5kQnVmZmVyKGJ1ZlR5cGUsIGJ1Zik7XG4gICAgY3R4LmJ1ZmZlckRhdGEoYnVmVHlwZSwgY29udGVudHMsIGN0eC5TVEFUSUNfRFJBVyk7XG4gICAgcmV0dXJuIGJ1Zjtcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJWZXJ0ZXhBdHRyaWIoY3R4LCBwcm9ncmFtLCBhdHRyaWJOYW1lLCBpdGVtU2l6ZSwgYnVmKSB7XG4gICAgdmFyIGF0dHJpYiA9IGN0eC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBhdHRyaWJOYW1lKTtcbiAgICBjdHguZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYXR0cmliKTtcbiAgICBjdHguYmluZEJ1ZmZlcihjdHguQVJSQVlfQlVGRkVSLCBidWYpO1xuICAgIGN0eC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGF0dHJpYiwgaXRlbVNpemUsIGN0eC5GTE9BVCwgZmFsc2UsIDAsIDApO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclRleHR1cmVzKGN0eCwgcHJvZ3JhbSwgdGV4TmFtZXMpIHtcbiAgICB0ZXhOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh0ZXhOYW1lLCBpKSB7XG4gICAgICAgIHZhciB0ZXhMb2MgPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHRleE5hbWUpO1xuICAgICAgICBjdHgudW5pZm9ybTFpKHRleExvYywgaSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyVW5pZm9ybXMoY3R4LCBwcm9ncmFtLCB1bmlmb3JtcywgdmFscykge1xuICAgIHVuaWZvcm1zLmZvckVhY2goZnVuY3Rpb24gKHVuaWZvcm0pIHtcbiAgICAgICAgdmFyIHVuaWZvcm1Mb2MgPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHVuaWZvcm0ubmFtZSk7XG4gICAgICAgIGlmICh1bmlmb3JtLnR5cGUgPT0gJ2ludCcpIHtcbiAgICAgICAgICAgIGN0eC51bmlmb3JtMWkodW5pZm9ybUxvYywgdmFsc1t1bmlmb3JtLm5hbWVdKTtcbiAgICAgICAgfSBlbHNlIGlmICh1bmlmb3JtLnR5cGUgPT0gJ2Zsb2F0Jykge1xuICAgICAgICAgICAgY3R4LnVuaWZvcm0xZih1bmlmb3JtTG9jLCB2YWxzW3VuaWZvcm0ubmFtZV0pO1xuICAgICAgICB9IGVsc2UgaWYgKC9eaXZlY1syLTRdJC9nLnRlc3QodW5pZm9ybS50eXBlKSkge1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHVuaWZvcm0udHlwZVs0XS50b1N0cmluZygpICsgJ2l2J10odW5pZm9ybUxvYywgbmV3IEludDMyQXJyYXkodmFsc1t1bmlmb3JtLm5hbWVdKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoL152ZWNbMi00XSQvZy50ZXN0KHVuaWZvcm0udHlwZSkpIHtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybScgKyB1bmlmb3JtLnR5cGVbM10udG9TdHJpbmcoKSArICdmdiddKHVuaWZvcm1Mb2MsIG5ldyBGbG9hdDMyQXJyYXkodmFsc1t1bmlmb3JtLm5hbWVdKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYmluZFRleHR1cmVzKGN0eCwgdGV4dHVyZXMpIHtcbiAgICB0ZXh0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uICh0ZXh0dXJlLCBpKSB7XG4gICAgICAgIGN0eC5hY3RpdmVUZXh0dXJlKGN0eFsnVEVYVFVSRScgKyBpLnRvU3RyaW5nKCldKTtcbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcbiAgICB9KTtcbn1cblxudmFyIEZVTExTQ1JFRU5fUVVBRF9QT1NfQVJSQVkgPSBuZXcgRmxvYXQzMkFycmF5KFstMS4wLCAtMS4wLCAxLjAsIC0xLjAsIDEuMCwgMS4wLCAtMS4wLCAxLjBdKTtcblxudmFyIEZVTExTQ1JFRU5fUVVBRF9JTkRFWF9BUlJBWSA9IG5ldyBVaW50MTZBcnJheShbMCwgMSwgMiwgMCwgMiwgM10pO1xuXG52YXIgRlVMTFNDUkVFTl9RVUFEX05VTV9WRVJUSUNFUyA9IDY7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgR1BHUFVLZXJuZWxSZXN1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gR1BHUFVLZXJuZWxSZXN1bHQoY3R4LCBmYm8sIHRleHR1cmVzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHUEdQVUtlcm5lbFJlc3VsdCk7XG5cbiAgICAgICAgdGhpcy5jdHggPSBjdHg7XG4gICAgICAgIHRoaXMuZmJvID0gZmJvO1xuICAgICAgICB0aGlzLnRleHR1cmVzID0gdGV4dHVyZXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEdQR1BVS2VybmVsUmVzdWx0LCBbe1xuICAgICAgICBrZXk6ICdkaXNwb3NlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5mYm8gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMuZmJvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGV4dHVyZXMuZm9yRWFjaChmdW5jdGlvbiAodGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmN0eC5kZWxldGVUZXh0dXJlKHRleHR1cmUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gR1BHUFVLZXJuZWxSZXN1bHQ7XG59KCk7XG5cbjtcblxudmFyIEdQR1BVS2VybmVsID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEdQR1BVS2VybmVsKG1hbmFnZXIsIHByb2dyYW0pIHtcbiAgICAgICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogW107XG4gICAgICAgIHZhciBudW1PdXRwdXRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAxO1xuICAgICAgICB2YXIgaXNHcmFwaGljYWwgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IGZhbHNlO1xuXG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHUEdQVUtlcm5lbCk7XG5cbiAgICAgICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcbiAgICAgICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIHRoaXMubnVtT3V0cHV0cyA9IG51bU91dHB1dHM7XG4gICAgICAgIHRoaXMuaXNHcmFwaGljYWwgPSBpc0dyYXBoaWNhbDtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoR1BHUFVLZXJuZWwsIFt7XG4gICAgICAgIGtleTogJ3J1bicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBydW4oaW5wdXRUZXh0dXJlcywgb3V0cHV0RGltcykge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBwYXJhbVZhbHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuICAgICAgICAgICAgdmFyIHVzZUZsb2F0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB0cnVlO1xuXG4gICAgICAgICAgICB0aGlzLmN0eC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XG4gICAgICAgICAgICByZWdpc3RlclVuaWZvcm1zKHRoaXMuY3R4LCB0aGlzLnByb2dyYW0sIHRoaXMucGFyYW1zLCBwYXJhbVZhbHMpO1xuICAgICAgICAgICAgcmVnaXN0ZXJVbmlmb3Jtcyh0aGlzLmN0eCwgdGhpcy5wcm9ncmFtLCBbe1xuICAgICAgICAgICAgICAgIG5hbWU6ICd1RGltcycsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2l2ZWMyJ1xuICAgICAgICAgICAgfV0sIHtcbiAgICAgICAgICAgICAgICB1RGltczogb3V0cHV0RGltcy50b0FycmF5KClcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgb3V0cHV0VGV4dHVyZXMgPSBjb21wdXRlMURBcnJheSh0aGlzLm51bU91dHB1dHMsIGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvbXB1dGVUZXh0dXJlKF90aGlzMi5jdHgsIG91dHB1dERpbXMsIHVzZUZsb2F0ID8gX3RoaXMyLmN0eC5GTE9BVCA6IF90aGlzMi5jdHguVU5TSUdORURfQllURSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGZibyA9IHRoaXMuaXNHcmFwaGljYWwgPyBudWxsIDogY3JlYXRlRkJPKHRoaXMuY3R4LCB0aGlzLmV4dERCLCBvdXRwdXRUZXh0dXJlcyk7XG4gICAgICAgICAgICB0aGlzLmN0eC5iaW5kRnJhbWVidWZmZXIodGhpcy5jdHguRlJBTUVCVUZGRVIsIGZibyk7XG5cbiAgICAgICAgICAgIGJpbmRUZXh0dXJlcyh0aGlzLmN0eCwgaW5wdXRUZXh0dXJlcyk7XG5cbiAgICAgICAgICAgIHRoaXMuY3R4LnZpZXdwb3J0KDAsIDAsIG91dHB1dERpbXMud2lkdGgsIG91dHB1dERpbXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5kcmF3RnVsbHNjcmVlblF1YWQodGhpcy5wcm9ncmFtKTtcblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHUEdQVUtlcm5lbFJlc3VsdCh0aGlzLmN0eCwgZmJvLCBvdXRwdXRUZXh0dXJlcyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2N0eCcsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFuYWdlci5jdHg7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2V4dERCJyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYW5hZ2VyLmV4dERCO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEdQR1BVS2VybmVsO1xufSgpO1xuXG47XG5cbnZhciBHUEdQVU1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gR1BHUFVNYW5hZ2VyKGN0eCkge1xuICAgICAgICB2YXIgdXNlRmxvYXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdQR1BVTWFuYWdlcik7XG5cbiAgICAgICAgdGhpcy5jdHggPSBjdHg7XG4gICAgICAgIHRoaXMuZXh0REIgPSB0aGlzLmN0eC5nZXRFeHRlbnNpb24oJ1dFQkdMX2RyYXdfYnVmZmVycycpO1xuICAgICAgICBpZiAodXNlRmxvYXQpIHtcbiAgICAgICAgICAgIHRoaXMuY3R4LmdldEV4dGVuc2lvbignT0VTX3RleHR1cmVfZmxvYXQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucXVhZFBvc0J1ZmZlciA9IGNyZWF0ZUFycmF5QnVmZmVyKHRoaXMuY3R4LCB0aGlzLmN0eC5BUlJBWV9CVUZGRVIsIEZVTExTQ1JFRU5fUVVBRF9QT1NfQVJSQVkpO1xuICAgICAgICB0aGlzLnF1YWRJbmRleEJ1ZmZlciA9IGNyZWF0ZUFycmF5QnVmZmVyKHRoaXMuY3R4LCB0aGlzLmN0eC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgRlVMTFNDUkVFTl9RVUFEX0lOREVYX0FSUkFZKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoR1BHUFVNYW5hZ2VyLCBbe1xuICAgICAgICBrZXk6ICdkcmF3RnVsbHNjcmVlblF1YWQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhd0Z1bGxzY3JlZW5RdWFkKHByb2dyYW0pIHtcbiAgICAgICAgICAgIHRoaXMuY3R4LnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgICAgICB0aGlzLmN0eC5iaW5kQnVmZmVyKHRoaXMuY3R4LkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLnF1YWRJbmRleEJ1ZmZlcik7XG4gICAgICAgICAgICB0aGlzLmN0eC5kcmF3RWxlbWVudHModGhpcy5jdHguVFJJQU5HTEVfU1RSSVAsIEZVTExTQ1JFRU5fUVVBRF9OVU1fVkVSVElDRVMsIHRoaXMuY3R4LlVOU0lHTkVEX1NIT1JULCAwKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVhZFBhY2tlZEZsb2F0RGF0YScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWFkUGFja2VkRmxvYXREYXRhKGRpbXMpIHtcbiAgICAgICAgICAgIHZhciBidWYgPSBuZXcgVWludDhBcnJheShkaW1zLmdldEFyZWEoKSAqIDQpO1xuICAgICAgICAgICAgdGhpcy5jdHgucmVhZFBpeGVscygwLCAwLCBkaW1zLndpZHRoLCBkaW1zLmhlaWdodCwgdGhpcy5jdHguUkdCQSwgdGhpcy5jdHguVU5TSUdORURfQllURSwgYnVmKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KGJ1Zi5idWZmZXIpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhcnJheVRvVGV4dHVyZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhcnJheVRvVGV4dHVyZShkaW1zLCBhcnIpIHtcbiAgICAgICAgICAgIHZhciB1c2VGbG9hdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogdHJ1ZTtcblxuICAgICAgICAgICAgdmFyIGZsb2F0RmxhdHRlbmVkQXJyID0gbmV3IEZsb2F0MzJBcnJheShmbGF0dGVuKGZsYXR0ZW4oYXJyKSkpO1xuICAgICAgICAgICAgdmFyIGZsYXR0ZW5lZEFyciA9IHVzZUZsb2F0ID8gZmxvYXRGbGF0dGVuZWRBcnIgOiBuZXcgVWludDhBcnJheShmbGF0dGVuZWRBcnIuYnVmZmVyKTtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDb21wdXRlVGV4dHVyZSh0aGlzLmN0eCwgZGltcywgdXNlRmxvYXQgPyB0aGlzLmN0eC5GTE9BVCA6IHRoaXMuY3R4LlVOU0lHTkVEX0JZVEUsIGZsYXR0ZW5lZEFycik7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3RleHR1cmVUb0FycmF5JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRleHR1cmVUb0FycmF5KGRpbXMsIHRleCkge1xuICAgICAgICAgICAgdmFyIHVzZUZsb2F0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB0cnVlO1xuICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogMDtcblxuICAgICAgICAgICAgdmFyIGNvbXB1dGVGdW5jID0gJ3ZlYzQgY1ZhbCA9IHRleHR1cmUyRCh1SW5wdXQsIHZDb29yZCk7XFxuZ2xfRnJhZ0RhdGFbMF0gPSAnICsgKHVzZUZsb2F0ID8gJ3BhY2tGbG9hdChjVmFsLicgKyAneHl6dydbY29tcG9uZW50XSArICcpJyA6ICdjVmFsJykgKyAnO1xcbic7XG4gICAgICAgICAgICB2YXIgaW5wdXROYW1lcyA9IFsndUlucHV0J107XG4gICAgICAgICAgICB2YXIga2VybmVsID0gdGhpcy5jcmVhdGVLZXJuZWwoY29tcHV0ZUZ1bmMsIGlucHV0TmFtZXMsIGRpbXMsIFtdLCAxLCBHUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFKTtcblxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBrZXJuZWwucnVuKFt0ZXhdLCBkaW1zLCB7fSwgZmFsc2UpO1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9IHRoaXMucmVhZFBhY2tlZEZsb2F0RGF0YShkaW1zKTtcbiAgICAgICAgICAgIHJlc3VsdHMuZGlzcG9zZSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gY29tcHV0ZTJEQXJyYXkoZGltcywgZnVuY3Rpb24gKHBvcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXRbcG9zLnkgKiBkaW1zLndpZHRoICsgcG9zLnhdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NyZWF0ZUtlcm5lbCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVLZXJuZWwoY29tcHV0ZUZ1bmMsIGlucHV0TmFtZXMsIG91dHB1dERpbXMpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IFtdO1xuICAgICAgICAgICAgdmFyIG51bU91dHB1dHMgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IDE7XG4gICAgICAgICAgICB2YXIgaW5jbHVkZVNyYyA9IGFyZ3VtZW50cy5sZW5ndGggPiA1ICYmIGFyZ3VtZW50c1s1XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzVdIDogJyc7XG4gICAgICAgICAgICB2YXIgaXNHcmFwaGljYWwgPSBhcmd1bWVudHMubGVuZ3RoID4gNiAmJiBhcmd1bWVudHNbNl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s2XSA6IGZhbHNlO1xuXG4gICAgICAgICAgICB2YXIgdW5pZm9ybXMgPSBbXS5jb25jYXQocGFyYW1zLCBpbnB1dE5hbWVzLm1hcChmdW5jdGlvbiAoaW5wdXROYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NhbXBsZXIyRCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGlucHV0TmFtZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSwgW3tcbiAgICAgICAgICAgICAgICB0eXBlOiAnaXZlYzInLFxuICAgICAgICAgICAgICAgIG5hbWU6ICd1RGltcydcbiAgICAgICAgICAgIH1dKTtcbiAgICAgICAgICAgIHZhciB2ZXJ0U2hhZGVyU3JjID0gR1BHUFVNYW5hZ2VyLmNyZWF0ZVZlcnRTaGFkZXJTcmMoaXNHcmFwaGljYWwpO1xuICAgICAgICAgICAgdmFyIGZyYWdTaGFkZXJTcmMgPSBHUEdQVU1hbmFnZXIuY3JlYXRlRnJhZ1NoYWRlclNyYyhjb21wdXRlRnVuYy50cmltKCkuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbiAobGluZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnICAgICcgKyBsaW5lO1xuICAgICAgICAgICAgfSkuam9pbignXFxuJykgKyAnXFxuJywgdW5pZm9ybXMsIGluY2x1ZGVTcmMsIG51bU91dHB1dHMgPiAxKTtcbiAgICAgICAgICAgIHZhciBwcm9ncmFtID0gY3JlYXRlUHJvZ3JhbSh0aGlzLmN0eCwgdmVydFNoYWRlclNyYywgZnJhZ1NoYWRlclNyYyk7XG5cbiAgICAgICAgICAgIHRoaXMuY3R4LnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgICAgICByZWdpc3RlclZlcnRleEF0dHJpYih0aGlzLmN0eCwgcHJvZ3JhbSwgJ2FQb3MnLCAyLCB0aGlzLnF1YWRQb3NCdWZmZXIpO1xuICAgICAgICAgICAgcmVnaXN0ZXJUZXh0dXJlcyh0aGlzLmN0eCwgcHJvZ3JhbSwgaW5wdXROYW1lcyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEdQR1BVS2VybmVsKHRoaXMsIHByb2dyYW0sIHBhcmFtcywgbnVtT3V0cHV0cywgaXNHcmFwaGljYWwpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjcmVhdGVHcmFwaGljYWxLZXJuZWwnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlR3JhcGhpY2FsS2VybmVsKGNvbXB1dGVGdW5jLCBpbnB1dE5hbWVzLCBvdXRwdXREaW1zKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBbXTtcbiAgICAgICAgICAgIHZhciBpbmNsdWRlU3JjID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiAnJztcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlS2VybmVsKGNvbXB1dGVGdW5jLCBpbnB1dE5hbWVzLCBvdXRwdXREaW1zLCBwYXJhbXMsIDAsIGluY2x1ZGVTcmMsIHRydWUpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEdQR1BVTWFuYWdlcjtcbn0oKTtcblxuO1xuXG4vLyBDcmVkaXQ6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL1Rvb1RhbGxOYXRlLzQ3NTA5NTNcbkdQR1BVTWFuYWdlci5lbmRpYW5uZXNzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBiID0gbmV3IEFycmF5QnVmZmVyKDQpO1xuICAgIHZhciBhID0gbmV3IFVpbnQzMkFycmF5KGIpO1xuICAgIHZhciBjID0gbmV3IFVpbnQ4QXJyYXkoYik7XG4gICAgYVswXSA9IDB4ZGVhZGJlZWY7XG4gICAgaWYgKGNbMF0gPT0gMHhlZikgcmV0dXJuICdMRSc7XG4gICAgaWYgKGNbMF0gPT0gMHhkZSkgcmV0dXJuICdCRSc7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGVuZGlhbm5lc3MnKTtcbn0oKTtcblxuR1BHUFVNYW5hZ2VyLmdldENhbnZhc0NvbnRleHQgPSBmdW5jdGlvbiAoY2FudmFzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgIGRlcHRoOiBmYWxzZSxcbiAgICAgICAgYW50aWFsaWFzOiBmYWxzZVxuICAgIH07XG4gICAgcmV0dXJuIGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcsIG9wdGlvbnMpIHx8IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbC1leHBlcmltZW50YWwnLCBvcHRpb25zKTtcbn07XG5cbkdQR1BVTWFuYWdlci5jcmVhdGVWZXJ0U2hhZGVyU3JjID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmbGlwWSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG4gICAgcmV0dXJuICdwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuXFxuYXR0cmlidXRlIHZlYzIgYVBvcztcXG5cXG52YXJ5aW5nIHZlYzIgdkNvb3JkO1xcblxcbnZvaWQgbWFpbigpe1xcbiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoJyArIChmbGlwWSA/ICdhUG9zLngsIC1hUG9zLnknIDogJ2FQb3MnKSArICcsIDAuMCwgMS4wKTtcXG4gICAgdkNvb3JkID0gKGFQb3MgKyAxLjApIC8gMi4wO1xcbn0nO1xufTtcblxuLy8vXG4vLy8gQWRhcHRlZCBmcm9tIGdwdS5qc1xuLy8vIGh0dHA6Ly9ncHUucm9ja3MvXG4vLy9cbi8vLyBHUFUgQWNjZWxlcmF0ZWQgSmF2YVNjcmlwdFxuLy8vXG4vLy8gQHZlcnNpb24gMC4wLjBcbi8vLyBAZGF0ZSAgICBNb24gSnVsIDA0IDIwMTYgMDA6NDc6MDcgR01UKzA4MDAgKFNHVClcbi8vL1xuLy8vIEBsaWNlbnNlIE1JVFxuLy8vIFRoZSBNSVQgTGljZW5zZVxuLy8vXG4vLy8gQ29weXJpZ2h0IChjKSAyMDE2IEZhemxpIFNhcHVhbiwgTWF0dGhldyBTYXcsIEV1Z2VuZSBDaGVhaCBhbmQgSnVsaWEgTG93XG4vLy9cbi8vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vL1xuLy8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4vLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vLy9cbi8vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuLy8vIFRIRSBTT0ZUV0FSRS5cbi8vL1xuXG5HUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFID0gJ2Zsb2F0IHJvdW5kKGZsb2F0IHgpIHtcXG4gICAgcmV0dXJuIGZsb29yKHggKyAwLjUpO1xcbn1cXG5cXG52ZWMyIGludGVnZXJNb2QodmVjMiB4LCBmbG9hdCB5KSB7XFxuICAgIHZlYzIgcmVzID0gZmxvb3IobW9kKHgsIHkpKTtcXG4gICAgcmV0dXJuIHJlcyAqIHN0ZXAoMS4wIC0gZmxvb3IoeSksIC1yZXMpO1xcbn1cXG5cXG5mbG9hdCBpbnRlZ2VyTW9kKGZsb2F0IHgsIGZsb2F0IHkpIHtcXG4gICAgZmxvYXQgcmVzID0gZmxvb3IobW9kKHgsIHkpKTtcXG4gICAgcmV0dXJuIHJlcyAqIChyZXMgPiBmbG9vcih5KSAtIDEuMCA/IDAuMCA6IDEuMCk7XFxufVxcblxcbmNvbnN0IHZlYzIgTUFHSUNfVkVDID0gdmVjMigxLjAsIC0yNTYuMCk7XFxuY29uc3QgdmVjNCBTQ0FMRV9GQUNUT1IgPSB2ZWM0KDEuMCwgMjU2LjAsIDY1NTM2LjAsIDAuMCk7XFxuY29uc3QgdmVjNCBTQ0FMRV9GQUNUT1JfSU5WID0gdmVjNCgxLjAsIDAuMDAzOTA2MjUsIDAuMDAwMDE1MjU4Nzg5MDYyNSwgMC4wKTsgLy8gMSwgMS8yNTYsIDEvNjU1MzZcXG5mbG9hdCB1bnBhY2tGbG9hdCh2ZWM0IHJnYmEpIHtcXG4nICsgKEdQR1BVTWFuYWdlci5lbmRpYW5uZXNzID09ICdMRScgPyAnJyA6ICcgICAgcmdiYS5yZ2JhID0gcmdiYS5hYmdyO1xcbicpICsgJyAgICByZ2JhICo9IDI1NS4wO1xcbiAgICB2ZWMyIGd0ZTEyODtcXG4gICAgZ3RlMTI4LnggPSByZ2JhLmIgPj0gMTI4LjAgPyAxLjAgOiAwLjA7XFxuICAgIGd0ZTEyOC55ID0gcmdiYS5hID49IDEyOC4wID8gMS4wIDogMC4wO1xcbiAgICBmbG9hdCBleHBvbmVudCA9IDIuMCAqIHJnYmEuYSAtIDEyNy4wICsgZG90KGd0ZTEyOCwgTUFHSUNfVkVDKTtcXG4gICAgZmxvYXQgcmVzID0gZXhwMihyb3VuZChleHBvbmVudCkpO1xcbiAgICByZ2JhLmIgPSByZ2JhLmIgLSAxMjguMCAqIGd0ZTEyOC54O1xcbiAgICByZXMgPSBkb3QocmdiYSwgU0NBTEVfRkFDVE9SKSAqIGV4cDIocm91bmQoZXhwb25lbnQtMjMuMCkpICsgcmVzO1xcbiAgICByZXMgKj0gZ3RlMTI4LnkgKiAtMi4wICsgMS4wO1xcbiAgICByZXR1cm4gcmVzO1xcbn1cXG5cXG52ZWM0IHBhY2tGbG9hdChmbG9hdCBmKSB7XFxuICAgIGZsb2F0IEYgPSBhYnMoZik7XFxuICAgIGZsb2F0IHNpZ24gPSBmIDwgMC4wID8gMS4wIDogMC4wO1xcbiAgICBmbG9hdCBleHBvbmVudCA9IGZsb29yKGxvZzIoRikpO1xcbiAgICBmbG9hdCBtYW50aXNzYSA9IChleHAyKC1leHBvbmVudCkgKiBGKTtcXG4gICAgLy8gZXhwb25lbnQgKz0gZmxvb3IobG9nMihtYW50aXNzYSkpO1xcbiAgICB2ZWM0IHJnYmEgPSB2ZWM0KEYgKiBleHAyKDIzLjAtZXhwb25lbnQpKSAqIFNDQUxFX0ZBQ1RPUl9JTlY7XFxuICAgIHJnYmEucmcgPSBpbnRlZ2VyTW9kKHJnYmEucmcsIDI1Ni4wKTtcXG4gICAgcmdiYS5iID0gaW50ZWdlck1vZChyZ2JhLmIsIDEyOC4wKTtcXG4gICAgcmdiYS5hID0gZXhwb25lbnQqMC41ICsgNjMuNTtcXG4gICAgcmdiYS5iYSArPSB2ZWMyKGludGVnZXJNb2QoZXhwb25lbnQrMTI3LjAsIDIuMCksIHNpZ24pICogMTI4LjA7XFxuICAgIHJnYmEgPSBmbG9vcihyZ2JhKTtcXG4gICAgcmdiYSAqPSAwLjAwMzkyMTU2OTsgLy8gMS8yNTVcXG4nICsgKEdQR1BVTWFuYWdlci5lbmRpYW5uZXNzID09ICdMRScgPyAnJyA6ICcgICAgcmdiYS5yZ2JhID0gcmdiYS5hYmdyO1xcbicpICsgJyAgICByZXR1cm4gcmdiYTtcXG59XFxuXFxuJztcblxuR1BHUFVNYW5hZ2VyLmNyZWF0ZUZyYWdTaGFkZXJTcmMgPSBmdW5jdGlvbiAoY29tcHV0ZUZ1bmMsIHVuaWZvcm1zKSB7XG4gICAgdmFyIGluY2x1ZGVTcmMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICcnO1xuICAgIHZhciB1c2VEcmF3QnVmZmVycyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogdHJ1ZTtcbiAgICByZXR1cm4gW3VzZURyYXdCdWZmZXJzID8gJyNleHRlbnNpb24gR0xfRVhUX2RyYXdfYnVmZmVyczogcmVxdWlyZVxcbicgOiAnJywgJ3ByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG5wcmVjaXNpb24gaGlnaHAgc2FtcGxlcjJEO1xcblxcbiNkZWZpbmUgRVBTIDAuMDAwMDAwMVxcblxcbiddLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodW5pZm9ybXMubWFwKGZ1bmN0aW9uICh1bmlmb3JtKSB7XG4gICAgICAgIHJldHVybiAndW5pZm9ybSAnICsgdW5pZm9ybS50eXBlICsgJyAnICsgdW5pZm9ybS5uYW1lICsgJztcXG4nO1xuICAgIH0pKSwgWydcXG52YXJ5aW5nIHZlYzIgdkNvb3JkO1xcblxcbnZlYzQgYXJyR2V0KHNhbXBsZXIyRCBhcnIsIGl2ZWMyIGlkKXtcXG4gICAgcmV0dXJuIHRleHR1cmUyRChhcnIsICh2ZWMyKGlkKSArIHZlYzIoMC41KSkgLyB2ZWMyKHVEaW1zKSk7XFxufVxcblxcbicsIGluY2x1ZGVTcmMsICd2b2lkIG1haW4oKXtcXG4gICAgaXZlYzIgdGhyZWFkSWQgPSBpdmVjMih2Q29vcmQgKiB2ZWMyKHVEaW1zKSk7XFxuJywgY29tcHV0ZUZ1bmMsICd9J10pLmpvaW4oJycpO1xufTtcbid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFJFRCA9IG5ldyBDb2xvcigyNTUsIDAsIDApO1xudmFyIEdSRUVOID0gbmV3IENvbG9yKDAsIDI1NSwgMCk7XG52YXIgQkxVRSA9IG5ldyBDb2xvcigwLCAwLCAyNTUpO1xudmFyIFdISVRFID0gbmV3IENvbG9yKDI1NSwgMjU1LCAyNTUpO1xuXG52YXIgQ29udG91cmVyTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb250b3VyZXJNYW5hZ2VyKGRyYXdGdW5jKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250b3VyZXJNYW5hZ2VyKTtcblxuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gbmV3IFNjYWxhYmxlVmlld3BvcnRNYW5hZ2VyKG5ldyBWZWN0b3IoMCwgMCksIDAuMDEpO1xuICAgICAgICB0aGlzLnpvb21TZW5zaXRpdml0eSA9IDAuMztcbiAgICAgICAgdGhpcy5jb250b3VyU3BhY2luZyA9IDEuMDtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ29udG91cmVyTWFuYWdlciwgW3tcbiAgICAgICAga2V5OiAnY2hhbmdlRHJhd0Z1bmMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlRHJhd0Z1bmMoZHJhd0Z1bmMsIGluY2x1ZGVTcmMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBpc0FuaW1hdGVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTtcblxuICAgICAgICAgICAgdmFyIGNyZWF0ZUZpZWxkS2VybmVsID0gZnVuY3Rpb24gY3JlYXRlRmllbGRLZXJuZWwoY29vcmQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmllbGRGdW5jID0gJ3ZlYzIgY1BvcyA9ICh2ZWMyKHRocmVhZElkKSAqIHVTY2FsZSkgKyB1UG9zO1xcbnZlYzIgcmVzO1xcbicgKyBkcmF3RnVuYy50cmltKCkgKyAnXFxuJyArXG4gICAgICAgICAgICAgICAgLy9gZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KFxuICAgICAgICAgICAgICAgIC8vICAgIHJlcyxcbiAgICAgICAgICAgICAgICAvLyAgICAwLjAsIDAuMFxuICAgICAgICAgICAgICAgIC8vKTtcbiAgICAgICAgICAgICAgICAnZ2xfRnJhZ0RhdGFbMF0gPSBwYWNrRmxvYXQocmVzLicgKyBjb29yZCArICcpO1xcbic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdwZ3B1TWFuYWdlci5jcmVhdGVLZXJuZWwoZmllbGRGdW5jLCBbXSwgX3RoaXMuZGltcywgW3tcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Zsb2F0JyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3VTY2FsZSdcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2ZWMyJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3VQb3MnXG4gICAgICAgICAgICAgICAgfV0uY29uY2F0KGlzQW5pbWF0ZWQgPyBbe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndGltZSdcbiAgICAgICAgICAgICAgICB9XSA6IFtdKSwgMSwgR1BHUFVNYW5hZ2VyLlBBQ0tfRkxPQVRfSU5DTFVERSArIGluY2x1ZGVTcmMudHJpbSgpICsgJ1xcblxcbicpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZmllbGRLZXJuZWxYID0gY3JlYXRlRmllbGRLZXJuZWwoJ3gnKTtcbiAgICAgICAgICAgIHRoaXMuZmllbGRLZXJuZWxZID0gY3JlYXRlRmllbGRLZXJuZWwoJ3knKTtcblxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5zY2FsZSA9IDEwLjAgLyB0aGlzLmRpbXMud2lkdGg7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LnBvcyA9IG5ldyBWZWN0b3IoLXRoaXMuZGltcy53aWR0aCwgLXRoaXMuZGltcy5oZWlnaHQpLmRpdmlkZSgyLjApLm11bHRpcGx5KHRoaXMudmlld3BvcnQuc2NhbGUpO1xuICAgICAgICAgICAgdGhpcy5jb250b3VyU3BhY2luZyA9IDEuMDtcblxuICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGVkID0gaXNBbmltYXRlZDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndXNlQ2FudmFzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVzZUNhbnZhcyhjYW52YXMpIHtcbiAgICAgICAgICAgIHRoaXMuY3R4ID0gR1BHUFVNYW5hZ2VyLmdldENhbnZhc0NvbnRleHQoY2FudmFzKTtcbiAgICAgICAgICAgIHRoaXMuZ3BncHVNYW5hZ2VyID0gbmV3IEdQR1BVTWFuYWdlcih0aGlzLmN0eCwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5kaW1zID0gZ2V0Q2FudmFzRGltcyh0aGlzLmN0eCk7XG5cbiAgICAgICAgICAgIHRoaXMucGxvdEtlcm5lbCA9IHRoaXMuZ3BncHVNYW5hZ2VyLmNyZWF0ZUdyYXBoaWNhbEtlcm5lbChDb250b3VyZXJNYW5hZ2VyLnBsb3RGdW5jLCBbJ3VGaWVsZFgnLCAndUZpZWxkWSddLCB0aGlzLmRpbXMsIFt7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2Zsb2F0JyxcbiAgICAgICAgICAgICAgICBuYW1lOiAndUNvbnRvdXJTcGFjaW5nJ1xuICAgICAgICAgICAgfV0sIEdQR1BVTWFuYWdlci5QQUNLX0ZMT0FUX0lOQ0xVREUgKyBDb250b3VyZXJNYW5hZ2VyLkZJRUxEX0NIRUNLX0lOQ0xVREUpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkZXN0cm95Q29udGV4dCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95Q29udGV4dCgpIHtcbiAgICAgICAgICAgIHRoaXMuY3R4LmNhbnZhcy53aWR0aCA9IDE7XG4gICAgICAgICAgICB0aGlzLmN0eC5jYW52YXMuaGVpZ2h0ID0gMTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2hhbmdlWm9vbScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2Vab29tKGNoYW5nZUFtb3VudCkge1xuICAgICAgICAgICAgdmFyIHpvb21Qb2ludCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbmV3IFZlY3Rvcih0aGlzLmRpbXMud2lkdGggLyAyLCB0aGlzLmRpbXMuaGVpZ2h0IC8gMik7XG5cbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc2NhbGVBdFBvaW50KC1jaGFuZ2VBbW91bnQgKiB0aGlzLnpvb21TZW5zaXRpdml0eSwgem9vbVBvaW50KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2hhbmdlQ29udG91clNwYWNpbmcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hhbmdlQ29udG91clNwYWNpbmcoY2hhbmdlQW1vdW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRvdXJTcGFjaW5nICo9IE1hdGguZXhwKGNoYW5nZUFtb3VudCAqIHRoaXMuem9vbVNlbnNpdGl2aXR5KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndHJhbnNsYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRyYW5zbGF0ZSh0cmFuc2xhdGVBbW91bnQpIHtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQudHJhbnNsYXRlKHRyYW5zbGF0ZUFtb3VudCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2RyYXdDb250b3VycycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3Q29udG91cnMoKSB7XG4gICAgICAgICAgICB2YXIgdGltZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMDtcblxuICAgICAgICAgICAgdmFyIHVuaWZvcm1Bc3NpZ25tZW50cyA9IHtcbiAgICAgICAgICAgICAgICB1U2NhbGU6IHRoaXMudmlld3BvcnQuc2NhbGUsXG4gICAgICAgICAgICAgICAgdVBvczogdGhpcy52aWV3cG9ydC5wb3MudG9BcnJheSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBbmltYXRlZCkge1xuICAgICAgICAgICAgICAgIHVuaWZvcm1Bc3NpZ25tZW50c1sndGltZSddID0gdGltZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmaWVsZFJlc3VsdFggPSB0aGlzLmZpZWxkS2VybmVsWC5ydW4oW10sIHRoaXMuZGltcywgdW5pZm9ybUFzc2lnbm1lbnRzLCBmYWxzZSk7XG4gICAgICAgICAgICB2YXIgZmllbGRSZXN1bHRZID0gdGhpcy5maWVsZEtlcm5lbFkucnVuKFtdLCB0aGlzLmRpbXMsIHVuaWZvcm1Bc3NpZ25tZW50cywgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5wbG90S2VybmVsLnJ1bihbZmllbGRSZXN1bHRYLnRleHR1cmVzWzBdLCBmaWVsZFJlc3VsdFkudGV4dHVyZXNbMF1dLCB0aGlzLmRpbXMsIHtcbiAgICAgICAgICAgICAgICB1Q29udG91clNwYWNpbmc6IHRoaXMuY29udG91clNwYWNpbmdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZmllbGRSZXN1bHRYLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGZpZWxkUmVzdWx0WS5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29udG91cmVyTWFuYWdlcjtcbn0oKTtcblxuO1xuXG5Db250b3VyZXJNYW5hZ2VyLnBsb3RGdW5jID0gJ2l2ZWMyIGxpbmVJbmRleCA9IGl2ZWMyKGZsb29yKHZlYzIoXFxuICAgIHVucGFja0Zsb2F0KHRleHR1cmUyRCh1RmllbGRYLCB2Q29vcmQpKSxcXG4gICAgdW5wYWNrRmxvYXQodGV4dHVyZTJEKHVGaWVsZFksIHZDb29yZCkpXFxuKSAvIHVDb250b3VyU3BhY2luZykpO1xcbnZlYzIgY21wRmllbGQgPSB2ZWMyKGxpbmVJbmRleCkgKiB1Q29udG91clNwYWNpbmc7XFxuaXZlYzIgZHJhd0RhdGEgPSBpdmVjMihncmVhdGVyVGhhbkVxdWFsKFxcbiAgICBmaWVsZENoZWNrKHRocmVhZElkLCBpdmVjMigwLCAxKSwgY21wRmllbGQpICtcXG4gICAgZmllbGRDaGVjayh0aHJlYWRJZCwgaXZlYzIoMSwgMCksIGNtcEZpZWxkKSArXFxuICAgIGZpZWxkQ2hlY2sodGhyZWFkSWQsIGl2ZWMyKDAsIC0xKSwgY21wRmllbGQpICtcXG4gICAgZmllbGRDaGVjayh0aHJlYWRJZCwgaXZlYzIoLTEsIDApLCBjbXBGaWVsZCksXFxuICAgIGl2ZWMyKDEpKSk7XFxuaWYoYWxsKGVxdWFsKGRyYXdEYXRhLCBpdmVjMigwKSkpKXtcXG4gICAgZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIDEuMCk7XFxufVxcbmVsc2V7XFxuICAgIHZlYzIgaXNBeGlzID0gdmVjMihlcXVhbChsaW5lSW5kZXgsIGl2ZWMyKDApKSk7XFxuICAgIHZlYzIgbGluZUNvbG9yID0gdmVjMihkcmF3RGF0YSkgKiAoMS4wIC0gMC41ICogaXNBeGlzKTtcXG4gICAgZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KGxpbmVDb2xvci54LCAwLjUgKiBkb3QodmVjMihkcmF3RGF0YSksIGlzQXhpcyksIGxpbmVDb2xvci55LCAxLjApO1xcbn1cXG4nO1xuXG5Db250b3VyZXJNYW5hZ2VyLkZJRUxEX0NIRUNLX0lOQ0xVREUgPSAndmVjMiBnZXRGaWVsZChpdmVjMiBwb3Mpe1xcbiAgICByZXR1cm4gdmVjMihcXG4gICAgICAgIHVucGFja0Zsb2F0KGFyckdldCh1RmllbGRYLCBwb3MpKSxcXG4gICAgICAgIHVucGFja0Zsb2F0KGFyckdldCh1RmllbGRZLCBwb3MpKVxcbiAgICApO1xcbn1cXG5cXG5pdmVjMiBmaWVsZENoZWNrKGl2ZWMyIGNQb3MsIGl2ZWMyIGRpciwgdmVjMiBjbXBGaWVsZCl7XFxuICAgIGl2ZWMyIG9Qb3MgPSBjUG9zICsgZGlyO1xcbiAgICBpZihhbGwoZ3JlYXRlclRoYW5FcXVhbChvUG9zLCBpdmVjMigwKSkpICYmIGFsbChsZXNzVGhhbihvUG9zLCB1RGltcykpKXtcXG4gICAgICAgIHJldHVybiBpdmVjMihsZXNzVGhhbihnZXRGaWVsZChvUG9zKSwgY21wRmllbGQpKTtcXG4gICAgfVxcbiAgICBlbHNlIHJldHVybiBpdmVjMigwKTtcXG59XFxuXFxuJztcblxudmFyIENvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29udG91cmVyQW5pbWF0aW9uTWFuYWdlcihtYW5hZ2VyKSB7XG4gICAgICAgIHZhciBudW1GcmFtZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDEwMDA7XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXIpO1xuXG4gICAgICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5udW1GcmFtZXMgPSBudW1GcmFtZXM7XG4gICAgICAgIHRoaXMuY3VycmVudEZyYW1lID0gMDtcbiAgICAgICAgdGhpcy5vblN0b3BDYWxsYmFjayA9IG51bGw7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uTG9vcCA9IHRoaXMuYW5pbWF0aW9uTG9vcC5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhDb250b3VyZXJBbmltYXRpb25NYW5hZ2VyLCBbe1xuICAgICAgICBrZXk6ICdzdGFydCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgICAgICAgIHZhciBzdGFydEZyYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwO1xuICAgICAgICAgICAgdmFyIG9uRHJhdyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbnVsbDtcblxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSBzdGFydEZyYW1lO1xuICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm9uRHJhdyA9IG9uRHJhdztcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25Mb29wKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYW5pbWF0aW9uTG9vcCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhbmltYXRpb25Mb29wKHRpbWVzdGFtcCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNBbmltYXRpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hbmFnZXIuZHJhd0NvbnRvdXJzKHRoaXMuY3VycmVudEZyYW1lIC8gdGhpcy5udW1GcmFtZXMpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9uRHJhdyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25EcmF3KHRoaXMuY3VycmVudEZyYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSAodGhpcy5jdXJyZW50RnJhbWUgKyAxKSAlIHRoaXMubnVtRnJhbWVzO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25Mb29wKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25TdG9wQ2FsbGJhY2sgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU3RvcENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzdG9wJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgICAgICB2YXIgb25TdG9wQ2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG51bGw7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMub25TdG9wQ2FsbGJhY2sgPSBvblN0b3BDYWxsYmFjaztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG9uU3RvcENhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgb25TdG9wQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29udG91cmVyQW5pbWF0aW9uTWFuYWdlcjtcbn0oKTtcblxuO1xuXG5mdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBtYW5hZ2VyID0gbmV3IENvbnRvdXJlck1hbmFnZXIoKTtcbiAgICBpbml0UmVuZGVyKG1hbmFnZXIpO1xufVxuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgRGVtb0Z1bmN0aW9ucyA9IGZ1bmN0aW9uIERlbW9GdW5jdGlvbnMoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERlbW9GdW5jdGlvbnMpO1xufTtcblxuO1xuXG5EZW1vRnVuY3Rpb25zLklOQ0xVREVTID0ge1xuICAgIHBpOiAnY29uc3QgZmxvYXQgUEkgPSAzLjE0MTU5MjY1MzU4OTc5MzIzODQ2MjY0MzM4MzI3OTU7XFxuXFxuJyxcbiAgICBjb21wbGV4TGliOiAndmVjMiBjb21wbGV4TXVsdCh2ZWMyIGEsIHZlYzIgYil7XFxuICAgIHJldHVybiB2ZWMyKGEueCAqIGIueCAtIGEueSAqIGIueSwgYS55ICogYi54ICsgYS54ICogYi55KTtcXG59XFxuXFxudmVjMiBjb21wbGV4RGl2KHZlYzIgYSwgdmVjMiBiKXtcXG4gICAgZmxvYXQgZGl2aXNvciA9IGRvdChiLCBiKTtcXG4gICAgcmV0dXJuIHZlYzIoZG90KGEsIGIpLCBhLnkgKiBiLnggLSBhLnggKiBiLnkpIC8gZGl2aXNvcjtcXG59XFxuXFxudmVjMiBjb21wbGV4UG93KHZlYzIgYSwgdmVjMiBiKXtcXG4gICAgZmxvYXQgciA9IGxlbmd0aChhKSwgcGhpID0gYXRhbihhLnksIGEueCk7XFxuICAgIGZsb2F0IG5ld1IgPSBwb3cociwgYi54KSAqIGV4cCgtYi55ICogcGhpKTtcXG4gICAgZmxvYXQgbmV3UGhpID0gYi55ICogbG9nKHIpICsgYi54ICogcGhpO1xcbiAgICByZXR1cm4gbmV3UiAqIHZlYzIoY29zKG5ld1BoaSksIHNpbihuZXdQaGkpKTtcXG59XFxuXFxudmVjMiBjb21wbGV4RXhwKHZlYzIgYil7XFxuICAgIHJldHVybiBleHAoYi54KSAqIHZlYzIoY29zKGIueSksIHNpbihiLnkpKTtcXG59XFxuXFxudmVjMiBjb21wbGV4TG9nKHZlYzIgeCl7XFxuICAgIHJldHVybiB2ZWMyKGxvZyhsZW5ndGgoeCkpLCBhdGFuKHgueSwgeC54KSk7XFxufVxcblxcbicsXG4gICAgZ2FtbWE6ICcvKipcXG4gKiBUcmFuc2xhdGVkIHRvIE9wZW5HTCBFUyBmcm9tIG1hdGguanNcXG4gKiBodHRwczovL2dpdGh1Yi5jb20vam9zZGVqb25nL21hdGhqc1xcbiAqXFxuICogTWF0aC5qcyBpcyBhbiBleHRlbnNpdmUgbWF0aCBsaWJyYXJ5IGZvciBKYXZhU2NyaXB0IGFuZCBOb2RlLmpzLFxcbiAqIEl0IGZlYXR1cmVzIHJlYWwgYW5kIGNvbXBsZXggbnVtYmVycywgdW5pdHMsIG1hdHJpY2VzLCBhIGxhcmdlIHNldCBvZlxcbiAqIG1hdGhlbWF0aWNhbCBmdW5jdGlvbnMsIGFuZCBhIGZsZXhpYmxlIGV4cHJlc3Npb24gcGFyc2VyLlxcbiAqXFxuICogQHZlcnNpb24gMy4yLjFcXG4gKiBAZGF0ZSAgICAyMDE2LTA0LTI2XFxuICpcXG4gKiBAbGljZW5zZVxcbiAqIENvcHlyaWdodCAoQykgMjAxMy0yMDE2IEpvcyBkZSBKb25nIDx3am9zZGVqb25nQGdtYWlsLmNvbT5cXG4gKlxcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90XFxuICogdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcXG4gKiBvZiB0aGUgTGljZW5zZSBhdFxcbiAqXFxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXFxuICpcXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXFxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUXFxuICogV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlXFxuICogTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXJcXG4gKiB0aGUgTGljZW5zZS5cXG4gKi9cXG5cXG52ZWMyIGdhbW1hU3RlcCh2ZWMyIHgsIGludCBpLCB2ZWMyIG4sIGZsb2F0IHApe1xcbiAgICBmbG9hdCByZWFsID0gbi54ICsgZmxvYXQoaSk7XFxuICAgIGZsb2F0IGRlbiA9IHJlYWwgKiByZWFsICsgbi55ICogbi55O1xcbiAgICBpZihkZW4gIT0gMC4wKXtcXG4gICAgICAgIHJldHVybiB4ICsgdmVjMihwICogcmVhbCAvIGRlbiwgLShwICogbi55KSAvIGRlbik7XFxuICAgIH1cXG4gICAgZWxzZSByZXR1cm4gdmVjMigwLjApO1xcbn1cXG5cXG52ZWMyIGdhbW1hKHZlYzIgbil7XFxuICAgIG4ueCAtPSAxLjA7XFxuICAgIHZlYzIgeCA9IHZlYzIoMC45OTk5OTk5OTk5OTk5OTcwOTE4MiwgMC4wKTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDEsIG4sIDU3LjE1NjIzNTY2NTg2MjkyMzUxNyk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCAyLCBuLCAtNTkuNTk3OTYwMzU1NDc1NDkxMjQ4KTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDMsIG4sIDE0LjEzNjA5Nzk3NDc0MTc0NzE3NCk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCA0LCBuLCAtMC40OTE5MTM4MTYwOTc2MjAxOTk3OCk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCA1LCBuLCAwLjMzOTk0NjQ5OTg0ODExODg4Njk5ZS00KTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDYsIG4sIDAuNDY1MjM2Mjg5MjcwNDg1NzU2NjVlLTQpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgNywgbiwgLTAuOTgzNzQ0NzUzMDQ4Nzk1NjQ2NzdlLTQpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgOCwgbiwgMC4xNTgwODg3MDMyMjQ5MTI0ODg4NGUtMyk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCA5LCBuLCAtMC4yMTAyNjQ0NDE3MjQxMDQ4ODMxOWUtMyk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCAxMCwgbiwgMC4yMTc0Mzk2MTgxMTUyMTI2NDMyMGUtMyk7XFxuXFx0eCA9IGdhbW1hU3RlcCh4LCAxMSwgbiwgLTAuMTY0MzE4MTA2NTM2NzYzODkwMjJlLTMpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgMTIsIG4sIDAuODQ0MTgyMjM5ODM4NTI3NDMyOTNlLTQpO1xcblxcdHggPSBnYW1tYVN0ZXAoeCwgMTMsIG4sIC0wLjI2MTkwODM4NDAxNTgxNDA4NjcwZS00KTtcXG5cXHR4ID0gZ2FtbWFTdGVwKHgsIDE0LCBuLCAwLjM2ODk5MTgyNjU5NTMxNjIyNzA0ZS01KTtcXG4gICAgdmVjMiB0ID0gdmVjMihuLnggKyA0Ljc0MjE4NzUgKyAwLjUsIG4ueSk7XFxuICAgIGZsb2F0IHR3b1BpU3FydCA9IHNxcnQoMi4wICogUEkpO1xcblxcbiAgICBuLnggKz0gMC41O1xcbiAgICB2ZWMyIHJlc3VsdCA9IGNvbXBsZXhQb3codCwgbik7XFxuICAgIHJlc3VsdCAqPSB0d29QaVNxcnQ7XFxuICAgIGZsb2F0IHIgPSBleHAoLXQueCk7XFxuICAgIHQgPSByICogdmVjMihjb3MoLXQueSksIHNpbigtdC55KSk7XFxuXFxuICAgIHJldHVybiBjb21wbGV4TXVsdChjb21wbGV4TXVsdChyZXN1bHQsIHQpLCB4KTtcXG59XFxuXFxuJyxcbiAgICByb3RhdGVXaXRoVGltZTogJ3ZlYzIgcm90YXRlV2l0aFRpbWUodmVjMiB2KXtcXG4gICAgZmxvYXQgY29zVCA9IGNvcyh0aW1lICogMi4wICogUEkpLCBzaW5UID0gc2luKHRpbWUgKiAyLjAgKiBQSSk7XFxuICAgIHJldHVybiB2ZWMyKFxcbiAgICAgICAgdi54ICogY29zVCAtIHYueSAqIHNpblQsXFxuICAgICAgICB2LnggKiBzaW5UICsgdi55ICogY29zVFxcbiAgICApO1xcbn1cXG5cXG4nLFxuICAgIHNub2lzZTogJy8vXFxuLy8gRGVzY3JpcHRpb24gOiBBcnJheSBhbmQgdGV4dHVyZWxlc3MgR0xTTCAyRC8zRC80RCBzaW1wbGV4IFxcbi8vICAgICAgICAgICAgICAgbm9pc2UgZnVuY3Rpb25zLlxcbi8vICAgICAgQXV0aG9yIDogSWFuIE1jRXdhbiwgQXNoaW1hIEFydHMuXFxuLy8gIE1haW50YWluZXIgOiBzdGVndVxcbi8vICAgICBMYXN0bW9kIDogMjAxMTA4MjIgKGlqbSlcXG4vLyAgICAgTGljZW5zZSA6IENvcHlyaWdodCAoQykgMjAxMSBBc2hpbWEgQXJ0cy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cXG4vLyAgICAgICAgICAgICAgIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExJQ0VOU0UgZmlsZS5cXG4vLyAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2hpbWEvd2ViZ2wtbm9pc2VcXG4vLyAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9zdGVndS93ZWJnbC1ub2lzZVxcbi8vIFxcblxcbnZlYzQgbW9kMjg5KHZlYzQgeCkge1xcbiAgcmV0dXJuIHggLSBmbG9vcih4ICogKDEuMCAvIDI4OS4wKSkgKiAyODkuMDsgfVxcblxcbmZsb2F0IG1vZDI4OShmbG9hdCB4KSB7XFxuICByZXR1cm4geCAtIGZsb29yKHggKiAoMS4wIC8gMjg5LjApKSAqIDI4OS4wOyB9XFxuXFxudmVjNCBwZXJtdXRlKHZlYzQgeCkge1xcbiAgICAgcmV0dXJuIG1vZDI4OSgoKHgqMzQuMCkrMS4wKSp4KTtcXG59XFxuXFxuZmxvYXQgcGVybXV0ZShmbG9hdCB4KSB7XFxuICAgICByZXR1cm4gbW9kMjg5KCgoeCozNC4wKSsxLjApKngpO1xcbn1cXG5cXG52ZWM0IHRheWxvckludlNxcnQodmVjNCByKVxcbntcXG4gIHJldHVybiAxLjc5Mjg0MjkxNDAwMTU5IC0gMC44NTM3MzQ3MjA5NTMxNCAqIHI7XFxufVxcblxcbmZsb2F0IHRheWxvckludlNxcnQoZmxvYXQgcilcXG57XFxuICByZXR1cm4gMS43OTI4NDI5MTQwMDE1OSAtIDAuODUzNzM0NzIwOTUzMTQgKiByO1xcbn1cXG5cXG52ZWM0IGdyYWQ0KGZsb2F0IGosIHZlYzQgaXApXFxuICB7XFxuICBjb25zdCB2ZWM0IG9uZXMgPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIC0xLjApO1xcbiAgdmVjNCBwLHM7XFxuXFxuICBwLnh5eiA9IGZsb29yKCBmcmFjdCAodmVjMyhqKSAqIGlwLnh5eikgKiA3LjApICogaXAueiAtIDEuMDtcXG4gIHAudyA9IDEuNSAtIGRvdChhYnMocC54eXopLCBvbmVzLnh5eik7XFxuICBzID0gdmVjNChsZXNzVGhhbihwLCB2ZWM0KDAuMCkpKTtcXG4gIHAueHl6ID0gcC54eXogKyAocy54eXoqMi4wIC0gMS4wKSAqIHMud3d3OyBcXG5cXG4gIHJldHVybiBwO1xcbiAgfVxcblxcdFxcdFxcdFxcdFxcdFxcdFxcbi8vIChzcXJ0KDUpIC0gMSkvNCA9IEY0LCB1c2VkIG9uY2UgYmVsb3dcXG4jZGVmaW5lIEY0IDAuMzA5MDE2OTk0Mzc0OTQ3NDUxXFxuXFxuZmxvYXQgc25vaXNlKHZlYzQgdilcXG4gIHtcXG4gIGNvbnN0IHZlYzQgIEMgPSB2ZWM0KCAwLjEzODE5NjYwMTEyNTAxMSwgIC8vICg1IC0gc3FydCg1KSkvMjAgIEc0XFxuICAgICAgICAgICAgICAgICAgICAgICAgMC4yNzYzOTMyMDIyNTAwMjEsICAvLyAyICogRzRcXG4gICAgICAgICAgICAgICAgICAgICAgICAwLjQxNDU4OTgwMzM3NTAzMiwgIC8vIDMgKiBHNFxcbiAgICAgICAgICAgICAgICAgICAgICAgLTAuNDQ3MjEzNTk1NDk5OTU4KTsgLy8gLTEgKyA0ICogRzRcXG5cXG4vLyBGaXJzdCBjb3JuZXJcXG4gIHZlYzQgaSAgPSBmbG9vcih2ICsgZG90KHYsIHZlYzQoRjQpKSApO1xcbiAgdmVjNCB4MCA9IHYgLSAgIGkgKyBkb3QoaSwgQy54eHh4KTtcXG5cXG4vLyBPdGhlciBjb3JuZXJzXFxuXFxuLy8gUmFuayBzb3J0aW5nIG9yaWdpbmFsbHkgY29udHJpYnV0ZWQgYnkgQmlsbCBMaWNlYS1LYW5lLCBBTUQgKGZvcm1lcmx5IEFUSSlcXG4gIHZlYzQgaTA7XFxuICB2ZWMzIGlzWCA9IHN0ZXAoIHgwLnl6dywgeDAueHh4ICk7XFxuICB2ZWMzIGlzWVogPSBzdGVwKCB4MC56d3csIHgwLnl5eiApO1xcbi8vICBpMC54ID0gZG90KCBpc1gsIHZlYzMoIDEuMCApICk7XFxuICBpMC54ID0gaXNYLnggKyBpc1gueSArIGlzWC56O1xcbiAgaTAueXp3ID0gMS4wIC0gaXNYO1xcbi8vICBpMC55ICs9IGRvdCggaXNZWi54eSwgdmVjMiggMS4wICkgKTtcXG4gIGkwLnkgKz0gaXNZWi54ICsgaXNZWi55O1xcbiAgaTAuencgKz0gMS4wIC0gaXNZWi54eTtcXG4gIGkwLnogKz0gaXNZWi56O1xcbiAgaTAudyArPSAxLjAgLSBpc1laLno7XFxuXFxuICAvLyBpMCBub3cgY29udGFpbnMgdGhlIHVuaXF1ZSB2YWx1ZXMgMCwxLDIsMyBpbiBlYWNoIGNoYW5uZWxcXG4gIHZlYzQgaTMgPSBjbGFtcCggaTAsIDAuMCwgMS4wICk7XFxuICB2ZWM0IGkyID0gY2xhbXAoIGkwLTEuMCwgMC4wLCAxLjAgKTtcXG4gIHZlYzQgaTEgPSBjbGFtcCggaTAtMi4wLCAwLjAsIDEuMCApO1xcblxcbiAgLy8gIHgwID0geDAgLSAwLjAgKyAwLjAgKiBDLnh4eHhcXG4gIC8vICB4MSA9IHgwIC0gaTEgICsgMS4wICogQy54eHh4XFxuICAvLyAgeDIgPSB4MCAtIGkyICArIDIuMCAqIEMueHh4eFxcbiAgLy8gIHgzID0geDAgLSBpMyAgKyAzLjAgKiBDLnh4eHhcXG4gIC8vICB4NCA9IHgwIC0gMS4wICsgNC4wICogQy54eHh4XFxuICB2ZWM0IHgxID0geDAgLSBpMSArIEMueHh4eDtcXG4gIHZlYzQgeDIgPSB4MCAtIGkyICsgQy55eXl5O1xcbiAgdmVjNCB4MyA9IHgwIC0gaTMgKyBDLnp6eno7XFxuICB2ZWM0IHg0ID0geDAgKyBDLnd3d3c7XFxuXFxuLy8gUGVybXV0YXRpb25zXFxuICBpID0gbW9kMjg5KGkpOyBcXG4gIGZsb2F0IGowID0gcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZShpLncpICsgaS56KSArIGkueSkgKyBpLngpO1xcbiAgdmVjNCBqMSA9IHBlcm11dGUoIHBlcm11dGUoIHBlcm11dGUoIHBlcm11dGUgKFxcbiAgICAgICAgICAgICBpLncgKyB2ZWM0KGkxLncsIGkyLncsIGkzLncsIDEuMCApKVxcbiAgICAgICAgICAgKyBpLnogKyB2ZWM0KGkxLnosIGkyLnosIGkzLnosIDEuMCApKVxcbiAgICAgICAgICAgKyBpLnkgKyB2ZWM0KGkxLnksIGkyLnksIGkzLnksIDEuMCApKVxcbiAgICAgICAgICAgKyBpLnggKyB2ZWM0KGkxLngsIGkyLngsIGkzLngsIDEuMCApKTtcXG5cXG4vLyBHcmFkaWVudHM6IDd4N3g2IHBvaW50cyBvdmVyIGEgY3ViZSwgbWFwcGVkIG9udG8gYSA0LWNyb3NzIHBvbHl0b3BlXFxuLy8gNyo3KjYgPSAyOTQsIHdoaWNoIGlzIGNsb3NlIHRvIHRoZSByaW5nIHNpemUgMTcqMTcgPSAyODkuXFxuICB2ZWM0IGlwID0gdmVjNCgxLjAvMjk0LjAsIDEuMC80OS4wLCAxLjAvNy4wLCAwLjApIDtcXG5cXG4gIHZlYzQgcDAgPSBncmFkNChqMCwgICBpcCk7XFxuICB2ZWM0IHAxID0gZ3JhZDQoajEueCwgaXApO1xcbiAgdmVjNCBwMiA9IGdyYWQ0KGoxLnksIGlwKTtcXG4gIHZlYzQgcDMgPSBncmFkNChqMS56LCBpcCk7XFxuICB2ZWM0IHA0ID0gZ3JhZDQoajEudywgaXApO1xcblxcbi8vIE5vcm1hbGlzZSBncmFkaWVudHNcXG4gIHZlYzQgbm9ybSA9IHRheWxvckludlNxcnQodmVjNChkb3QocDAscDApLCBkb3QocDEscDEpLCBkb3QocDIsIHAyKSwgZG90KHAzLHAzKSkpO1xcbiAgcDAgKj0gbm9ybS54O1xcbiAgcDEgKj0gbm9ybS55O1xcbiAgcDIgKj0gbm9ybS56O1xcbiAgcDMgKj0gbm9ybS53O1xcbiAgcDQgKj0gdGF5bG9ySW52U3FydChkb3QocDQscDQpKTtcXG5cXG4vLyBNaXggY29udHJpYnV0aW9ucyBmcm9tIHRoZSBmaXZlIGNvcm5lcnNcXG4gIHZlYzMgbTAgPSBtYXgoMC42IC0gdmVjMyhkb3QoeDAseDApLCBkb3QoeDEseDEpLCBkb3QoeDIseDIpKSwgMC4wKTtcXG4gIHZlYzIgbTEgPSBtYXgoMC42IC0gdmVjMihkb3QoeDMseDMpLCBkb3QoeDQseDQpICAgICAgICAgICAgKSwgMC4wKTtcXG4gIG0wID0gbTAgKiBtMDtcXG4gIG0xID0gbTEgKiBtMTtcXG4gIHJldHVybiA0OS4wICogKCBkb3QobTAqbTAsIHZlYzMoIGRvdCggcDAsIHgwICksIGRvdCggcDEsIHgxICksIGRvdCggcDIsIHgyICkpKVxcbiAgICAgICAgICAgICAgICsgZG90KG0xKm0xLCB2ZWMyKCBkb3QoIHAzLCB4MyApLCBkb3QoIHA0LCB4NCApICkgKSApIDtcXG5cXG59XFxuXFxuJ1xufTtcblxuRGVtb0Z1bmN0aW9ucy5mdW5jdGlvbnMgPSB7XG4gICAgbG9yZW50ejoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0xvcmVudHogQm9vc3QnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDIwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSxcbiAgICAgICAgZHJhd0Z1bmM6ICdmbG9hdCBiZXRhID0gc2luKHRpbWUgKiAyLjAgKiBQSSkgKiAwLjk7XFxuZmxvYXQgZ2FtbWEgPSAxLjAgLyBzcXJ0KDEuMCAtIGJldGEgKiBiZXRhKTtcXG5yZXMgPSBnYW1tYSAqIHZlYzIoXFxuICAgIGNQb3MueCAqIDEuMCArIGNQb3MueSAqIGJldGEsXFxuICAgIGNQb3MueSAqIDEuMCArIGNQb3MueCAqIGJldGFcXG4pO1xcblxcbidcbiAgICB9LFxuICAgIC8vICAgIHJvdGF0aW9uOiB7XG4gICAgLy8gICAgICAgIGRpc3BsYXlOYW1lOiAnUm90YXRpb24nLFxuICAgIC8vICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgIC8vICAgICAgICBudW1GcmFtZXM6IDgwMCxcbiAgICAvLyAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgLy8gICAgICAgIGRyYXdGdW5jOlxuICAgIC8vYHJlcyA9IHJvdGF0ZVdpdGhUaW1lKGNQb3MpO1xuICAgIC8vYFxuICAgIC8vICAgIH0sXG4gICAgbWVyY2F0b3J3YXJwOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTWVyY2F0b3IgV2FycCcsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogODAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbiAgICAgICAgZHJhd0Z1bmM6ICd2ZWMyIHNjYWxlZFBvcyA9IGNQb3MgKiAwLjY7XFxudmVjMiBpbnZNZXJjYXRvciA9IHZlYzIoc2NhbGVkUG9zLngsIDIuMCAqIGF0YW4oZXhwKHNjYWxlZFBvcy55KSkgLSAwLjUgKiBQSSkgKiA4LjA7XFxucmVzID0gcm90YXRlV2l0aFRpbWUoaW52TWVyY2F0b3IpO1xcbidcbiAgICB9LFxuICAgIG1lcmNhdG9yTW9sbHdlaWRlOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnTWVyY2F0b3IgdG8gTW9sbHdlaWRlJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAxMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGksXG4gICAgICAgIGRyYXdGdW5jOiAndmVjMiBzY2FsZWRQb3MgPSBjUG9zICogMC4zO1xcbmZsb2F0IHRoZXRhID0gYXNpbihzY2FsZWRQb3MueSAqIDIuMCAvIFBJKTtcXG52ZWMyIGludk1vbGx3ZWlkZSA9IHZlYzIoXFxuICAgIHNjYWxlZFBvcy54IC8gY29zKHRoZXRhKSxcXG4gICAgYXNpbigoMi4wICogdGhldGEgKyBzaW4oMi4wICogdGhldGEpKSAvIFBJKVxcbik7XFxudmVjMiBpbnZNZXJjYXRvciA9IHZlYzIoc2NhbGVkUG9zLngsIDIuMCAqIGF0YW4oZXhwKHNjYWxlZFBvcy55KSkgLSAwLjUgKiBQSSk7XFxuZmxvYXQgbWl4UGFyYW0gPSAtIGNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xcbnJlcyA9IChpbnZNb2xsd2VpZGUgKiBtaXhQYXJhbSArIGludk1lcmNhdG9yICogKDEuMCAtIG1peFBhcmFtKSkgKiA4LjA7XFxuJ1xuICAgIH0sXG4gICAgZGlwb2xlOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnRGlwb2xlIEZvcm1hdGlvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMzAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogJ2Zsb2F0IGRpc3QgPSBzaW4odGltZSAqIDIuMCAqIFBJICsgUEkgLyAyLjApICogMi4wICsgMi41O1xcbnJlcyA9IDUwLjAgLyAoMi4wICogZGlzdCkgKiAoXFxuICAgIGNvbXBsZXhMb2coY1BvcyAtIHZlYzIoZGlzdCwgMC4wKSkgLVxcbiAgICBjb21wbGV4TG9nKGNQb3MgLSB2ZWMyKC1kaXN0LCAwLjApKVxcbik7XFxuJ1xuICAgIH0sXG4gICAgYXR0cmFjdFJlcGVsOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnQXR0cmFjdGlvbiB0byBSZXB1bHNpb24nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOiAncmVzID0gMTAuMCAqIChcXG4gICAgY29tcGxleExvZyhjUG9zIC0gdmVjMigxLjAsIDAuMCkpICtcXG4gICAgc2luKHRpbWUgKiAyLjAgKiBQSSAtIFBJIC8gMi4wKSAqIGNvbXBsZXhMb2coY1BvcyAtIHZlYzIoLTEuMCwgMC4wKSlcXG4pO1xcbidcbiAgICB9LFxuICAgIG5ldXJhbG5ldHdvcms6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdOZXVyYWwgTmV0d29yaycsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMjAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpLFxuICAgICAgICBkcmF3RnVuYzogJ2Zsb2F0IG1peFBhcmFtID0gLWNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xcbnZlYzIgdW5zaWdtb2lkID0gLWxvZygxLjAgLyAoKGNQb3MgKyB2ZWMyKDMuMywgMy4wKSkgLyA2LjMpIC0gMS4wKTtcXG5yZXMgPSAodmVjMihcXG4gICAgdW5zaWdtb2lkLnggKiAyLjAgKyB1bnNpZ21vaWQueSAqIDEuMCxcXG4gICAgdW5zaWdtb2lkLnggKiAyLjAgKyB1bnNpZ21vaWQueSAqIDMuMFxcbikgLSB2ZWMyKDEuMCwgLTIuMCkpICogbWl4UGFyYW0gKyBjUG9zICogKDEuMCAtIG1peFBhcmFtKTtcXG4nXG4gICAgfSxcbiAgICBnYWxheHk6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdHYWxheHkgV2FycCcsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMjAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpLFxuICAgICAgICBkcmF3RnVuYzogJ2Zsb2F0IG1peFBhcmFtID0gLWNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xcbnZlYzIgcG9sUG9zID0gdmVjMihsZW5ndGgoY1BvcyksIGF0YW4oY1Bvcy55LCBjUG9zLngpKTtcXG5wb2xQb3MgPSB2ZWMyKHBvbFBvcy54LCBwb2xQb3MueSAtIG1peFBhcmFtIC8gNTAuMCAqIHNxcnQoMS4wIC8gcG93KHBvbFBvcy54IC8gNDAuMCwgMy4wKSkpO1xcbnJlcyA9IHZlYzIocG9sUG9zLnggKiBjb3MocG9sUG9zLnkpLCBwb2xQb3MueCAqIHNpbihwb2xQb3MueSkpO1xcbidcbiAgICB9LFxuICAgIHNpbXBsZXg6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdTaW1wbGV4IFdhcnAnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnNub2lzZSxcbiAgICAgICAgZHJhd0Z1bmM6ICd2ZWMyIGNpcmNsZVZhcnkgPSAyLjAgKiB2ZWMyKFxcbiAgICBjb3ModGltZSAqIDIuMCAqIFBJKSxcXG4gICAgc2luKHRpbWUgKiAyLjAgKiBQSSlcXG4pO1xcbnJlcyA9IDIuMCAqIChjUG9zICtcXG4wLjUgKiB2ZWMyKFxcbiAgICBzbm9pc2UodmVjNChjUG9zICogMC4yNSwgY2lyY2xlVmFyeSArIHZlYzIoMTAwLjAsIDEwMC4wKSkpLFxcbiAgICBzbm9pc2UodmVjNChjUG9zICogMC4yNSwgY2lyY2xlVmFyeSArIHZlYzIoMjAwLjAsIDIwMC4wKSkpXFxuKSk7XFxuJ1xuICAgIH0sXG4gICAgZXhwb25lbnRpYXRpb246IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IEV4cG9uZW50aWF0aW9uJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAzMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOiAndmVjMiBjYXJ0UmVzID0gMTAuMCAqIGNvbXBsZXhQb3coY1BvcywgdmVjMigxLjAgLyAoMi41IC0gMS41ICogY29zKHRpbWUgKiAyLjAgKiBQSSkpLCAwLjApKTtcXG5yZXMgPSB2ZWMyKGxlbmd0aChjYXJ0UmVzKSwgMTAuMCAqIGF0YW4oY2FydFJlcy55LCBjYXJ0UmVzLngpKTtcXG4nXG4gICAgfSxcbiAgICBtb2JpdXM6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdNb2JpdXMgVHJhbnNmb3JtYXRpb24nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuICAgICAgICBkcmF3RnVuYzogJ3JlcyA9IHJvdGF0ZVdpdGhUaW1lKDEwLjAgKiBjb21wbGV4RGl2KFxcbiAgICBjb21wbGV4TXVsdCh2ZWMyKDAuNSwgMy4wKSwgY1BvcykgKyB2ZWMyKDAuNSwgMS41KSxcXG4gICAgY29tcGxleE11bHQodmVjMig0LjAsIDEuNSksIGNQb3MpICsgdmVjMigyLjAsIDMuNSlcXG4pKTtcXG4nXG4gICAgfSxcbiAgICAvLyAgICBsb2c6IHtcbiAgICAvLyAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IExvZ2FyaXRobScsXG4gICAgLy8gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgLy8gICAgICAgIG51bUZyYW1lczogMTAwMCxcbiAgICAvLyAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYiArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgLy8gICAgICAgIGRyYXdGdW5jOiBcbiAgICAvL2ByZXMgPSByb3RhdGVXaXRoVGltZSgxMC4wICogY29tcGxleExvZyhjUG9zKSk7XG4gICAgLy9gXG4gICAgLy8gICAgfSxcbiAgICAvLyAgICBzaW46IHtcbiAgICAvLyAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IFNpbmUnLFxuICAgIC8vICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgIC8vICAgICAgICBudW1GcmFtZXM6IDMwMCxcbiAgICAvLyAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbiAgICAvLyAgICAgICAgZHJhd0Z1bmM6IFxuICAgIC8vYHZlYzIgZXhwb25lbnQgPSB2ZWMyKC1jUG9zLnksIGNQb3MueCk7XG4gICAgLy9yZXMgPSByb3RhdGVXaXRoVGltZShjb21wbGV4RGl2KFxuICAgIC8vICAgIGNvbXBsZXhFeHAoZXhwb25lbnQpIC0gY29tcGxleEV4cCgtZXhwb25lbnQpLFxuICAgIC8vICAgIHZlYzIoMC4wLCAyLjApXG4gICAgLy8pKTtcbiAgICAvL2BcbiAgICAvLyAgICB9LFxuICAgIGFyY3Npbjoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggSW52ZXJzZSBTaW5lJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAyMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLmNvbXBsZXhMaWIsXG4gICAgICAgIGRyYXdGdW5jOiAndmVjMiBpbnZTaW4gPSAtIDEwLjAgKiBjb21wbGV4TXVsdChjb21wbGV4TG9nKGNvbXBsZXhQb3codmVjMigxLjAsIDAuMCkgLSBjb21wbGV4UG93KGNQb3MsIHZlYzIoMi4wLCAwLjApKSwgdmVjMigwLjUsIDAuMCkpICsgY29tcGxleE11bHQoY1BvcywgdmVjMigwLjAsIDEuMCkpKSwgdmVjMigwLjAsIDEuMCkpO1xcbmZsb2F0IG1peFBhcmFtID0gLSBjb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcXG5yZXMgPSBpbnZTaW4gKiBtaXhQYXJhbSArIGNQb3MgKiAoMS4wIC0gbWl4UGFyYW0pO1xcbidcbiAgICB9LFxuICAgIGdhbW1hOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnR2FtbWEgRnVuY3Rpb24nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDQwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYiArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuZ2FtbWEgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuICAgICAgICBkcmF3RnVuYzogJ3JlcyA9IHJvdGF0ZVdpdGhUaW1lKDEwLjAgKiBnYW1tYSgoY1BvcyArIHZlYzIoMi4wLCAwLjApKSAvIDIuMCkpO1xcbidcbiAgICB9LFxuICAgIG1hZG5lc3M6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4ID8/PycsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogODAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogJ3ZlYzIgbWFkbmVzcyA9IC0gMTAuMCAqIGNvbXBsZXhNdWx0KGNvbXBsZXhMb2coY29tcGxleFBvdyh2ZWMyKDIuMCwgMy4wKSAtIGNvbXBsZXhQb3coY1BvcyAqIDIuMCwgdmVjMigyLjAsIDEuMCkpLCB2ZWMyKDAuNSwgMS4wKSkgKyBjb21wbGV4TXVsdChjUG9zICogMi4wLCB2ZWMyKDIuMCwgMS4wKSkpLCB2ZWMyKDIuMCwgMS4wKSk7XFxuZmxvYXQgbWl4UGFyYW0gPSAtIGNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xcbnJlcyA9IG1hZG5lc3MgKiBtaXhQYXJhbSArIGNQb3MgKiAoMS4wIC0gbWl4UGFyYW0pO1xcbidcbiAgICB9XG59O1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBDYW52YXNEaXNwbGF5UGFuZSA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKENhbnZhc0Rpc3BsYXlQYW5lLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIENhbnZhc0Rpc3BsYXlQYW5lKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FudmFzRGlzcGxheVBhbmUpO1xuXG4gICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2FudmFzRGlzcGxheVBhbmUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDYW52YXNEaXNwbGF5UGFuZSkpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhDYW52YXNEaXNwbGF5UGFuZSwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICAgICBpZiAoJ29uTW91bnRDYWxsYmFjaycgaW4gdGhpcy5wcm9wcykge1xuICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uTW91bnRDYWxsYmFjayhjYW52YXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjb21wb25lbnRXaWxsVW5tb3VudCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgICAgIGlmICgnb25EaXNtb3VudENhbGxiYWNrJyBpbiB0aGlzLnByb3BzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkRpc21vdW50Q2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCdjYW52YXMnLCB7IHdpZHRoOiB0aGlzLnByb3BzLmRpbXMud2lkdGgsIGhlaWdodDogdGhpcy5wcm9wcy5kaW1zLmhlaWdodCwgc3R5bGU6IHsgd2lkdGg6ICcxMDAlJyB9IH0pO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENhbnZhc0Rpc3BsYXlQYW5lO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG47XG5DYW52YXNEaXNwbGF5UGFuZS5wcm9wVHlwZXMgPSB7XG4gICAgZGltczogUmVhY3QuUHJvcFR5cGVzLmluc3RhbmNlT2YoRGltZW5zaW9ucykuaXNSZXF1aXJlZCxcbiAgICBvbk1vdW50Q2FsbGJhY2s6IFJlYWN0LlByb3BUeXBlcy5mdW5jXG59O1xuXG52YXIgRHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b24gPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudDIpIHtcbiAgICBfaW5oZXJpdHMoRHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b24sIF9SZWFjdCRDb21wb25lbnQyKTtcblxuICAgIGZ1bmN0aW9uIERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b24pO1xuXG4gICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRHJhd0Z1bmN0aW9uU2VsZWN0b3JCdXR0b24uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbiwgW3tcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdsaXN0LWdyb3VwLWl0ZW0nICsgKHRoaXMucHJvcHMuc2VsZWN0ZWQgPyAnIGFjdGl2ZScgOiAnJyksIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMucHJvcHMub25DbGljayhfdGhpczMucHJvcHMuZnVuY05hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5kaXNwbGF5TmFtZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbjtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuO1xuXG52YXIgRHJhd0Z1bmN0aW9uU2VsZWN0b3IgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudDMpIHtcbiAgICBfaW5oZXJpdHMoRHJhd0Z1bmN0aW9uU2VsZWN0b3IsIF9SZWFjdCRDb21wb25lbnQzKTtcblxuICAgIGZ1bmN0aW9uIERyYXdGdW5jdGlvblNlbGVjdG9yKHByb3BzKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEcmF3RnVuY3Rpb25TZWxlY3Rvcik7XG5cbiAgICAgICAgdmFyIF90aGlzNCA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChEcmF3RnVuY3Rpb25TZWxlY3Rvci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKERyYXdGdW5jdGlvblNlbGVjdG9yKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzNC5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNlbGVjdGVkRnVuYzogRHJhd0Z1bmN0aW9uU2VsZWN0b3IuREVGQVVMVF9GVU5DXG4gICAgICAgIH07XG4gICAgICAgIF90aGlzNC5oYW5kbGVDbGljayA9IF90aGlzNC5oYW5kbGVDbGljay5iaW5kKF90aGlzNCk7XG4gICAgICAgIHJldHVybiBfdGhpczQ7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKERyYXdGdW5jdGlvblNlbGVjdG9yLCBbe1xuICAgICAgICBrZXk6ICdyZW5kZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnbGlzdC1ncm91cCcgfSxcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhEZW1vRnVuY3Rpb25zLmZ1bmN0aW9ucykubWFwKGZ1bmN0aW9uIChmdW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uLCB7IGRpc3BsYXlOYW1lOiBEZW1vRnVuY3Rpb25zLmZ1bmN0aW9uc1tmdW5jXS5kaXNwbGF5TmFtZSwga2V5OiBmdW5jLCBmdW5jTmFtZTogZnVuYywgc2VsZWN0ZWQ6IGZ1bmMgPT0gX3RoaXM1LnN0YXRlLnNlbGVjdGVkRnVuYywgb25DbGljazogX3RoaXM1LmhhbmRsZUNsaWNrIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGljayhmdW5jTmFtZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRGdW5jOiBmdW5jTmFtZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uU2VsZWN0KGZ1bmNOYW1lKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBEcmF3RnVuY3Rpb25TZWxlY3Rvcjtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuO1xuRHJhd0Z1bmN0aW9uU2VsZWN0b3IuREVGQVVMVF9GVU5DID0gJ2F0dHJhY3RSZXBlbCc7XG5cbnZhciBBY2VFZGl0b3IgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudDQpIHtcbiAgICBfaW5oZXJpdHMoQWNlRWRpdG9yLCBfUmVhY3QkQ29tcG9uZW50NCk7XG5cbiAgICBmdW5jdGlvbiBBY2VFZGl0b3IoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBY2VFZGl0b3IpO1xuXG4gICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQWNlRWRpdG9yLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQWNlRWRpdG9yKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEFjZUVkaXRvciwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICAgICB2YXIgZWRpdG9yRGl2ID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmVkaXRvciA9IGFjZS5lZGl0KGVkaXRvckRpdik7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5zZXRUaGVtZSgnYWNlL3RoZW1lL21vbm9rYWknKTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5zZXRVc2VXb3JrZXIoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLnNldE1vZGUoJ2FjZS9tb2RlL2dsc2wnKTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLiRibG9ja1Njcm9sbGluZyA9IEluZmluaXR5O1xuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc2V0Rm9udFNpemUoMTgpO1xuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc2V0T3B0aW9ucyh7XG4gICAgICAgICAgICAgICAgbWF4TGluZXM6IEluZmluaXR5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5zZXRVc2VXcmFwTW9kZSh0cnVlKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3NldFZhbHVlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKG5ld0NvbnRlbnRzKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5zZXRWYWx1ZShuZXdDb250ZW50cyk7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRWYWx1ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuZ2V0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IHN0eWxlOiB7IGhlaWdodDogdGhpcy5wcm9wcy5oZWlnaHQudG9TdHJpbmcoKSArICdweCcgfSB9KTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBBY2VFZGl0b3I7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbjtcblxudmFyIENvbnRvdXJlckFwcCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50NSkge1xuICAgIF9pbmhlcml0cyhDb250b3VyZXJBcHAsIF9SZWFjdCRDb21wb25lbnQ1KTtcblxuICAgIGZ1bmN0aW9uIENvbnRvdXJlckFwcChwcm9wcykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udG91cmVyQXBwKTtcblxuICAgICAgICB2YXIgX3RoaXM3ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENvbnRvdXJlckFwcC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvbnRvdXJlckFwcCkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpczcuYW5pbWF0aW9uTWFuYWdlciA9IG5ldyBDb250b3VyZXJBbmltYXRpb25NYW5hZ2VyKF90aGlzNy5wcm9wcy5tYW5hZ2VyKTtcbiAgICAgICAgX3RoaXM3LnN0YXRlID0ge1xuICAgICAgICAgICAgaXNBbmltYXRlZDogZmFsc2UsXG4gICAgICAgICAgICBpc0FuaW1hdGluZzogZmFsc2UsXG4gICAgICAgICAgICBjdXJyZW50RnJhbWU6IDAsXG4gICAgICAgICAgICBudW1GcmFtZXM6IDAsXG4gICAgICAgICAgICBpc0FuaW1hdGVkU2VsZWN0U3RhdGU6IGZhbHNlLFxuICAgICAgICAgICAgbnVtRnJhbWVzSW5wdXRWYWw6ICcwJyxcbiAgICAgICAgICAgIHNoYWRlckNvbXBpbGVFcnJvcjogJydcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXM3LnVzZUNhbnZhcyA9IF90aGlzNy51c2VDYW52YXMuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcuc2V0RHJhd0Z1bmMgPSBfdGhpczcuc2V0RHJhd0Z1bmMuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcub25EcmF3RnVuY1NlbGVjdCA9IF90aGlzNy5vbkRyYXdGdW5jU2VsZWN0LmJpbmQoX3RoaXM3KTtcbiAgICAgICAgX3RoaXM3LnJlZHJhdyA9IF90aGlzNy5yZWRyYXcuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcuY2hhbmdlWm9vbUFuZFJlZHJhdyA9IF90aGlzNy5jaGFuZ2Vab29tQW5kUmVkcmF3LmJpbmQoX3RoaXM3KTtcbiAgICAgICAgX3RoaXM3LmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3ID0gX3RoaXM3LmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3LmJpbmQoX3RoaXM3KTtcbiAgICAgICAgX3RoaXM3LnRyYW5zbGF0ZUFuZFJlZHJhdyA9IF90aGlzNy50cmFuc2xhdGVBbmRSZWRyYXcuYmluZChfdGhpczcpO1xuICAgICAgICBfdGhpczcuaGFuZGxlUGxvdENsaWNrID0gX3RoaXM3LmhhbmRsZVBsb3RDbGljay5iaW5kKF90aGlzNyk7XG4gICAgICAgIHJldHVybiBfdGhpczc7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKENvbnRvdXJlckFwcCwgW3tcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICAgICB0aGlzLm9uRHJhd0Z1bmNTZWxlY3QoRHJhd0Z1bmN0aW9uU2VsZWN0b3IuREVGQVVMVF9GVU5DKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgQ0FOVkFTX0RJTVMgPSBuZXcgRGltZW5zaW9ucyg2NDAsIDQ4MCk7XG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBfZGVmaW5lUHJvcGVydHkoeyBjbGFzc05hbWU6ICdjb250YWluZXInIH0sICdjbGFzc05hbWUnLCAnY29sLWxnLTEyJyksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncGFnZS1oZWFkZXInIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250b3VyZXInXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3dlbGwnIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRHJhZydcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIHRvIG1vdmUgdGhlIGdyYXBoLCAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2Nyb2xsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgdG8gem9vbSwgYW5kICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDdHJsICsgc2Nyb2xsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICcgdG8gY2hhbmdlIHRoZSBjb250b3VyIGRlbnNpdHkuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbCksXG4gICAgICAgICAgICAgICAgICAgICAgICAnT3IsIGlmIHlvdVxcJ3JlIG9uIG1vYmlsZSwgdXNlIHRoZSAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9ucydcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnLidcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAnTW9kaWZ5ICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBocmVmOiAnIycsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgubnVtRnJhbWVzSW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRnJhbWVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIChudW1iZXIgb2YgZnJhbWVzKSwgdGhlbiBjbGljayAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUGxvdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIHRvIGNoYW5nZSB0aGUgYW5pbWF0aW9uIHNwZWVkLicsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdicicsIG51bGwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ09yIHVzZSB0aGUgJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NsaWRlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIHRvIGV4cGxvcmUgdGhlIGFuaW1hdGlvbiBpbiBtb3JlIGRldGFpbC4nXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1Bsb3QgeW91ciBvd24gZnVuY3Rpb25zIHdpdGggdGhlICcsXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjb2RlIGVkaXRvcnMnXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyBiZWxvdy4nXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0p1c3QgZW5qb3kgdGhlIHByZXR0eSBhbmltYXRpb25zLCBvciAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaHJlZjogJ2h0dHBzOi8vZ2l0aHViLmNvbS9rcmF3dGhla3Jvdy9jb250b3VyZXInIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbGljayBoZXJlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAnIHRvIGxlYXJuIG1vcmUuJ1xuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ05vdGU6IFRoaXMgYXBwIHVzZXMgV2ViR0wsIHNvIGl0IG5lZWRzIGEgc3VmZmljaWVudGx5IG1vZGVybiBicm93c2VyIGFuZCBHUFUgdG8gd29yay4nXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wtc20tMycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJhd0Z1bmN0aW9uU2VsZWN0b3IsIHsgb25TZWxlY3Q6IHRoaXMub25EcmF3RnVuY1NlbGVjdCB9KVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NvbC1zbS05JyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wteHMtOCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyByb2xlOiAndG9vbGJhcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdidG4tZ3JvdXAnLCByb2xlOiAnZ3JvdXAnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5jaGFuZ2Vab29tQW5kUmVkcmF3KDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLXpvb20taW4nIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0Jywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmNoYW5nZVpvb21BbmRSZWRyYXcoLTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLXpvb20tb3V0JyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5jaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdygtMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tcGx1cycgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tbWludXMnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0Jywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnRyYW5zbGF0ZUFuZFJlZHJhdyhuZXcgVmVjdG9yKDEsIDApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy1sZWZ0JyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogJ2J0biBidG4tZGVmYXVsdCcsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC50cmFuc2xhdGVBbmRSZWRyYXcobmV3IFZlY3RvcigwLCAxKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tYXJyb3ctdXAnIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1kZWZhdWx0Jywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnRyYW5zbGF0ZUFuZFJlZHJhdyhuZXcgVmVjdG9yKDAsIC0xKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tYXJyb3ctZG93bicgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6ICdidG4gYnRuLWRlZmF1bHQnLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgudHJhbnNsYXRlQW5kUmVkcmF3KG5ldyBWZWN0b3IoLTEsIDApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnc3BhbicsIHsgY2xhc3NOYW1lOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy1yaWdodCcgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnN0YXRlLmlzQW5pbWF0ZWQgfHwgIXRoaXMuc3RhdGUuaXNBbmltYXRpbmcgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiBjbGFzc05hbWVzKCdidG4nLCAnYnRuLWRlZmF1bHQnLCB7IGRpc2FibGVkOiAhdGhpcy5zdGF0ZS5pc0FuaW1hdGVkIH0pLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM4LnN0YXRlLmlzQW5pbWF0ZWQgJiYgIV90aGlzOC5zdGF0ZS5pc0FuaW1hdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguYW5pbWF0aW9uTWFuYWdlci5zdGFydChfdGhpczguc3RhdGUuY3VycmVudEZyYW1lLCBmdW5jdGlvbiAoY3VycmVudEZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogY3VycmVudEZyYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FuaW1hdGluZzogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7IGNsYXNzTmFtZTogJ2dseXBoaWNvbiBnbHlwaGljb24tcGxheScgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ2J1dHRvbicsIGNsYXNzTmFtZTogY2xhc3NOYW1lcygnYnRuJywgJ2J0bi1kZWZhdWx0JywgeyBkaXNhYmxlZDogIXRoaXMuc3RhdGUuaXNBbmltYXRlZCB9KSwgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzOC5zdGF0ZS5pc0FuaW1hdGVkICYmIF90aGlzOC5zdGF0ZS5pc0FuaW1hdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguYW5pbWF0aW9uTWFuYWdlci5zdG9wKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdzcGFuJywgeyBjbGFzc05hbWU6ICdnbHlwaGljb24gZ2x5cGhpY29uLXBhdXNlJyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXhzLTQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNBbmltYXRlZCA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgeyB0eXBlOiAncmFuZ2UnLCBtaW46ICcwJywgbWF4OiAodGhpcy5zdGF0ZS5udW1GcmFtZXMgLSAxKS50b1N0cmluZygpLCB2YWx1ZTogdGhpcy5zdGF0ZS5jdXJyZW50RnJhbWUsIHN0eWxlOiB7IG1hcmdpblRvcDogJzVweCcgfSwgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RnJhbWU6IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczguc3RhdGUuaXNBbmltYXRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmFuaW1hdGlvbk1hbmFnZXIuc3RvcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQW5pbWF0aW5nOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnMoX3RoaXM4LnN0YXRlLmN1cnJlbnRGcmFtZSAvIF90aGlzOC5zdGF0ZS5udW1GcmFtZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnMoX3RoaXM4LnN0YXRlLmN1cnJlbnRGcmFtZSAvIF90aGlzOC5zdGF0ZS5udW1GcmFtZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSkgOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogeyBtYXJnaW5Ub3A6ICcxMHB4JyB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDYW52YXNEaXNwbGF5UGFuZSwgeyBkaW1zOiBDQU5WQVNfRElNUywgb25Nb3VudENhbGxiYWNrOiBmdW5jdGlvbiBvbk1vdW50Q2FsbGJhY2soY2FudmFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgudXNlQ2FudmFzKGNhbnZhcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG9uRGlzbW91bnRDYWxsYmFjazogZnVuY3Rpb24gb25EaXNtb3VudENhbGxiYWNrKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnByb3BzLm1hbmFnZXIuZGVzdHJveUNvbnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTEyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1Bsb3QgRnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3JvdycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wteHMtOScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdmb3JtLWlubGluZScgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdidG4tZ3JvdXAnLCBzdHlsZTogeyBtYXJnaW5SaWdodDogJzEwcHgnIH0sIHJvbGU6ICdncm91cCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiBjbGFzc05hbWVzKCdidG4nLCB0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSA/ICdidG4tZGVmYXVsdCcgOiAnYnRuLXByaW1hcnknLCB7ICdhY3RpdmUnOiAhdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUgfSksIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5zZXRTdGF0ZSh7IGlzQW5pbWF0ZWRTZWxlY3RTdGF0ZTogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdHcmFwaCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdidXR0b24nLCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2J0bicsIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlID8gJ2J0bi1wcmltYXJ5JyA6ICdidG4tZGVmYXVsdCcsIHsgJ2FjdGl2ZSc6IHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlIH0pLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczguc2V0U3RhdGUoeyBpc0FuaW1hdGVkU2VsZWN0U3RhdGU6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBbmltYXRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2Zvcm0tZ3JvdXAnLCB7ICdoYXMtZXJyb3InOiB0aGlzLmlzTnVtRnJhbWVzSW5wdXRJbnZhbGlkKCkgfSksIHN0eWxlOiB7IGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLCBtYXJnaW5Cb3R0b206IDAsIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdpbnB1dC1ncm91cCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnaW5wdXQtZ3JvdXAtYWRkb24nIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRnJhbWVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHsgdHlwZTogJ3RleHQnLCBjbGFzc05hbWU6ICdmb3JtLWNvbnRyb2wnLCB2YWx1ZTogdGhpcy5zdGF0ZS5udW1GcmFtZXNJbnB1dFZhbCwgZGlzYWJsZWQ6ICF0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSwgcmVmOiBmdW5jdGlvbiByZWYoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgubnVtRnJhbWVzSW5wdXQgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnNldFN0YXRlKHsgbnVtRnJhbWVzSW5wdXRWYWw6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgc3R5bGU6IHsgd2lkdGg6ICc2MHB4JyB9IH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdoZWxwLWJsb2NrJywgc3R5bGU6IHsgZGlzcGxheTogdGhpcy5pc051bUZyYW1lc0lucHV0SW52YWxpZCgpID8gJ2lubGluZS1ibG9jaycgOiAnbm9uZScsIG1hcmdpbkxlZnQ6ICcxMHB4JyB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdNdXN0IGJlIGFuIGludGVnZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdjb2wteHMtMycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdidXR0b24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnYnV0dG9uJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi1zdWNjZXNzIGJ0bi1ibG9jayBwdWxsLXJpZ2h0Jywgc3R5bGU6IHsgd2lkdGg6ICc4MHB4JyB9LCBkaXNhYmxlZDogdGhpcy5pc051bUZyYW1lc0lucHV0SW52YWxpZCgpLCByZWY6IGZ1bmN0aW9uIHJlZihidXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnBsb3RCdXR0b24gPSBidXR0b247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgb25DbGljazogdGhpcy5oYW5kbGVQbG90Q2xpY2sgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdQbG90J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2hhZGVyQ29tcGlsZUVycm9yID09ICcnID8gbnVsbCA6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdoYXMtZXJyb3InIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnaGVscC1ibG9jaycgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnWW91ciBjb2RlIGZhaWxlZCB0byBjb21waWxlIHdpdGggdGhlIGZvbGxvd2luZyBlcnJvcjonXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaGFkZXJDb21waWxlRXJyb3IudHJpbSgpLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24gKGxpbmUsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBrZXk6IGluZGV4IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2JyJywgbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaGFkZXJDb21waWxlRXJyb3IuaW5kZXhPZignd3Jvbmcgb3BlcmFuZCB0eXBlcycpICE9IC0xID8gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdOb3RlIHRoYXQgR0xTTCBFUyBkb2VzIG5vdCBpbXBsaWNpdGx5IGNhc3QgaW50cyB0byBmbG9hdHMuIFdyaXRlIG51bWJlcnMgbGlrZSBcIjIzXCIgYXMgXCIyMy4wXCIuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaGFkZXJDb21waWxlRXJyb3IuaW5kZXhPZignZ2xfRnJhZ0RhdGEnKSAhPSAtMSA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRGlkIHlvdSBmb3JnZXQgYSBzZW1pY29sb24gb24gdGhlIGxhc3QgbGluZT8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdWaWV3IHRoZSBjb25zb2xlIHRvIHNlZSB0aGUgZnVsbCBnZW5lcmF0ZWQgV2ViR0wgc2hhZGVyIGNvZGUuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogeyBtYXJnaW5Ub3A6ICcxMHB4JyB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChBY2VFZGl0b3IsIHsgaGVpZ2h0OiAnMjAwJywga2V5OiAnZHJhd0Z1bmNFZGl0b3InLCByZWY6IGZ1bmN0aW9uIHJlZihlZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOC5kcmF3RnVuY0VkaXRvciA9IGVkaXRvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdyb3cnIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY29sLXNtLTEyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0xpYnJhcnkgRnVuY3Rpb25zJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogeyBtYXJnaW5Cb3R0b206ICcxMHB4JyB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChBY2VFZGl0b3IsIHsgaGVpZ2h0OiAnMjAwJywga2V5OiAnaW5jbHVkZVNyY0VkaXRvcicsIHJlZjogZnVuY3Rpb24gcmVmKGVkaXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LmluY2x1ZGVTcmNFZGl0b3IgPSBlZGl0b3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VzZUNhbnZhcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1c2VDYW52YXMoY2FudmFzKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGRyYWdNYW5hZ2VyID0gbmV3IERyYWdNYW5hZ2VyKGNhbnZhcywgZnVuY3Rpb24gKGRyYWdWZWMpIHtcbiAgICAgICAgICAgICAgICBfdGhpczkucHJvcHMubWFuYWdlci52aWV3cG9ydC50cmFuc2xhdGUoZHJhZ1ZlYyk7XG4gICAgICAgICAgICAgICAgX3RoaXM5LnJlZHJhdygpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2LmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM5LmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3KGdldFNjcm9sbERpcihldikpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzOS5wcm9wcy5tYW5hZ2VyLmNoYW5nZVpvb20oLWdldFNjcm9sbERpcihldiksIGdldENhbnZhc01vdXNlUG9zKGNhbnZhcywgZXYpKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM5LnJlZHJhdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci51c2VDYW52YXMoY2FudmFzKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaXNOdW1GcmFtZXNJbnB1dEludmFsaWQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNOdW1GcmFtZXNJbnB1dEludmFsaWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUgJiYgdGhpcy5zdGF0ZS5udW1GcmFtZXNJbnB1dFZhbC5zcGxpdCgnJykuc29tZShmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjLmNoYXJDb2RlQXQoKSA8ICcwJy5jaGFyQ29kZUF0KCkgfHwgYy5jaGFyQ29kZUF0KCkgPiAnOScuY2hhckNvZGVBdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVBsb3RDbGljaycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVQbG90Q2xpY2soZSkge1xuICAgICAgICAgICAgdGhpcy5zZXREcmF3RnVuYyh0aGlzLmRyYXdGdW5jRWRpdG9yLmdldFZhbHVlKCksIHRoaXMuaW5jbHVkZVNyY0VkaXRvci5nZXRWYWx1ZSgpLCB0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSwgdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUgPyBwYXJzZUludCh0aGlzLnN0YXRlLm51bUZyYW1lc0lucHV0VmFsKSA6IDApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZWRyYXcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVkcmF3KCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNBbmltYXRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnModGhpcy5zdGF0ZS5jdXJyZW50RnJhbWUgLyB0aGlzLnN0YXRlLm51bUZyYW1lcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY2hhbmdlWm9vbUFuZFJlZHJhdycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFuZ2Vab29tQW5kUmVkcmF3KGNoYW5nZUFtb3VudCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmNoYW5nZVpvb20oY2hhbmdlQW1vdW50KTtcbiAgICAgICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3KGNoYW5nZUFtb3VudCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmNoYW5nZUNvbnRvdXJTcGFjaW5nKGNoYW5nZUFtb3VudCk7XG4gICAgICAgICAgICB0aGlzLnJlZHJhdygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0cmFuc2xhdGVBbmRSZWRyYXcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdHJhbnNsYXRlQW5kUmVkcmF3KHRyYW5zbGF0ZUFtb3VudCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLnRyYW5zbGF0ZSh0cmFuc2xhdGVBbW91bnQubXVsdGlwbHkoNTAuMCkpO1xuICAgICAgICAgICAgdGhpcy5yZWRyYXcoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0RHJhd0Z1bmMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RHJhd0Z1bmMoZHJhd0Z1bmMsIGluY2x1ZGVTcmMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczEwID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGlzQW5pbWF0ZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlO1xuICAgICAgICAgICAgdmFyIG51bUZyYW1lcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogMDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuY2hhbmdlRHJhd0Z1bmMoZHJhd0Z1bmMsIGluY2x1ZGVTcmMsIGlzQW5pbWF0ZWQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlckNvbXBpbGVFcnJvcjogZXJyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNBbmltYXRlZCAmJiBudW1GcmFtZXMgPT0gMCkge1xuICAgICAgICAgICAgICAgIG51bUZyYW1lcyA9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGlzQW5pbWF0ZWQ6IGlzQW5pbWF0ZWQsXG4gICAgICAgICAgICAgICAgaXNBbmltYXRpbmc6IGlzQW5pbWF0ZWQsXG4gICAgICAgICAgICAgICAgY3VycmVudEZyYW1lOiAwLFxuICAgICAgICAgICAgICAgIG51bUZyYW1lczogbnVtRnJhbWVzLFxuICAgICAgICAgICAgICAgIGlzQW5pbWF0ZWRTZWxlY3RTdGF0ZTogaXNBbmltYXRlZCxcbiAgICAgICAgICAgICAgICBudW1GcmFtZXNJbnB1dFZhbDogbnVtRnJhbWVzLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgc2hhZGVyQ29tcGlsZUVycm9yOiAnJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXIubnVtRnJhbWVzID0gbnVtRnJhbWVzO1xuICAgICAgICAgICAgaWYgKGlzQW5pbWF0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXIuc3RvcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMTAuYW5pbWF0aW9uTWFuYWdlci5zdGFydCgwLCBmdW5jdGlvbiAoY3VycmVudEZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEwLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RnJhbWU6IGN1cnJlbnRGcmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXIuc3RvcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMTAucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnMoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnb25EcmF3RnVuY1NlbGVjdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkRyYXdGdW5jU2VsZWN0KGZ1bmMpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEZ1bmMgPSBEZW1vRnVuY3Rpb25zLmZ1bmN0aW9uc1tmdW5jXTtcbiAgICAgICAgICAgIHRoaXMuZHJhd0Z1bmNFZGl0b3Iuc2V0VmFsdWUoc2VsZWN0ZWRGdW5jLmRyYXdGdW5jLnRyaW0oKSk7XG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVTcmNFZGl0b3Iuc2V0VmFsdWUoc2VsZWN0ZWRGdW5jLmluY2x1ZGVTcmMudHJpbSgpKTtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEZ1bmMuaXNBbmltYXRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RHJhd0Z1bmMoc2VsZWN0ZWRGdW5jLmRyYXdGdW5jLCBzZWxlY3RlZEZ1bmMuaW5jbHVkZVNyYywgc2VsZWN0ZWRGdW5jLmlzQW5pbWF0ZWQsIHNlbGVjdGVkRnVuYy5udW1GcmFtZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldERyYXdGdW5jKHNlbGVjdGVkRnVuYy5kcmF3RnVuYywgc2VsZWN0ZWRGdW5jLmluY2x1ZGVTcmMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENvbnRvdXJlckFwcDtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuO1xuXG5mdW5jdGlvbiBpbml0UmVuZGVyKG1hbmFnZXIpIHtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZGV4Q29udGFpbmVyJyk7XG4gICAgUmVhY3RET00ucmVuZGVyKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29udG91cmVyQXBwLCB7IG1hbmFnZXI6IG1hbmFnZXIgfSksIGNvbnRhaW5lcik7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dpdGh1Yi1yaWJib24nKS5pbm5lckhUTUwgPSAnPGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9rcmF3dGhla3Jvdy9jb250b3VyZXJcIj48aW1nIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IHJpZ2h0OiAwOyBib3JkZXI6IDA7XCIgc3JjPVwiaHR0cHM6Ly9jYW1vLmdpdGh1YnVzZXJjb250ZW50LmNvbS8zNjU5ODZhMTMyY2NkNmE0NGMyM2E5MTY5MDIyYzBiNWM4OTBjMzg3LzY4NzQ3NDcwNzMzYTJmMmY3MzMzMmU2MTZkNjE3YTZmNmU2MTc3NzMyZTYzNmY2ZDJmNjc2OTc0Njg3NTYyMmY3MjY5NjI2MjZmNmU3MzJmNjY2ZjcyNmI2ZDY1NWY3MjY5Njc2ODc0NWY3MjY1NjQ1ZjYxNjEzMDMwMzAzMDJlNzA2ZTY3XCIgYWx0PVwiRm9yayBtZSBvbiBHaXRIdWJcIiBkYXRhLWNhbm9uaWNhbC1zcmM9XCJodHRwczovL3MzLmFtYXpvbmF3cy5jb20vZ2l0aHViL3JpYmJvbnMvZm9ya21lX3JpZ2h0X3JlZF9hYTAwMDAucG5nXCI+PC9hPic7XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBnZXRDYW52YXNNb3VzZVBvcyhjYW52YXMsIGV2KXtcbiAgICBjb25zdCBib3VuZGluZ1JlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IoXG4gICAgICAgIChldi5jbGllbnRYIC0gYm91bmRpbmdSZWN0LmxlZnQpICogKGNhbnZhcy53aWR0aCAvIGJvdW5kaW5nUmVjdC53aWR0aCksXG4gICAgICAgIChldi5jbGllbnRZIC0gYm91bmRpbmdSZWN0LnRvcCkgKiAoY2FudmFzLmhlaWdodCAvIGJvdW5kaW5nUmVjdC5oZWlnaHQpXG4gICAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsRGlyKGV2KXtcbiAgICBpZihldi5kZWx0YVkgPT0gMCkgcmV0dXJuIDA7XG4gICAgZWxzZSByZXR1cm4gZXYuZGVsdGFZIC8gTWF0aC5hYnMoZXYuZGVsdGFZKTtcbn1cblxuY2xhc3MgTW91c2VEb3duVHJhY2tlcntcbiAgICBjb25zdHJ1Y3RvcihjYW52YXMsIGluaXRUcmFja0NhbGxiYWNrLCB0cmFja0NhbGxiYWNrLCBpc1RyYWNraW5nRW5hYmxlZCA9IGV2ID0+IHRydWUpe1xuICAgICAgICB0aGlzLmluaXRUcmFja0NhbGxiYWNrID0gaW5pdFRyYWNrQ2FsbGJhY2s7XG4gICAgICAgIHRoaXMudHJhY2tDYWxsYmFjayA9IHRyYWNrQ2FsbGJhY2s7XG4gICAgICAgIHRoaXMuaXNUcmFja2luZ0VuYWJsZWQgPSBpc1RyYWNraW5nRW5hYmxlZDtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG5cbiAgICAgICAgdGhpcy5vbk1vdXNlRG93biA9IGV2ID0+IHtcbiAgICAgICAgICAgIGlmKHRoaXMuaXNUcmFja2luZ0VuYWJsZWQoZXYpKXtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRUcmFja0NhbGxiYWNrKGV2KTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XG4gICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbk1vdXNlVXAgPSBldiA9PiB7XG4gICAgICAgICAgICAvL3RoaXMudHJhY2tDYWxsYmFjayhldik7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uTW91c2VNb3ZlID0gZXYgPT4ge1xuICAgICAgICAgICAgdGhpcy50cmFja0NhbGxiYWNrKGV2KTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbiAgICB9XG59O1xuXG5jbGFzcyBEcmFnTWFuYWdlciBleHRlbmRzIE1vdXNlRG93blRyYWNrZXJ7XG4gICAgY29uc3RydWN0b3IoY2FudmFzLCBkcmFnQ2FsbGJhY2ssIGlzRHJhZ0VuYWJsZWQgPSBldiA9PiB0cnVlKXtcbiAgICAgICAgc3VwZXIoY2FudmFzLFxuICAgICAgICAgICAgZXYgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldk1vdXNlUG9zID0gZ2V0Q2FudmFzTW91c2VQb3ModGhpcy5jYW52YXMsIGV2KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBldiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW91c2VQb3MgPSBnZXRDYW52YXNNb3VzZVBvcyh0aGlzLmNhbnZhcywgZXYpO1xuICAgICAgICAgICAgICAgIGRyYWdDYWxsYmFjayhtb3VzZVBvcy5zdWJ0cmFjdCh0aGlzLnByZXZNb3VzZVBvcykpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJldk1vdXNlUG9zID0gbW91c2VQb3M7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNEcmFnRW5hYmxlZCk7XG4gICAgICAgIHRoaXMucHJldk1vdXNlUG9zID0gbmV3IFZlY3RvcigwLCAwKTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBzZXRDYW52YXNTbW9vdGhpbmcoY3R4LCBlbmFibGUpe1xuICAgIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBlbmFibGU7XG4gICAgY3R4Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGVuYWJsZTtcbiAgICBjdHgud2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZW5hYmxlO1xuICAgIGN0eC5tbkltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGVuYWJsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2FudmFzKGNvbnRhaW5lciwgYm91bmRpbmdSZWN0KXtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjYW52YXMud2lkdGggPSBib3VuZGluZ1JlY3Qud2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGJvdW5kaW5nUmVjdC5oZWlnaHQ7XG4gICAgY2FudmFzLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBjYW52YXMuc3R5bGUubGVmdCA9IGJvdW5kaW5nUmVjdC5sZWZ0LnRvU3RyaW5nKCkgKyAncHgnO1xuICAgIGNhbnZhcy5zdHlsZS50b3AgPSBib3VuZGluZ1JlY3QudG9wLnRvU3RyaW5nKCkgKyAncHgnO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xuICAgIHJldHVybiBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2FudmFzRGltcyhjdHgpe1xuICAgIHJldHVybiBuZXcgRGltZW5zaW9ucyhjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGNvbXBpbGVTaGFkZXIoY3R4LCBzcmMsIHR5cGUpe1xuICAgIGNvbnN0IHNoYWRlciA9IGN0eC5jcmVhdGVTaGFkZXIodHlwZSk7XG4gICAgY3R4LnNoYWRlclNvdXJjZShzaGFkZXIsIHNyYyk7XG4gICAgY3R4LmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcbiAgICBpZighY3R4LmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGN0eC5DT01QSUxFX1NUQVRVUykpe1xuICAgICAgICBjb25zb2xlLmxvZyhzcmMpO1xuICAgICAgICB0aHJvdyAnU2hhZGVyIGNvbXBpbGUgZXJyb3I6ICcgKyBjdHguZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpO1xuICAgIH1cbiAgICByZXR1cm4gc2hhZGVyO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQcm9ncmFtKGN0eCwgdmVydFNyYywgZnJhZ1NyYyl7XG4gICAgY29uc3QgcHJvZ3JhbSA9IGN0eC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgY3R4LmF0dGFjaFNoYWRlcihwcm9ncmFtLCBjb21waWxlU2hhZGVyKGN0eCwgdmVydFNyYywgY3R4LlZFUlRFWF9TSEFERVIpKTtcbiAgICBjdHguYXR0YWNoU2hhZGVyKHByb2dyYW0sIGNvbXBpbGVTaGFkZXIoY3R4LCBmcmFnU3JjLCBjdHguRlJBR01FTlRfU0hBREVSKSk7XG4gICAgY3R4LmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuICAgIHJldHVybiBwcm9ncmFtO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDb21wdXRlVGV4dHVyZShjdHgsIGRpbXMsIHRleFR5cGUgPSBjdHguRkxPQVQsIGNvbnRlbnRzID0gbnVsbCl7XG4gICAgY29uc3QgdGV4ID0gY3R4LmNyZWF0ZVRleHR1cmUoKTtcbiAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleCk7XG4gICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01JTl9GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUFHX0ZJTFRFUiwgY3R4Lk5FQVJFU1QpO1xuICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9XUkFQX1MsIGN0eC5DTEFNUF9UT19FREdFKTtcbiAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9ULCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgY3R4LnRleEltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIGN0eC5SR0JBLCBkaW1zLndpZHRoLCBkaW1zLmhlaWdodCwgMCwgY3R4LlJHQkEsIHRleFR5cGUsIGNvbnRlbnRzKTtcbiAgICByZXR1cm4gdGV4O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGQk8oY3R4LCBleHREQiwgdGV4dHVyZXMpe1xuICAgIGNvbnN0IGZibyA9IGN0eC5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xuICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBmYm8pO1xuICAgIGlmKHRleHR1cmVzLmxlbmd0aCA+IDEpe1xuICAgICAgICBleHREQi5kcmF3QnVmZmVyc1dFQkdMKGNvbXB1dGUxREFycmF5KHRleHR1cmVzLmxlbmd0aCxcbiAgICAgICAgICAgIGkgPT4gZXh0REJbJ0NPTE9SX0FUVEFDSE1FTlQnICsgaS50b1N0cmluZygpICsgJ19XRUJHTCddXG4gICAgICAgICkpO1xuICAgICAgICB0ZXh0dXJlcy5mb3JFYWNoKCh0ZXgsIGkpID0+IHtcbiAgICAgICAgICAgIGN0eC5mcmFtZWJ1ZmZlclRleHR1cmUyRChjdHguRlJBTUVCVUZGRVIsIGV4dERCWydDT0xPUl9BVFRBQ0hNRU5UJyArIGkudG9TdHJpbmcoKSArICdfV0VCR0wnXSwgY3R4LlRFWFRVUkVfMkQsIHRleCwgMCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgICBjdHguZnJhbWVidWZmZXJUZXh0dXJlMkQoY3R4LkZSQU1FQlVGRkVSLCBjdHguQ09MT1JfQVRUQUNITUVOVDAsIGN0eC5URVhUVVJFXzJELCB0ZXh0dXJlc1swXSwgMCk7XG4gICAgfVxuICAgIGlmKGN0eC5jaGVja0ZyYW1lYnVmZmVyU3RhdHVzKGN0eC5GUkFNRUJVRkZFUikgIT0gY3R4LkZSQU1FQlVGRkVSX0NPTVBMRVRFKXtcbiAgICAgICAgdGhyb3cgJ0dMX0ZSQU1FQlVGRkVSX0NPTVBMRVRFIGZhaWxlZC4nO1xuICAgIH1cbiAgICByZXR1cm4gZmJvO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBcnJheUJ1ZmZlcihjdHgsIGJ1ZlR5cGUsIGNvbnRlbnRzKXtcbiAgICBjb25zdCBidWYgPSBjdHguY3JlYXRlQnVmZmVyKCk7XG4gICAgY3R4LmJpbmRCdWZmZXIoYnVmVHlwZSwgYnVmKTtcbiAgICBjdHguYnVmZmVyRGF0YShidWZUeXBlLCBjb250ZW50cywgY3R4LlNUQVRJQ19EUkFXKTtcbiAgICByZXR1cm4gYnVmO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclZlcnRleEF0dHJpYihjdHgsIHByb2dyYW0sIGF0dHJpYk5hbWUsIGl0ZW1TaXplLCBidWYpe1xuICAgIGNvbnN0IGF0dHJpYiA9IGN0eC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCBhdHRyaWJOYW1lKTtcbiAgICBjdHguZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYXR0cmliKTtcbiAgICBjdHguYmluZEJ1ZmZlcihjdHguQVJSQVlfQlVGRkVSLCBidWYpO1xuICAgIGN0eC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGF0dHJpYiwgaXRlbVNpemUsIGN0eC5GTE9BVCwgZmFsc2UsIDAsIDApO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclRleHR1cmVzKGN0eCwgcHJvZ3JhbSwgdGV4TmFtZXMpe1xuICAgIHRleE5hbWVzLmZvckVhY2goKHRleE5hbWUsIGkpID0+IHtcbiAgICAgICAgY29uc3QgdGV4TG9jID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB0ZXhOYW1lKTtcbiAgICAgICAgY3R4LnVuaWZvcm0xaSh0ZXhMb2MsIGkpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiByZWdpc3RlclVuaWZvcm1zKGN0eCwgcHJvZ3JhbSwgdW5pZm9ybXMsIHZhbHMpe1xuICAgIHVuaWZvcm1zLmZvckVhY2godW5pZm9ybSA9PiB7XG4gICAgICAgIGNvbnN0IHVuaWZvcm1Mb2MgPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHVuaWZvcm0ubmFtZSk7XG4gICAgICAgIGlmKHVuaWZvcm0udHlwZSA9PSAnaW50Jyl7XG4gICAgICAgICAgICBjdHgudW5pZm9ybTFpKHVuaWZvcm1Mb2MsIHZhbHNbdW5pZm9ybS5uYW1lXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZih1bmlmb3JtLnR5cGUgPT0gJ2Zsb2F0Jyl7XG4gICAgICAgICAgICBjdHgudW5pZm9ybTFmKHVuaWZvcm1Mb2MsIHZhbHNbdW5pZm9ybS5uYW1lXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZigvXml2ZWNbMi00XSQvZy50ZXN0KHVuaWZvcm0udHlwZSkpe1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHVuaWZvcm0udHlwZVs0XS50b1N0cmluZygpICsgJ2l2J10odW5pZm9ybUxvYywgbmV3IEludDMyQXJyYXkodmFsc1t1bmlmb3JtLm5hbWVdKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZigvXnZlY1syLTRdJC9nLnRlc3QodW5pZm9ybS50eXBlKSl7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm0nICsgdW5pZm9ybS50eXBlWzNdLnRvU3RyaW5nKCkgKyAnZnYnXSh1bmlmb3JtTG9jLCBuZXcgRmxvYXQzMkFycmF5KHZhbHNbdW5pZm9ybS5uYW1lXSkpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGJpbmRUZXh0dXJlcyhjdHgsIHRleHR1cmVzKXtcbiAgICB0ZXh0dXJlcy5mb3JFYWNoKCh0ZXh0dXJlLCBpKSA9PiB7XG4gICAgICAgIGN0eC5hY3RpdmVUZXh0dXJlKGN0eFsnVEVYVFVSRScgKyBpLnRvU3RyaW5nKCldKTtcbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcbiAgICB9KTtcbn1cblxuY29uc3QgRlVMTFNDUkVFTl9RVUFEX1BPU19BUlJBWSA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgIC0xLjAsIC0xLjAsXG4gICAgMS4wLCAtMS4wLFxuICAgIDEuMCwgMS4wLFxuICAgIC0xLjAsIDEuMCxcbl0pO1xuXG5jb25zdCBGVUxMU0NSRUVOX1FVQURfSU5ERVhfQVJSQVkgPSBuZXcgVWludDE2QXJyYXkoW1xuICAgIDAsIDEsIDIsXG4gICAgMCwgMiwgM1xuXSk7XG5cbmNvbnN0IEZVTExTQ1JFRU5fUVVBRF9OVU1fVkVSVElDRVMgPSA2O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBSRUQgPSBuZXcgQ29sb3IoMjU1LCAwLCAwKTtcbmNvbnN0IEdSRUVOID0gbmV3IENvbG9yKDAsIDI1NSwgMCk7XG5jb25zdCBCTFVFID0gbmV3IENvbG9yKDAsIDAsIDI1NSk7XG5jb25zdCBXSElURSA9IG5ldyBDb2xvcigyNTUsIDI1NSwgMjU1KTtcblxuY2xhc3MgQ29udG91cmVyTWFuYWdlcntcbiAgICBjb25zdHJ1Y3RvcihkcmF3RnVuYyl7XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSBuZXcgU2NhbGFibGVWaWV3cG9ydE1hbmFnZXIoXG4gICAgICAgICAgICBuZXcgVmVjdG9yKDAsIDApLFxuICAgICAgICAgICAgMC4wMVxuICAgICAgICApO1xuICAgICAgICB0aGlzLnpvb21TZW5zaXRpdml0eSA9IDAuMztcbiAgICAgICAgdGhpcy5jb250b3VyU3BhY2luZyA9IDEuMDtcbiAgICB9XG4gICAgY2hhbmdlRHJhd0Z1bmMoZHJhd0Z1bmMsIGluY2x1ZGVTcmMsIGlzQW5pbWF0ZWQgPSBmYWxzZSl7XG4gICAgICAgIGNvbnN0IGNyZWF0ZUZpZWxkS2VybmVsID0gY29vcmQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmllbGRGdW5jID1cbmB2ZWMyIGNQb3MgPSAodmVjMih0aHJlYWRJZCkgKiB1U2NhbGUpICsgdVBvcztcbnZlYzIgcmVzO1xuYCArXG4gICAgICAgICAgICBkcmF3RnVuYy50cmltKCkgKyAnXFxuJyArXG4vL2BnbF9GcmFnRGF0YVswXSA9IHZlYzQoXG4vLyAgICByZXMsXG4vLyAgICAwLjAsIDAuMFxuLy8pO1xuYGdsX0ZyYWdEYXRhWzBdID0gcGFja0Zsb2F0KHJlcy5gICsgY29vcmQgKyBgKTtcbmA7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ncGdwdU1hbmFnZXIuY3JlYXRlS2VybmVsKFxuICAgICAgICAgICAgICAgIGZpZWxkRnVuYywgW10sIHRoaXMuZGltcywgW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3VTY2FsZSdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3ZlYzInLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3VQb3MnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdLmNvbmNhdChpc0FuaW1hdGVkID8gW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3RpbWUnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdIDogW10pLCAxLCBHUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFICsgaW5jbHVkZVNyYy50cmltKCkgKyAnXFxuXFxuJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5maWVsZEtlcm5lbFggPSBjcmVhdGVGaWVsZEtlcm5lbCgneCcpO1xuICAgICAgICB0aGlzLmZpZWxkS2VybmVsWSA9IGNyZWF0ZUZpZWxkS2VybmVsKCd5Jyk7XG5cbiAgICAgICAgdGhpcy52aWV3cG9ydC5zY2FsZSA9IDEwLjAgLyB0aGlzLmRpbXMud2lkdGg7XG4gICAgICAgIHRoaXMudmlld3BvcnQucG9zID0gbmV3IFZlY3RvcigtdGhpcy5kaW1zLndpZHRoLCAtdGhpcy5kaW1zLmhlaWdodCkuZGl2aWRlKDIuMCkubXVsdGlwbHkodGhpcy52aWV3cG9ydC5zY2FsZSk7XG4gICAgICAgIHRoaXMuY29udG91clNwYWNpbmcgPSAxLjA7XG5cbiAgICAgICAgdGhpcy5pc0FuaW1hdGVkID0gaXNBbmltYXRlZDtcbiAgICB9XG4gICAgdXNlQ2FudmFzKGNhbnZhcyl7XG4gICAgICAgIHRoaXMuY3R4ID0gR1BHUFVNYW5hZ2VyLmdldENhbnZhc0NvbnRleHQoY2FudmFzKTtcbiAgICAgICAgdGhpcy5ncGdwdU1hbmFnZXIgPSBuZXcgR1BHUFVNYW5hZ2VyKHRoaXMuY3R4LCBmYWxzZSk7XG4gICAgICAgIHRoaXMuZGltcyA9IGdldENhbnZhc0RpbXModGhpcy5jdHgpO1xuXG4gICAgICAgIHRoaXMucGxvdEtlcm5lbCA9IHRoaXMuZ3BncHVNYW5hZ2VyLmNyZWF0ZUdyYXBoaWNhbEtlcm5lbChcbiAgICAgICAgICAgIENvbnRvdXJlck1hbmFnZXIucGxvdEZ1bmMsIFsndUZpZWxkWCcsICd1RmllbGRZJ10sIHRoaXMuZGltcywgW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Zsb2F0JyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3VDb250b3VyU3BhY2luZydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdLCBHUEdQVU1hbmFnZXIuUEFDS19GTE9BVF9JTkNMVURFICsgQ29udG91cmVyTWFuYWdlci5GSUVMRF9DSEVDS19JTkNMVURFXG4gICAgICAgICk7XG4gICAgfVxuICAgIGRlc3Ryb3lDb250ZXh0KCl7XG4gICAgICAgIHRoaXMuY3R4LmNhbnZhcy53aWR0aCA9IDE7XG4gICAgICAgIHRoaXMuY3R4LmNhbnZhcy5oZWlnaHQgPSAxO1xuICAgIH1cbiAgICBjaGFuZ2Vab29tKGNoYW5nZUFtb3VudCwgem9vbVBvaW50ID0gbmV3IFZlY3Rvcih0aGlzLmRpbXMud2lkdGggLyAyLCB0aGlzLmRpbXMuaGVpZ2h0IC8gMikpe1xuICAgICAgICB0aGlzLnZpZXdwb3J0LnNjYWxlQXRQb2ludChcbiAgICAgICAgICAgIC1jaGFuZ2VBbW91bnQgKiB0aGlzLnpvb21TZW5zaXRpdml0eSxcbiAgICAgICAgICAgIHpvb21Qb2ludFxuICAgICAgICApO1xuICAgIH1cbiAgICBjaGFuZ2VDb250b3VyU3BhY2luZyhjaGFuZ2VBbW91bnQpe1xuICAgICAgICB0aGlzLmNvbnRvdXJTcGFjaW5nICo9IE1hdGguZXhwKGNoYW5nZUFtb3VudCAqIHRoaXMuem9vbVNlbnNpdGl2aXR5KTtcbiAgICB9XG4gICAgdHJhbnNsYXRlKHRyYW5zbGF0ZUFtb3VudCl7XG4gICAgICAgIHRoaXMudmlld3BvcnQudHJhbnNsYXRlKHRyYW5zbGF0ZUFtb3VudCk7XG4gICAgfVxuICAgIGRyYXdDb250b3Vycyh0aW1lID0gMCl7XG4gICAgICAgIGNvbnN0IHVuaWZvcm1Bc3NpZ25tZW50cyA9IHtcbiAgICAgICAgICAgIHVTY2FsZTogdGhpcy52aWV3cG9ydC5zY2FsZSxcbiAgICAgICAgICAgIHVQb3M6IHRoaXMudmlld3BvcnQucG9zLnRvQXJyYXkoKVxuICAgICAgICB9O1xuICAgICAgICBpZih0aGlzLmlzQW5pbWF0ZWQpe1xuICAgICAgICAgICAgdW5pZm9ybUFzc2lnbm1lbnRzWyd0aW1lJ10gPSB0aW1lO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpZWxkUmVzdWx0WCA9IHRoaXMuZmllbGRLZXJuZWxYLnJ1bihbXSwgdGhpcy5kaW1zLCB1bmlmb3JtQXNzaWdubWVudHMsIGZhbHNlKTtcbiAgICAgICAgY29uc3QgZmllbGRSZXN1bHRZID0gdGhpcy5maWVsZEtlcm5lbFkucnVuKFtdLCB0aGlzLmRpbXMsIHVuaWZvcm1Bc3NpZ25tZW50cywgZmFsc2UpO1xuICAgICAgICB0aGlzLnBsb3RLZXJuZWwucnVuKFtmaWVsZFJlc3VsdFgudGV4dHVyZXNbMF0sIGZpZWxkUmVzdWx0WS50ZXh0dXJlc1swXV0sIHRoaXMuZGltcywge1xuICAgICAgICAgICAgdUNvbnRvdXJTcGFjaW5nOiB0aGlzLmNvbnRvdXJTcGFjaW5nXG4gICAgICAgIH0pO1xuICAgICAgICBmaWVsZFJlc3VsdFguZGlzcG9zZSgpO1xuICAgICAgICBmaWVsZFJlc3VsdFkuZGlzcG9zZSgpO1xuICAgIH1cbn07XG5cbkNvbnRvdXJlck1hbmFnZXIucGxvdEZ1bmMgPVxuYGl2ZWMyIGxpbmVJbmRleCA9IGl2ZWMyKGZsb29yKHZlYzIoXG4gICAgdW5wYWNrRmxvYXQodGV4dHVyZTJEKHVGaWVsZFgsIHZDb29yZCkpLFxuICAgIHVucGFja0Zsb2F0KHRleHR1cmUyRCh1RmllbGRZLCB2Q29vcmQpKVxuKSAvIHVDb250b3VyU3BhY2luZykpO1xudmVjMiBjbXBGaWVsZCA9IHZlYzIobGluZUluZGV4KSAqIHVDb250b3VyU3BhY2luZztcbml2ZWMyIGRyYXdEYXRhID0gaXZlYzIoZ3JlYXRlclRoYW5FcXVhbChcbiAgICBmaWVsZENoZWNrKHRocmVhZElkLCBpdmVjMigwLCAxKSwgY21wRmllbGQpICtcbiAgICBmaWVsZENoZWNrKHRocmVhZElkLCBpdmVjMigxLCAwKSwgY21wRmllbGQpICtcbiAgICBmaWVsZENoZWNrKHRocmVhZElkLCBpdmVjMigwLCAtMSksIGNtcEZpZWxkKSArXG4gICAgZmllbGRDaGVjayh0aHJlYWRJZCwgaXZlYzIoLTEsIDApLCBjbXBGaWVsZCksXG4gICAgaXZlYzIoMSkpKTtcbmlmKGFsbChlcXVhbChkcmF3RGF0YSwgaXZlYzIoMCkpKSl7XG4gICAgZ2xfRnJhZ0RhdGFbMF0gPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIDEuMCk7XG59XG5lbHNle1xuICAgIHZlYzIgaXNBeGlzID0gdmVjMihlcXVhbChsaW5lSW5kZXgsIGl2ZWMyKDApKSk7XG4gICAgdmVjMiBsaW5lQ29sb3IgPSB2ZWMyKGRyYXdEYXRhKSAqICgxLjAgLSAwLjUgKiBpc0F4aXMpO1xuICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNChsaW5lQ29sb3IueCwgMC41ICogZG90KHZlYzIoZHJhd0RhdGEpLCBpc0F4aXMpLCBsaW5lQ29sb3IueSwgMS4wKTtcbn1cbmA7XG5cbkNvbnRvdXJlck1hbmFnZXIuRklFTERfQ0hFQ0tfSU5DTFVERSA9XG5gdmVjMiBnZXRGaWVsZChpdmVjMiBwb3Mpe1xuICAgIHJldHVybiB2ZWMyKFxuICAgICAgICB1bnBhY2tGbG9hdChhcnJHZXQodUZpZWxkWCwgcG9zKSksXG4gICAgICAgIHVucGFja0Zsb2F0KGFyckdldCh1RmllbGRZLCBwb3MpKVxuICAgICk7XG59XG5cbml2ZWMyIGZpZWxkQ2hlY2soaXZlYzIgY1BvcywgaXZlYzIgZGlyLCB2ZWMyIGNtcEZpZWxkKXtcbiAgICBpdmVjMiBvUG9zID0gY1BvcyArIGRpcjtcbiAgICBpZihhbGwoZ3JlYXRlclRoYW5FcXVhbChvUG9zLCBpdmVjMigwKSkpICYmIGFsbChsZXNzVGhhbihvUG9zLCB1RGltcykpKXtcbiAgICAgICAgcmV0dXJuIGl2ZWMyKGxlc3NUaGFuKGdldEZpZWxkKG9Qb3MpLCBjbXBGaWVsZCkpO1xuICAgIH1cbiAgICBlbHNlIHJldHVybiBpdmVjMigwKTtcbn1cblxuYDtcblxuY2xhc3MgQ29udG91cmVyQW5pbWF0aW9uTWFuYWdlcntcbiAgICBjb25zdHJ1Y3RvcihtYW5hZ2VyLCBudW1GcmFtZXMgPSAxMDAwKXtcbiAgICAgICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlcjtcbiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm51bUZyYW1lcyA9IG51bUZyYW1lcztcbiAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSAwO1xuICAgICAgICB0aGlzLm9uU3RvcENhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5hbmltYXRpb25Mb29wID0gdGhpcy5hbmltYXRpb25Mb29wLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIHN0YXJ0KHN0YXJ0RnJhbWUgPSAwLCBvbkRyYXcgPSBudWxsKXtcbiAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSBzdGFydEZyYW1lO1xuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vbkRyYXcgPSBvbkRyYXc7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25Mb29wKTtcbiAgICB9XG4gICAgYW5pbWF0aW9uTG9vcCh0aW1lc3RhbXApe1xuICAgICAgICBpZih0aGlzLmlzQW5pbWF0aW5nKXtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5kcmF3Q29udG91cnModGhpcy5jdXJyZW50RnJhbWUgLyB0aGlzLm51bUZyYW1lcyk7XG4gICAgICAgICAgICBpZih0aGlzLm9uRHJhdyAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRHJhdyh0aGlzLmN1cnJlbnRGcmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9ICh0aGlzLmN1cnJlbnRGcmFtZSArIDEpICUgdGhpcy5udW1GcmFtZXM7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uTG9vcCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGlmKHRoaXMub25TdG9wQ2FsbGJhY2sgIT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgdGhpcy5vblN0b3BDYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3Aob25TdG9wQ2FsbGJhY2sgPSBudWxsKXtcbiAgICAgICAgaWYodGhpcy5pc0FuaW1hdGluZyl7XG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm9uU3RvcENhbGxiYWNrID0gb25TdG9wQ2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGlmKG9uU3RvcENhbGxiYWNrICE9IG51bGwpe1xuICAgICAgICAgICAgICAgIG9uU3RvcENhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5mdW5jdGlvbiBpbml0KCl7XG4gICAgY29uc3QgbWFuYWdlciA9IG5ldyBDb250b3VyZXJNYW5hZ2VyKCk7XG4gICAgaW5pdFJlbmRlcihtYW5hZ2VyKTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuY2xhc3MgQ2FudmFzRGlzcGxheVBhbmUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gICAgY29tcG9uZW50RGlkTW91bnQoKXtcbiAgICAgICAgaWYoJ29uTW91bnRDYWxsYmFjaycgaW4gdGhpcy5wcm9wcyl7XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25Nb3VudENhbGxiYWNrKGNhbnZhcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKXtcbiAgICAgICAgaWYoJ29uRGlzbW91bnRDYWxsYmFjaycgaW4gdGhpcy5wcm9wcyl7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uRGlzbW91bnRDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlcigpe1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGNhbnZhcyB3aWR0aD17dGhpcy5wcm9wcy5kaW1zLndpZHRofSBoZWlnaHQ9e3RoaXMucHJvcHMuZGltcy5oZWlnaHR9IHN0eWxlPXt7d2lkdGg6ICcxMDAlJ319PjwvY2FudmFzPlxuICAgICAgICApO1xuICAgIH1cbn07XG5DYW52YXNEaXNwbGF5UGFuZS5wcm9wVHlwZXMgPSB7XG4gICAgZGltczogUmVhY3QuUHJvcFR5cGVzLmluc3RhbmNlT2YoRGltZW5zaW9ucykuaXNSZXF1aXJlZCxcbiAgICBvbk1vdW50Q2FsbGJhY2s6IFJlYWN0LlByb3BUeXBlcy5mdW5jXG59O1xuXG5jbGFzcyBEcmF3RnVuY3Rpb25TZWxlY3RvckJ1dHRvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcbiAgICByZW5kZXIoKXtcbiAgICAgICAgcmV0dXJuIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT17J2xpc3QtZ3JvdXAtaXRlbScgKyAodGhpcy5wcm9wcy5zZWxlY3RlZCA/ICcgYWN0aXZlJyA6ICcnKX0gb25DbGljaz17KCkgPT4ge3RoaXMucHJvcHMub25DbGljayh0aGlzLnByb3BzLmZ1bmNOYW1lKTt9fT57dGhpcy5wcm9wcy5kaXNwbGF5TmFtZX08L2J1dHRvbj47XG4gICAgfVxufTtcblxuY2xhc3MgRHJhd0Z1bmN0aW9uU2VsZWN0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gICAgY29uc3RydWN0b3IocHJvcHMpe1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzZWxlY3RlZEZ1bmM6IERyYXdGdW5jdGlvblNlbGVjdG9yLkRFRkFVTFRfRlVOQ1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZUNsaWNrID0gdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICByZW5kZXIoKXtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGlzdC1ncm91cFwiPlxuICAgICAgICAgICAgICAgIHtPYmplY3Qua2V5cyhEZW1vRnVuY3Rpb25zLmZ1bmN0aW9ucykubWFwKGZ1bmMgPT5cbiAgICAgICAgICAgICAgICAgICAgPERyYXdGdW5jdGlvblNlbGVjdG9yQnV0dG9uIGRpc3BsYXlOYW1lPXtEZW1vRnVuY3Rpb25zLmZ1bmN0aW9uc1tmdW5jXS5kaXNwbGF5TmFtZX0ga2V5PXtmdW5jfSBmdW5jTmFtZT17ZnVuY30gc2VsZWN0ZWQ9e2Z1bmMgPT0gdGhpcy5zdGF0ZS5zZWxlY3RlZEZ1bmN9IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9IC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbiAgICBoYW5kbGVDbGljayhmdW5jTmFtZSl7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VsZWN0ZWRGdW5jOiBmdW5jTmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcm9wcy5vblNlbGVjdChmdW5jTmFtZSk7XG4gICAgfVxufTtcbkRyYXdGdW5jdGlvblNlbGVjdG9yLkRFRkFVTFRfRlVOQyA9ICdhdHRyYWN0UmVwZWwnO1xuXG5jbGFzcyBBY2VFZGl0b3IgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnR7XG4gICAgY29tcG9uZW50RGlkTW91bnQoKXtcbiAgICAgICAgY29uc3QgZWRpdG9yRGl2ID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyk7XG4gICAgICAgIHRoaXMuZWRpdG9yID0gYWNlLmVkaXQoZWRpdG9yRGl2KTtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0VGhlbWUoJ2FjZS90aGVtZS9tb25va2FpJyk7XG4gICAgICAgIHRoaXMuZWRpdG9yLmdldFNlc3Npb24oKS5zZXRVc2VXb3JrZXIoZmFsc2UpO1xuICAgICAgICB0aGlzLmVkaXRvci5nZXRTZXNzaW9uKCkuc2V0TW9kZSgnYWNlL21vZGUvZ2xzbCcpO1xuICAgICAgICB0aGlzLmVkaXRvci4kYmxvY2tTY3JvbGxpbmcgPSBJbmZpbml0eTtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0Rm9udFNpemUoMTgpO1xuICAgICAgICB0aGlzLmVkaXRvci5zZXRPcHRpb25zKHtcbiAgICAgICAgICAgIG1heExpbmVzOiBJbmZpbml0eVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLnNldFVzZVdyYXBNb2RlKHRydWUpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpe1xuICAgICAgICB0aGlzLmVkaXRvci5kZXN0cm95KCk7XG4gICAgfVxuICAgIHNldFZhbHVlKG5ld0NvbnRlbnRzKXtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0VmFsdWUobmV3Q29udGVudHMpO1xuICAgICAgICB0aGlzLmVkaXRvci5jbGVhclNlbGVjdGlvbigpO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5lZGl0b3IuZ2V0U2Vzc2lvbigpLmdldFZhbHVlKCk7XG4gICAgfVxuICAgIHJlbmRlcigpe1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e2hlaWdodDogdGhpcy5wcm9wcy5oZWlnaHQudG9TdHJpbmcoKSArICdweCd9fT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn07XG5cbmNsYXNzIENvbnRvdXJlckFwcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcyl7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyID0gbmV3IENvbnRvdXJlckFuaW1hdGlvbk1hbmFnZXIodGhpcy5wcm9wcy5tYW5hZ2VyKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGlzQW5pbWF0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgY3VycmVudEZyYW1lOiAwLFxuICAgICAgICAgICAgbnVtRnJhbWVzOiAwLFxuICAgICAgICAgICAgaXNBbmltYXRlZFNlbGVjdFN0YXRlOiBmYWxzZSxcbiAgICAgICAgICAgIG51bUZyYW1lc0lucHV0VmFsOiAnMCcsXG4gICAgICAgICAgICBzaGFkZXJDb21waWxlRXJyb3I6ICcnXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXNlQ2FudmFzID0gdGhpcy51c2VDYW52YXMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zZXREcmF3RnVuYyA9IHRoaXMuc2V0RHJhd0Z1bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkRyYXdGdW5jU2VsZWN0ID0gdGhpcy5vbkRyYXdGdW5jU2VsZWN0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVkcmF3ID0gdGhpcy5yZWRyYXcuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jaGFuZ2Vab29tQW5kUmVkcmF3ID0gdGhpcy5jaGFuZ2Vab29tQW5kUmVkcmF3LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcgPSB0aGlzLmNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudHJhbnNsYXRlQW5kUmVkcmF3ID0gdGhpcy50cmFuc2xhdGVBbmRSZWRyYXcuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVQbG90Q2xpY2sgPSB0aGlzLmhhbmRsZVBsb3RDbGljay5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpe1xuICAgICAgICB0aGlzLm9uRHJhd0Z1bmNTZWxlY3QoRHJhd0Z1bmN0aW9uU2VsZWN0b3IuREVGQVVMVF9GVU5DKTtcbiAgICB9XG4gICAgcmVuZGVyKCl7XG4gICAgICAgIGNvbnN0IENBTlZBU19ESU1TID0gbmV3IERpbWVuc2lvbnMoNjQwLCA0ODApO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIiBjbGFzc05hbWU9XCJjb2wtbGctMTJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2UtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMT5Db250b3VyZXI8L2gxPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2VsbFwiPlxuICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxiPkRyYWc8L2I+IHRvIG1vdmUgdGhlIGdyYXBoLCA8Yj5zY3JvbGw8L2I+IHRvIHpvb20sIGFuZCA8Yj5DdHJsICsgc2Nyb2xsPC9iPiB0byBjaGFuZ2UgdGhlIGNvbnRvdXIgZGVuc2l0eS48YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgT3IsIGlmIHlvdSdyZSBvbiBtb2JpbGUsIHVzZSB0aGUgPGI+YnV0dG9uczwvYj4uXG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RpZnkgPGI+PGEgaHJlZj1cIiNcIiBvbkNsaWNrPXsoZXYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm51bUZyYW1lc0lucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19PkZyYW1lczwvYT48L2I+IChudW1iZXIgb2YgZnJhbWVzKSwgdGhlbiBjbGljayA8Yj5QbG90PC9iPiB0byBjaGFuZ2UgdGhlIGFuaW1hdGlvbiBzcGVlZC48YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgT3IgdXNlIHRoZSA8Yj5zbGlkZXI8L2I+IHRvIGV4cGxvcmUgdGhlIGFuaW1hdGlvbiBpbiBtb3JlIGRldGFpbC5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgIFBsb3QgeW91ciBvd24gZnVuY3Rpb25zIHdpdGggdGhlIDxiPmNvZGUgZWRpdG9yczwvYj4gYmVsb3cuXG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICBKdXN0IGVuam95IHRoZSBwcmV0dHkgYW5pbWF0aW9ucywgb3IgPGI+PGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9rcmF3dGhla3Jvdy9jb250b3VyZXJcIj5jbGljayBoZXJlPC9hPjwvYj4gdG8gbGVhcm4gbW9yZS5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxiPk5vdGU6IFRoaXMgYXBwIHVzZXMgV2ViR0wsIHNvIGl0IG5lZWRzIGEgc3VmZmljaWVudGx5IG1vZGVybiBicm93c2VyIGFuZCBHUFUgdG8gd29yay48L2I+XG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RHJhd0Z1bmN0aW9uU2VsZWN0b3Igb25TZWxlY3Q9e3RoaXMub25EcmF3RnVuY1NlbGVjdH0vPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtc20tOVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC14cy04XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgcm9sZT1cInRvb2xiYXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuLWdyb3VwXCIgcm9sZT1cImdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17ZSA9PiB7dGhpcy5jaGFuZ2Vab29tQW5kUmVkcmF3KDEpO319PjxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tem9vbS1pblwiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXtlID0+IHt0aGlzLmNoYW5nZVpvb21BbmRSZWRyYXcoLTEpO319PjxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tem9vbS1vdXRcIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17ZSA9PiB7dGhpcy5jaGFuZ2VDb250b3VyU3BhY2luZ0FuZFJlZHJhdygtMSk7fX0+PHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzXCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9e2UgPT4ge3RoaXMuY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcoMSk7fX0+PHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1taW51c1wiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXtlID0+IHt0aGlzLnRyYW5zbGF0ZUFuZFJlZHJhdyhuZXcgVmVjdG9yKDEsIDApKTt9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWFycm93LWxlZnRcIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17ZSA9PiB7dGhpcy50cmFuc2xhdGVBbmRSZWRyYXcobmV3IFZlY3RvcigwLCAxKSk7fX0+PHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy11cFwiPjwvc3Bhbj48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXtlID0+IHt0aGlzLnRyYW5zbGF0ZUFuZFJlZHJhdyhuZXcgVmVjdG9yKDAsIC0xKSk7fX0+PHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy1kb3duXCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9e2UgPT4ge3RoaXMudHJhbnNsYXRlQW5kUmVkcmF3KG5ldyBWZWN0b3IoLTEsIDApKTt9fT48c3BhbiBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLWFycm93LXJpZ2h0XCI+PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgKCF0aGlzLnN0YXRlLmlzQW5pbWF0ZWQgfHwgIXRoaXMuc3RhdGUuaXNBbmltYXRpbmcpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2J0bicsICdidG4tZGVmYXVsdCcsIHtkaXNhYmxlZDogIXRoaXMuc3RhdGUuaXNBbmltYXRlZH0pfSBvbkNsaWNrPXtlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zdGF0ZS5pc0FuaW1hdGVkICYmICF0aGlzLnN0YXRlLmlzQW5pbWF0aW5nKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlci5zdGFydCh0aGlzLnN0YXRlLmN1cnJlbnRGcmFtZSwgY3VycmVudEZyYW1lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEZyYW1lOiBjdXJyZW50RnJhbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBbmltYXRpbmc6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+PHNwYW4gY2xhc3NOYW1lPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1wbGF5XCI+PC9zcGFuPjwvYnV0dG9uPiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdidG4nLCAnYnRuLWRlZmF1bHQnLCB7ZGlzYWJsZWQ6ICF0aGlzLnN0YXRlLmlzQW5pbWF0ZWR9KX0gb25DbGljaz17ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUuaXNBbmltYXRlZCAmJiB0aGlzLnN0YXRlLmlzQW5pbWF0aW5nKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlci5zdG9wKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBbmltYXRpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PjxzcGFuIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tcGF1c2VcIj48L3NwYW4+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wteHMtNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzQW5pbWF0ZWQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYW5nZVwiIG1pbj1cIjBcIiBtYXg9eyh0aGlzLnN0YXRlLm51bUZyYW1lcyAtIDEpLnRvU3RyaW5nKCl9IHZhbHVlPXt0aGlzLnN0YXRlLmN1cnJlbnRGcmFtZX0gc3R5bGU9e3ttYXJnaW5Ub3A6ICc1cHgnfX0gb25DaGFuZ2U9e2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RnJhbWU6IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuc3RhdGUuaXNBbmltYXRpbmcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXIuc3RvcCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FuaW1hdGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnModGhpcy5zdGF0ZS5jdXJyZW50RnJhbWUgLyB0aGlzLnN0YXRlLm51bUZyYW1lcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuZHJhd0NvbnRvdXJzKHRoaXMuc3RhdGUuY3VycmVudEZyYW1lIC8gdGhpcy5zdGF0ZS5udW1GcmFtZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IC8+IDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ttYXJnaW5Ub3A6ICcxMHB4J319PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYW52YXNEaXNwbGF5UGFuZSBkaW1zPXtDQU5WQVNfRElNU30gb25Nb3VudENhbGxiYWNrPXtjYW52YXMgPT4ge3RoaXMudXNlQ2FudmFzKGNhbnZhcyk7fX0gb25EaXNtb3VudENhbGxiYWNrPXsoKSA9PiB7dGhpcy5wcm9wcy5tYW5hZ2VyLmRlc3Ryb3lDb250ZXh0KCk7fX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS0xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlBsb3QgRnVuY3Rpb248L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC14cy05XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1pbmxpbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuLWdyb3VwXCIgc3R5bGU9e3ttYXJnaW5SaWdodDogJzEwcHgnfX0gcm9sZT1cImdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdidG4nLCB0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSA/ICdidG4tZGVmYXVsdCcgOiAnYnRuLXByaW1hcnknLCB7J2FjdGl2ZSc6ICF0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZX0pfSBvbkNsaWNrPXsgZSA9PiB7IHRoaXMuc2V0U3RhdGUoe2lzQW5pbWF0ZWRTZWxlY3RTdGF0ZTogZmFsc2V9KTt9IH0+R3JhcGg8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2J0bicsIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlID8gJ2J0bi1wcmltYXJ5JyA6ICdidG4tZGVmYXVsdCcsIHsnYWN0aXZlJzogdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGV9KX0gb25DbGljaz17IGUgPT4geyB0aGlzLnNldFN0YXRlKHtpc0FuaW1hdGVkU2VsZWN0U3RhdGU6IHRydWV9KTt9IH0+QW5pbWF0aW9uPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdmb3JtLWdyb3VwJywgeydoYXMtZXJyb3InOiB0aGlzLmlzTnVtRnJhbWVzSW5wdXRJbnZhbGlkKCl9KX0gc3R5bGU9e3tkaXNwbGF5OiAnaW5saW5lLWJsb2NrJywgbWFyZ2luQm90dG9tOiAwLCB2ZXJ0aWNhbEFsaWduOiAnbWlkZGxlJ319PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5wdXQtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaW5wdXQtZ3JvdXAtYWRkb25cIj5GcmFtZXM8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzTmFtZT1cImZvcm0tY29udHJvbFwiIHZhbHVlPXt0aGlzLnN0YXRlLm51bUZyYW1lc0lucHV0VmFsfSBkaXNhYmxlZD17IXRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlfSByZWY9e2lucHV0ID0+IHt0aGlzLm51bUZyYW1lc0lucHV0ID0gaW5wdXQ7fX0gb25DaGFuZ2U9e2UgPT4ge3RoaXMuc2V0U3RhdGUoe251bUZyYW1lc0lucHV0VmFsOiBlLnRhcmdldC52YWx1ZX0pO319IHN0eWxlPXt7d2lkdGg6ICc2MHB4J319IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCIgc3R5bGU9e3tkaXNwbGF5OiB0aGlzLmlzTnVtRnJhbWVzSW5wdXRJbnZhbGlkKCkgPyAnaW5saW5lLWJsb2NrJyA6ICdub25lJywgbWFyZ2luTGVmdDogJzEwcHgnfX0+TXVzdCBiZSBhbiBpbnRlZ2VyPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wteHMtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzc05hbWU9XCJidG4gYnRuLXN1Y2Nlc3MgYnRuLWJsb2NrIHB1bGwtcmlnaHRcIiBzdHlsZT17e3dpZHRoOiAnODBweCd9fSBkaXNhYmxlZD17dGhpcy5pc051bUZyYW1lc0lucHV0SW52YWxpZCgpfSByZWY9e2J1dHRvbiA9PiB7dGhpcy5wbG90QnV0dG9uID0gYnV0dG9uO319IG9uQ2xpY2s9e3RoaXMuaGFuZGxlUGxvdENsaWNrfT5QbG90PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgdGhpcy5zdGF0ZS5zaGFkZXJDb21waWxlRXJyb3IgPT0gJycgPyBudWxsIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhhcy1lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlbHAtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFlvdXIgY29kZSBmYWlsZWQgdG8gY29tcGlsZSB3aXRoIHRoZSBmb2xsb3dpbmcgZXJyb3I6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRoaXMuc3RhdGUuc2hhZGVyQ29tcGlsZUVycm9yLnRyaW0oKS5zcGxpdCgnXFxuJykubWFwKChsaW5lLCBpbmRleCkgPT4gPHNwYW4ga2V5PXtpbmRleH0+e2xpbmV9PGJyIC8+PC9zcGFuPikgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAodGhpcy5zdGF0ZS5zaGFkZXJDb21waWxlRXJyb3IuaW5kZXhPZignd3Jvbmcgb3BlcmFuZCB0eXBlcycpICE9IC0xKSA/IDxwPjxiPk5vdGUgdGhhdCBHTFNMIEVTIGRvZXMgbm90IGltcGxpY2l0bHkgY2FzdCBpbnRzIHRvIGZsb2F0cy4gV3JpdGUgbnVtYmVycyBsaWtlIFwiMjNcIiBhcyBcIjIzLjBcIi48L2I+PC9wPiA6IG51bGwgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAodGhpcy5zdGF0ZS5zaGFkZXJDb21waWxlRXJyb3IuaW5kZXhPZignZ2xfRnJhZ0RhdGEnKSAhPSAtMSkgPyA8cD48Yj5EaWQgeW91IGZvcmdldCBhIHNlbWljb2xvbiBvbiB0aGUgbGFzdCBsaW5lPzwvYj48L3A+IDogbnVsbCB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlldyB0aGUgY29uc29sZSB0byBzZWUgdGhlIGZ1bGwgZ2VuZXJhdGVkIFdlYkdMIHNoYWRlciBjb2RlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e21hcmdpblRvcDogJzEwcHgnfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFjZUVkaXRvciBoZWlnaHQ9XCIyMDBcIiBrZXk9XCJkcmF3RnVuY0VkaXRvclwiIHJlZj17IGVkaXRvciA9PiB7dGhpcy5kcmF3RnVuY0VkaXRvciA9IGVkaXRvcjt9IH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1zbS0xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkxpYnJhcnkgRnVuY3Rpb25zPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ttYXJnaW5Cb3R0b206ICcxMHB4J319PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2VFZGl0b3IgaGVpZ2h0PVwiMjAwXCIga2V5PVwiaW5jbHVkZVNyY0VkaXRvclwiIHJlZj17IGVkaXRvciA9PiB7dGhpcy5pbmNsdWRlU3JjRWRpdG9yID0gZWRpdG9yO30gfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuICAgIHVzZUNhbnZhcyhjYW52YXMpe1xuICAgICAgICBjb25zdCBkcmFnTWFuYWdlciA9IG5ldyBEcmFnTWFuYWdlcihjYW52YXMsXG4gICAgICAgICAgICBkcmFnVmVjID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIudmlld3BvcnQudHJhbnNsYXRlKGRyYWdWZWMpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXYgPT4gdHJ1ZVxuICAgICAgICApO1xuXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGV2ID0+IHtcbiAgICAgICAgICAgIGlmKGV2LmN0cmxLZXkpe1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlQ29udG91clNwYWNpbmdBbmRSZWRyYXcoZ2V0U2Nyb2xsRGlyKGV2KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5jaGFuZ2Vab29tKC1nZXRTY3JvbGxEaXIoZXYpLCBnZXRDYW52YXNNb3VzZVBvcyhjYW52YXMsIGV2KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWRyYXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucHJvcHMubWFuYWdlci51c2VDYW52YXMoY2FudmFzKTtcbiAgICB9XG4gICAgaXNOdW1GcmFtZXNJbnB1dEludmFsaWQoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuaXNBbmltYXRlZFNlbGVjdFN0YXRlICYmIHRoaXMuc3RhdGUubnVtRnJhbWVzSW5wdXRWYWwuc3BsaXQoJycpLnNvbWUoYyA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYy5jaGFyQ29kZUF0KCkgPCAnMCcuY2hhckNvZGVBdCgpIHx8IGMuY2hhckNvZGVBdCgpID4gJzknLmNoYXJDb2RlQXQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZVBsb3RDbGljayhlKXtcbiAgICAgICAgdGhpcy5zZXREcmF3RnVuYyh0aGlzLmRyYXdGdW5jRWRpdG9yLmdldFZhbHVlKCksIHRoaXMuaW5jbHVkZVNyY0VkaXRvci5nZXRWYWx1ZSgpLCB0aGlzLnN0YXRlLmlzQW5pbWF0ZWRTZWxlY3RTdGF0ZSwgdGhpcy5zdGF0ZS5pc0FuaW1hdGVkU2VsZWN0U3RhdGUgPyBwYXJzZUludCh0aGlzLnN0YXRlLm51bUZyYW1lc0lucHV0VmFsKSA6IDApO1xuICAgIH1cbiAgICByZWRyYXcoKXtcbiAgICAgICAgaWYodGhpcy5zdGF0ZS5pc0FuaW1hdGVkKXtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnModGhpcy5zdGF0ZS5jdXJyZW50RnJhbWUgLyB0aGlzLnN0YXRlLm51bUZyYW1lcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5kcmF3Q29udG91cnMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjaGFuZ2Vab29tQW5kUmVkcmF3KGNoYW5nZUFtb3VudCl7XG4gICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5jaGFuZ2Vab29tKGNoYW5nZUFtb3VudCk7XG4gICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgfVxuICAgIGNoYW5nZUNvbnRvdXJTcGFjaW5nQW5kUmVkcmF3KGNoYW5nZUFtb3VudCl7XG4gICAgICAgIHRoaXMucHJvcHMubWFuYWdlci5jaGFuZ2VDb250b3VyU3BhY2luZyhjaGFuZ2VBbW91bnQpO1xuICAgICAgICB0aGlzLnJlZHJhdygpO1xuICAgIH1cbiAgICB0cmFuc2xhdGVBbmRSZWRyYXcodHJhbnNsYXRlQW1vdW50KXtcbiAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLnRyYW5zbGF0ZSh0cmFuc2xhdGVBbW91bnQubXVsdGlwbHkoNTAuMCkpO1xuICAgICAgICB0aGlzLnJlZHJhdygpO1xuICAgIH1cbiAgICBzZXREcmF3RnVuYyhkcmF3RnVuYywgaW5jbHVkZVNyYywgaXNBbmltYXRlZCA9IGZhbHNlLCBudW1GcmFtZXMgPSAwKXtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5tYW5hZ2VyLmNoYW5nZURyYXdGdW5jKGRyYXdGdW5jLCBpbmNsdWRlU3JjLCBpc0FuaW1hdGVkKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaChlcnIpe1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc2hhZGVyQ29tcGlsZUVycm9yOiBlcnJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoaXNBbmltYXRlZCAmJiBudW1GcmFtZXMgPT0gMCl7XG4gICAgICAgICAgICBudW1GcmFtZXMgPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0FuaW1hdGVkOiBpc0FuaW1hdGVkLFxuICAgICAgICAgICAgaXNBbmltYXRpbmc6IGlzQW5pbWF0ZWQsXG4gICAgICAgICAgICBjdXJyZW50RnJhbWU6IDAsXG4gICAgICAgICAgICBudW1GcmFtZXM6IG51bUZyYW1lcyxcbiAgICAgICAgICAgIGlzQW5pbWF0ZWRTZWxlY3RTdGF0ZTogaXNBbmltYXRlZCxcbiAgICAgICAgICAgIG51bUZyYW1lc0lucHV0VmFsOiBudW1GcmFtZXMudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHNoYWRlckNvbXBpbGVFcnJvcjogJydcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlci5udW1GcmFtZXMgPSBudW1GcmFtZXM7XG4gICAgICAgIGlmKGlzQW5pbWF0ZWQpe1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyLnN0b3AoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlci5zdGFydCgwLCBjdXJyZW50RnJhbWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogY3VycmVudEZyYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlci5zdG9wKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm1hbmFnZXIuZHJhd0NvbnRvdXJzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkRyYXdGdW5jU2VsZWN0KGZ1bmMpe1xuICAgICAgICBjb25zdCBzZWxlY3RlZEZ1bmMgPSBEZW1vRnVuY3Rpb25zLmZ1bmN0aW9uc1tmdW5jXTtcbiAgICAgICAgdGhpcy5kcmF3RnVuY0VkaXRvci5zZXRWYWx1ZShzZWxlY3RlZEZ1bmMuZHJhd0Z1bmMudHJpbSgpKTtcbiAgICAgICAgdGhpcy5pbmNsdWRlU3JjRWRpdG9yLnNldFZhbHVlKHNlbGVjdGVkRnVuYy5pbmNsdWRlU3JjLnRyaW0oKSk7XG4gICAgICAgIGlmKHNlbGVjdGVkRnVuYy5pc0FuaW1hdGVkKXtcbiAgICAgICAgICAgIHRoaXMuc2V0RHJhd0Z1bmMoc2VsZWN0ZWRGdW5jLmRyYXdGdW5jLCBzZWxlY3RlZEZ1bmMuaW5jbHVkZVNyYywgc2VsZWN0ZWRGdW5jLmlzQW5pbWF0ZWQsIHNlbGVjdGVkRnVuYy5udW1GcmFtZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICB0aGlzLnNldERyYXdGdW5jKHNlbGVjdGVkRnVuYy5kcmF3RnVuYywgc2VsZWN0ZWRGdW5jLmluY2x1ZGVTcmMpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZnVuY3Rpb24gaW5pdFJlbmRlcihtYW5hZ2VyKXtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5kZXhDb250YWluZXInKTtcbiAgICBSZWFjdERPTS5yZW5kZXIoXG4gICAgICAgIDxDb250b3VyZXJBcHAgbWFuYWdlcj17bWFuYWdlcn0gLz4sXG4gICAgICAgIGNvbnRhaW5lclxuICAgICk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dpdGh1Yi1yaWJib24nKS5pbm5lckhUTUwgPSAnPGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9rcmF3dGhla3Jvdy9jb250b3VyZXJcIj48aW1nIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IHJpZ2h0OiAwOyBib3JkZXI6IDA7XCIgc3JjPVwiaHR0cHM6Ly9jYW1vLmdpdGh1YnVzZXJjb250ZW50LmNvbS8zNjU5ODZhMTMyY2NkNmE0NGMyM2E5MTY5MDIyYzBiNWM4OTBjMzg3LzY4NzQ3NDcwNzMzYTJmMmY3MzMzMmU2MTZkNjE3YTZmNmU2MTc3NzMyZTYzNmY2ZDJmNjc2OTc0Njg3NTYyMmY3MjY5NjI2MjZmNmU3MzJmNjY2ZjcyNmI2ZDY1NWY3MjY5Njc2ODc0NWY3MjY1NjQ1ZjYxNjEzMDMwMzAzMDJlNzA2ZTY3XCIgYWx0PVwiRm9yayBtZSBvbiBHaXRIdWJcIiBkYXRhLWNhbm9uaWNhbC1zcmM9XCJodHRwczovL3MzLmFtYXpvbmF3cy5jb20vZ2l0aHViL3JpYmJvbnMvZm9ya21lX3JpZ2h0X3JlZF9hYTAwMDAucG5nXCI+PC9hPic7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmNsYXNzIEdQR1BVS2VybmVsUmVzdWx0e1xuICAgIGNvbnN0cnVjdG9yKGN0eCwgZmJvLCB0ZXh0dXJlcyl7XG4gICAgICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgICAgICB0aGlzLmZibyA9IGZibztcbiAgICAgICAgdGhpcy50ZXh0dXJlcyA9IHRleHR1cmVzO1xuICAgIH1cbiAgICBkaXNwb3NlKCl7XG4gICAgICAgIGlmKHRoaXMuZmJvICE9IG51bGwpe1xuICAgICAgICAgICAgdGhpcy5jdHguZGVsZXRlRnJhbWVidWZmZXIodGhpcy5mYm8pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dHVyZXMuZm9yRWFjaCh0ZXh0dXJlID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3R4LmRlbGV0ZVRleHR1cmUodGV4dHVyZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbmNsYXNzIEdQR1BVS2VybmVse1xuICAgIGNvbnN0cnVjdG9yKG1hbmFnZXIsIHByb2dyYW0sIHBhcmFtcyA9IFtdLCBudW1PdXRwdXRzID0gMSwgaXNHcmFwaGljYWwgPSBmYWxzZSl7XG4gICAgICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXI7XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgICAgICB0aGlzLm51bU91dHB1dHMgPSBudW1PdXRwdXRzO1xuICAgICAgICB0aGlzLmlzR3JhcGhpY2FsID0gaXNHcmFwaGljYWw7XG4gICAgfVxuICAgIGdldCBjdHgoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFuYWdlci5jdHg7XG4gICAgfVxuICAgIGdldCBleHREQigpe1xuICAgICAgICByZXR1cm4gdGhpcy5tYW5hZ2VyLmV4dERCO1xuICAgIH1cbiAgICBydW4oaW5wdXRUZXh0dXJlcywgb3V0cHV0RGltcywgcGFyYW1WYWxzID0ge30sIHVzZUZsb2F0ID0gdHJ1ZSl7XG4gICAgICAgIHRoaXMuY3R4LnVzZVByb2dyYW0odGhpcy5wcm9ncmFtKTtcbiAgICAgICAgcmVnaXN0ZXJVbmlmb3Jtcyh0aGlzLmN0eCwgdGhpcy5wcm9ncmFtLCB0aGlzLnBhcmFtcywgcGFyYW1WYWxzKTtcbiAgICAgICAgcmVnaXN0ZXJVbmlmb3Jtcyh0aGlzLmN0eCwgdGhpcy5wcm9ncmFtLCBbe1xuICAgICAgICAgICAgbmFtZTogJ3VEaW1zJyxcbiAgICAgICAgICAgIHR5cGU6ICdpdmVjMidcbiAgICAgICAgfV0sIHtcbiAgICAgICAgICAgIHVEaW1zOiBvdXRwdXREaW1zLnRvQXJyYXkoKVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBvdXRwdXRUZXh0dXJlcyA9IGNvbXB1dGUxREFycmF5KHRoaXMubnVtT3V0cHV0cywgaSA9PlxuICAgICAgICAgICAgY3JlYXRlQ29tcHV0ZVRleHR1cmUodGhpcy5jdHgsIG91dHB1dERpbXMsIHVzZUZsb2F0ID8gdGhpcy5jdHguRkxPQVQgOiB0aGlzLmN0eC5VTlNJR05FRF9CWVRFKVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGZibyA9IHRoaXMuaXNHcmFwaGljYWwgPyBudWxsIDogY3JlYXRlRkJPKHRoaXMuY3R4LCB0aGlzLmV4dERCLCBvdXRwdXRUZXh0dXJlcyk7XG4gICAgICAgIHRoaXMuY3R4LmJpbmRGcmFtZWJ1ZmZlcih0aGlzLmN0eC5GUkFNRUJVRkZFUiwgZmJvKTtcblxuICAgICAgICBiaW5kVGV4dHVyZXModGhpcy5jdHgsIGlucHV0VGV4dHVyZXMpO1xuXG4gICAgICAgIHRoaXMuY3R4LnZpZXdwb3J0KDAsIDAsIG91dHB1dERpbXMud2lkdGgsIG91dHB1dERpbXMuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5tYW5hZ2VyLmRyYXdGdWxsc2NyZWVuUXVhZCh0aGlzLnByb2dyYW0pO1xuXG4gICAgICAgIHJldHVybiBuZXcgR1BHUFVLZXJuZWxSZXN1bHQodGhpcy5jdHgsIGZibywgb3V0cHV0VGV4dHVyZXMpO1xuICAgIH1cbn07XG5cbmNsYXNzIEdQR1BVTWFuYWdlcntcbiAgICBjb25zdHJ1Y3RvcihjdHgsIHVzZUZsb2F0ID0gdHJ1ZSl7XG4gICAgICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgICAgICB0aGlzLmV4dERCID0gdGhpcy5jdHguZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kcmF3X2J1ZmZlcnMnKTtcbiAgICAgICAgaWYodXNlRmxvYXQpe1xuICAgICAgICAgICAgdGhpcy5jdHguZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9mbG9hdCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5xdWFkUG9zQnVmZmVyID0gY3JlYXRlQXJyYXlCdWZmZXIodGhpcy5jdHgsIHRoaXMuY3R4LkFSUkFZX0JVRkZFUiwgRlVMTFNDUkVFTl9RVUFEX1BPU19BUlJBWSk7XG4gICAgICAgIHRoaXMucXVhZEluZGV4QnVmZmVyID0gY3JlYXRlQXJyYXlCdWZmZXIodGhpcy5jdHgsIHRoaXMuY3R4LkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBGVUxMU0NSRUVOX1FVQURfSU5ERVhfQVJSQVkpO1xuICAgIH1cbiAgICBkcmF3RnVsbHNjcmVlblF1YWQocHJvZ3JhbSl7XG4gICAgICAgIHRoaXMuY3R4LnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgIHRoaXMuY3R4LmJpbmRCdWZmZXIodGhpcy5jdHguRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHRoaXMucXVhZEluZGV4QnVmZmVyKTtcbiAgICAgICAgdGhpcy5jdHguZHJhd0VsZW1lbnRzKHRoaXMuY3R4LlRSSUFOR0xFX1NUUklQLCBGVUxMU0NSRUVOX1FVQURfTlVNX1ZFUlRJQ0VTLCB0aGlzLmN0eC5VTlNJR05FRF9TSE9SVCwgMCk7XG4gICAgfVxuICAgIHJlYWRQYWNrZWRGbG9hdERhdGEoZGltcyl7XG4gICAgICAgIGNvbnN0IGJ1ZiA9IG5ldyBVaW50OEFycmF5KGRpbXMuZ2V0QXJlYSgpICogNCk7XG4gICAgICAgIHRoaXMuY3R4LnJlYWRQaXhlbHMoMCwgMCwgZGltcy53aWR0aCwgZGltcy5oZWlnaHQsIHRoaXMuY3R4LlJHQkEsIHRoaXMuY3R4LlVOU0lHTkVEX0JZVEUsIGJ1Zik7XG4gICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KGJ1Zi5idWZmZXIpO1xuICAgIH1cbiAgICBhcnJheVRvVGV4dHVyZShkaW1zLCBhcnIsIHVzZUZsb2F0ID0gdHJ1ZSl7XG4gICAgICAgIGNvbnN0IGZsb2F0RmxhdHRlbmVkQXJyID0gbmV3IEZsb2F0MzJBcnJheShmbGF0dGVuKGZsYXR0ZW4oYXJyKSkpXG4gICAgICAgIGNvbnN0IGZsYXR0ZW5lZEFyciA9IHVzZUZsb2F0ID8gZmxvYXRGbGF0dGVuZWRBcnIgOiAobmV3IFVpbnQ4QXJyYXkoZmxhdHRlbmVkQXJyLmJ1ZmZlcikpO1xuICAgICAgICByZXR1cm4gY3JlYXRlQ29tcHV0ZVRleHR1cmUodGhpcy5jdHgsIGRpbXMsIHVzZUZsb2F0ID8gdGhpcy5jdHguRkxPQVQgOiB0aGlzLmN0eC5VTlNJR05FRF9CWVRFLCBmbGF0dGVuZWRBcnIpO1xuICAgIH1cbiAgICB0ZXh0dXJlVG9BcnJheShkaW1zLCB0ZXgsIHVzZUZsb2F0ID0gdHJ1ZSwgY29tcG9uZW50ID0gMCl7XG4gICAgICAgIGNvbnN0IGNvbXB1dGVGdW5jID0gXG5gdmVjNCBjVmFsID0gdGV4dHVyZTJEKHVJbnB1dCwgdkNvb3JkKTtcbmdsX0ZyYWdEYXRhWzBdID0gYCArICh1c2VGbG9hdCA/IChgcGFja0Zsb2F0KGNWYWwuYCArICd4eXp3J1tjb21wb25lbnRdICsgYClgKSA6IGBjVmFsYCkgKyBgO1xuYDtcbiAgICAgICAgY29uc3QgaW5wdXROYW1lcyA9IFsndUlucHV0J107XG4gICAgICAgIGNvbnN0IGtlcm5lbCA9IHRoaXMuY3JlYXRlS2VybmVsKFxuICAgICAgICAgICAgY29tcHV0ZUZ1bmMsXG4gICAgICAgICAgICBpbnB1dE5hbWVzLFxuICAgICAgICAgICAgZGltcyxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgMSxcbiAgICAgICAgICAgIEdQR1BVTWFuYWdlci5QQUNLX0ZMT0FUX0lOQ0xVREVcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZXN1bHRzID0ga2VybmVsLnJ1bihbdGV4XSwgZGltcywge30sIGZhbHNlKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gdGhpcy5yZWFkUGFja2VkRmxvYXREYXRhKGRpbXMpO1xuICAgICAgICByZXN1bHRzLmRpc3Bvc2UoKTtcblxuICAgICAgICByZXR1cm4gY29tcHV0ZTJEQXJyYXkoZGltcywgcG9zID0+XG4gICAgICAgICAgICBvdXRwdXRbcG9zLnkgKiBkaW1zLndpZHRoICsgcG9zLnhdXG4gICAgICAgICk7XG4gICAgfVxuICAgIGNyZWF0ZUtlcm5lbChjb21wdXRlRnVuYywgaW5wdXROYW1lcywgb3V0cHV0RGltcywgcGFyYW1zID0gW10sIG51bU91dHB1dHMgPSAxLCBpbmNsdWRlU3JjID0gJycsIGlzR3JhcGhpY2FsID0gZmFsc2Upe1xuICAgICAgICBjb25zdCB1bmlmb3JtcyA9IFtdLmNvbmNhdChwYXJhbXMsIGlucHV0TmFtZXMubWFwKFxuICAgICAgICAgICAgaW5wdXROYW1lID0+ICh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3NhbXBsZXIyRCcsXG4gICAgICAgICAgICAgICAgbmFtZTogaW5wdXROYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICApLFt7XG4gICAgICAgICAgICB0eXBlOiAnaXZlYzInLFxuICAgICAgICAgICAgbmFtZTogJ3VEaW1zJ1xuICAgICAgICB9XSk7XG4gICAgICAgIGNvbnN0IHZlcnRTaGFkZXJTcmMgPSBHUEdQVU1hbmFnZXIuY3JlYXRlVmVydFNoYWRlclNyYyhpc0dyYXBoaWNhbCk7XG4gICAgICAgIGNvbnN0IGZyYWdTaGFkZXJTcmMgPSBHUEdQVU1hbmFnZXIuY3JlYXRlRnJhZ1NoYWRlclNyYyhjb21wdXRlRnVuYy50cmltKCkuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+ICcgICAgJyArIGxpbmUpLmpvaW4oJ1xcbicpICsgJ1xcbicsIHVuaWZvcm1zLCBpbmNsdWRlU3JjLCBudW1PdXRwdXRzID4gMSk7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtKHRoaXMuY3R4LCB2ZXJ0U2hhZGVyU3JjLCBmcmFnU2hhZGVyU3JjKTtcblxuICAgICAgICB0aGlzLmN0eC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICByZWdpc3RlclZlcnRleEF0dHJpYih0aGlzLmN0eCwgcHJvZ3JhbSwgJ2FQb3MnLCAyLCB0aGlzLnF1YWRQb3NCdWZmZXIpO1xuICAgICAgICByZWdpc3RlclRleHR1cmVzKHRoaXMuY3R4LCBwcm9ncmFtLCBpbnB1dE5hbWVzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBHUEdQVUtlcm5lbCh0aGlzLCBwcm9ncmFtLCBwYXJhbXMsIG51bU91dHB1dHMsIGlzR3JhcGhpY2FsKTtcbiAgICB9XG4gICAgY3JlYXRlR3JhcGhpY2FsS2VybmVsKGNvbXB1dGVGdW5jLCBpbnB1dE5hbWVzLCBvdXRwdXREaW1zLCBwYXJhbXMgPSBbXSwgaW5jbHVkZVNyYyA9ICcnKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlS2VybmVsKGNvbXB1dGVGdW5jLCBpbnB1dE5hbWVzLCBvdXRwdXREaW1zLCBwYXJhbXMsIDAsIGluY2x1ZGVTcmMsIHRydWUpO1xuICAgIH1cbn07XG5cbi8vIENyZWRpdDogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vVG9vVGFsbE5hdGUvNDc1MDk1M1xuR1BHUFVNYW5hZ2VyLmVuZGlhbm5lc3MgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGIgPSBuZXcgQXJyYXlCdWZmZXIoNCk7XG4gICAgY29uc3QgYSA9IG5ldyBVaW50MzJBcnJheShiKTtcbiAgICBjb25zdCBjID0gbmV3IFVpbnQ4QXJyYXkoYik7XG4gICAgYVswXSA9IDB4ZGVhZGJlZWY7XG4gICAgaWYgKGNbMF0gPT0gMHhlZikgcmV0dXJuICdMRSc7XG4gICAgaWYgKGNbMF0gPT0gMHhkZSkgcmV0dXJuICdCRSc7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGVuZGlhbm5lc3MnKTtcbn0pKCk7XG5cbkdQR1BVTWFuYWdlci5nZXRDYW52YXNDb250ZXh0ID0gY2FudmFzID0+IHtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBkZXB0aDogZmFsc2UsXG4gICAgICAgIGFudGlhbGlhczogZmFsc2VcbiAgICB9O1xuICAgIHJldHVybiBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnLCBvcHRpb25zKSB8fCBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wtZXhwZXJpbWVudGFsJywgb3B0aW9ucyk7XG59O1xuXG5HUEdQVU1hbmFnZXIuY3JlYXRlVmVydFNoYWRlclNyYyA9IChmbGlwWSA9IGZhbHNlKSA9PlxuYHByZWNpc2lvbiBoaWdocCBmbG9hdDtcblxuYXR0cmlidXRlIHZlYzIgYVBvcztcblxudmFyeWluZyB2ZWMyIHZDb29yZDtcblxudm9pZCBtYWluKCl7XG4gICAgZ2xfUG9zaXRpb24gPSB2ZWM0KGAgK1xuICAgIChmbGlwWSA/IGBhUG9zLngsIC1hUG9zLnlgIDogYGFQb3NgKSArXG4gICAgYCwgMC4wLCAxLjApO1xuICAgIHZDb29yZCA9IChhUG9zICsgMS4wKSAvIDIuMDtcbn1gO1xuXG4vLy9cbi8vLyBBZGFwdGVkIGZyb20gZ3B1LmpzXG4vLy8gaHR0cDovL2dwdS5yb2Nrcy9cbi8vL1xuLy8vIEdQVSBBY2NlbGVyYXRlZCBKYXZhU2NyaXB0XG4vLy9cbi8vLyBAdmVyc2lvbiAwLjAuMFxuLy8vIEBkYXRlICAgIE1vbiBKdWwgMDQgMjAxNiAwMDo0NzowNyBHTVQrMDgwMCAoU0dUKVxuLy8vXG4vLy8gQGxpY2Vuc2UgTUlUXG4vLy8gVGhlIE1JVCBMaWNlbnNlXG4vLy9cbi8vLyBDb3B5cmlnaHQgKGMpIDIwMTYgRmF6bGkgU2FwdWFuLCBNYXR0aGV3IFNhdywgRXVnZW5lIENoZWFoIGFuZCBKdWxpYSBMb3dcbi8vL1xuLy8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy8vXG4vLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vLyBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vL1xuLy8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4vLy8gVEhFIFNPRlRXQVJFLlxuLy8vXG5cbkdQR1BVTWFuYWdlci5QQUNLX0ZMT0FUX0lOQ0xVREUgPVxuYGZsb2F0IHJvdW5kKGZsb2F0IHgpIHtcbiAgICByZXR1cm4gZmxvb3IoeCArIDAuNSk7XG59XG5cbnZlYzIgaW50ZWdlck1vZCh2ZWMyIHgsIGZsb2F0IHkpIHtcbiAgICB2ZWMyIHJlcyA9IGZsb29yKG1vZCh4LCB5KSk7XG4gICAgcmV0dXJuIHJlcyAqIHN0ZXAoMS4wIC0gZmxvb3IoeSksIC1yZXMpO1xufVxuXG5mbG9hdCBpbnRlZ2VyTW9kKGZsb2F0IHgsIGZsb2F0IHkpIHtcbiAgICBmbG9hdCByZXMgPSBmbG9vcihtb2QoeCwgeSkpO1xuICAgIHJldHVybiByZXMgKiAocmVzID4gZmxvb3IoeSkgLSAxLjAgPyAwLjAgOiAxLjApO1xufVxuXG5jb25zdCB2ZWMyIE1BR0lDX1ZFQyA9IHZlYzIoMS4wLCAtMjU2LjApO1xuY29uc3QgdmVjNCBTQ0FMRV9GQUNUT1IgPSB2ZWM0KDEuMCwgMjU2LjAsIDY1NTM2LjAsIDAuMCk7XG5jb25zdCB2ZWM0IFNDQUxFX0ZBQ1RPUl9JTlYgPSB2ZWM0KDEuMCwgMC4wMDM5MDYyNSwgMC4wMDAwMTUyNTg3ODkwNjI1LCAwLjApOyAvLyAxLCAxLzI1NiwgMS82NTUzNlxuZmxvYXQgdW5wYWNrRmxvYXQodmVjNCByZ2JhKSB7XG5gICsgKChHUEdQVU1hbmFnZXIuZW5kaWFubmVzcyA9PSAnTEUnKSA/ICcnIDpcbmAgICAgcmdiYS5yZ2JhID0gcmdiYS5hYmdyO1xuYCkgK1xuYCAgICByZ2JhICo9IDI1NS4wO1xuICAgIHZlYzIgZ3RlMTI4O1xuICAgIGd0ZTEyOC54ID0gcmdiYS5iID49IDEyOC4wID8gMS4wIDogMC4wO1xuICAgIGd0ZTEyOC55ID0gcmdiYS5hID49IDEyOC4wID8gMS4wIDogMC4wO1xuICAgIGZsb2F0IGV4cG9uZW50ID0gMi4wICogcmdiYS5hIC0gMTI3LjAgKyBkb3QoZ3RlMTI4LCBNQUdJQ19WRUMpO1xuICAgIGZsb2F0IHJlcyA9IGV4cDIocm91bmQoZXhwb25lbnQpKTtcbiAgICByZ2JhLmIgPSByZ2JhLmIgLSAxMjguMCAqIGd0ZTEyOC54O1xuICAgIHJlcyA9IGRvdChyZ2JhLCBTQ0FMRV9GQUNUT1IpICogZXhwMihyb3VuZChleHBvbmVudC0yMy4wKSkgKyByZXM7XG4gICAgcmVzICo9IGd0ZTEyOC55ICogLTIuMCArIDEuMDtcbiAgICByZXR1cm4gcmVzO1xufVxuXG52ZWM0IHBhY2tGbG9hdChmbG9hdCBmKSB7XG4gICAgZmxvYXQgRiA9IGFicyhmKTtcbiAgICBmbG9hdCBzaWduID0gZiA8IDAuMCA/IDEuMCA6IDAuMDtcbiAgICBmbG9hdCBleHBvbmVudCA9IGZsb29yKGxvZzIoRikpO1xuICAgIGZsb2F0IG1hbnRpc3NhID0gKGV4cDIoLWV4cG9uZW50KSAqIEYpO1xuICAgIC8vIGV4cG9uZW50ICs9IGZsb29yKGxvZzIobWFudGlzc2EpKTtcbiAgICB2ZWM0IHJnYmEgPSB2ZWM0KEYgKiBleHAyKDIzLjAtZXhwb25lbnQpKSAqIFNDQUxFX0ZBQ1RPUl9JTlY7XG4gICAgcmdiYS5yZyA9IGludGVnZXJNb2QocmdiYS5yZywgMjU2LjApO1xuICAgIHJnYmEuYiA9IGludGVnZXJNb2QocmdiYS5iLCAxMjguMCk7XG4gICAgcmdiYS5hID0gZXhwb25lbnQqMC41ICsgNjMuNTtcbiAgICByZ2JhLmJhICs9IHZlYzIoaW50ZWdlck1vZChleHBvbmVudCsxMjcuMCwgMi4wKSwgc2lnbikgKiAxMjguMDtcbiAgICByZ2JhID0gZmxvb3IocmdiYSk7XG4gICAgcmdiYSAqPSAwLjAwMzkyMTU2OTsgLy8gMS8yNTVcbmAgKyAoKEdQR1BVTWFuYWdlci5lbmRpYW5uZXNzID09ICdMRScpID8gJycgOlxuYCAgICByZ2JhLnJnYmEgPSByZ2JhLmFiZ3I7XG5gKSArXG5gICAgIHJldHVybiByZ2JhO1xufVxuXG5gO1xuXG5HUEdQVU1hbmFnZXIuY3JlYXRlRnJhZ1NoYWRlclNyYyA9IChjb21wdXRlRnVuYywgdW5pZm9ybXMsIGluY2x1ZGVTcmMgPSAnJywgdXNlRHJhd0J1ZmZlcnMgPSB0cnVlKSA9PiBbXG4gICAgdXNlRHJhd0J1ZmZlcnMgP1xuYCNleHRlbnNpb24gR0xfRVhUX2RyYXdfYnVmZmVyczogcmVxdWlyZVxuYCA6ICcnLFxuYHByZWNpc2lvbiBoaWdocCBmbG9hdDtcbnByZWNpc2lvbiBoaWdocCBzYW1wbGVyMkQ7XG5cbiNkZWZpbmUgRVBTIDAuMDAwMDAwMVxuXG5gLFxuICAgIC4uLnVuaWZvcm1zLm1hcCh1bmlmb3JtID0+XG5gdW5pZm9ybSBgICsgdW5pZm9ybS50eXBlICsgYCBgICsgdW5pZm9ybS5uYW1lICsgYDtcbmBcbiAgICApLFxuYFxudmFyeWluZyB2ZWMyIHZDb29yZDtcblxudmVjNCBhcnJHZXQoc2FtcGxlcjJEIGFyciwgaXZlYzIgaWQpe1xuICAgIHJldHVybiB0ZXh0dXJlMkQoYXJyLCAodmVjMihpZCkgKyB2ZWMyKDAuNSkpIC8gdmVjMih1RGltcykpO1xufVxuXG5gLFxuICAgIGluY2x1ZGVTcmMsXG5gdm9pZCBtYWluKCl7XG4gICAgaXZlYzIgdGhyZWFkSWQgPSBpdmVjMih2Q29vcmQgKiB2ZWMyKHVEaW1zKSk7XG5gLFxuICAgIGNvbXB1dGVGdW5jLFxuYH1gXS5qb2luKCcnKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuY2xhc3MgRGVtb0Z1bmN0aW9uc3tcbn07XG5cbkRlbW9GdW5jdGlvbnMuSU5DTFVERVMgPSB7XG4gICAgcGk6XG5gY29uc3QgZmxvYXQgUEkgPSAzLjE0MTU5MjY1MzU4OTc5MzIzODQ2MjY0MzM4MzI3OTU7XG5cbmAsXG4gICAgY29tcGxleExpYjpcbmB2ZWMyIGNvbXBsZXhNdWx0KHZlYzIgYSwgdmVjMiBiKXtcbiAgICByZXR1cm4gdmVjMihhLnggKiBiLnggLSBhLnkgKiBiLnksIGEueSAqIGIueCArIGEueCAqIGIueSk7XG59XG5cbnZlYzIgY29tcGxleERpdih2ZWMyIGEsIHZlYzIgYil7XG4gICAgZmxvYXQgZGl2aXNvciA9IGRvdChiLCBiKTtcbiAgICByZXR1cm4gdmVjMihkb3QoYSwgYiksIGEueSAqIGIueCAtIGEueCAqIGIueSkgLyBkaXZpc29yO1xufVxuXG52ZWMyIGNvbXBsZXhQb3codmVjMiBhLCB2ZWMyIGIpe1xuICAgIGZsb2F0IHIgPSBsZW5ndGgoYSksIHBoaSA9IGF0YW4oYS55LCBhLngpO1xuICAgIGZsb2F0IG5ld1IgPSBwb3cociwgYi54KSAqIGV4cCgtYi55ICogcGhpKTtcbiAgICBmbG9hdCBuZXdQaGkgPSBiLnkgKiBsb2cocikgKyBiLnggKiBwaGk7XG4gICAgcmV0dXJuIG5ld1IgKiB2ZWMyKGNvcyhuZXdQaGkpLCBzaW4obmV3UGhpKSk7XG59XG5cbnZlYzIgY29tcGxleEV4cCh2ZWMyIGIpe1xuICAgIHJldHVybiBleHAoYi54KSAqIHZlYzIoY29zKGIueSksIHNpbihiLnkpKTtcbn1cblxudmVjMiBjb21wbGV4TG9nKHZlYzIgeCl7XG4gICAgcmV0dXJuIHZlYzIobG9nKGxlbmd0aCh4KSksIGF0YW4oeC55LCB4LngpKTtcbn1cblxuYCxcbiAgICBnYW1tYTpcbmAvKipcbiAqIFRyYW5zbGF0ZWQgdG8gT3BlbkdMIEVTIGZyb20gbWF0aC5qc1xuICogaHR0cHM6Ly9naXRodWIuY29tL2pvc2Rlam9uZy9tYXRoanNcbiAqXG4gKiBNYXRoLmpzIGlzIGFuIGV4dGVuc2l2ZSBtYXRoIGxpYnJhcnkgZm9yIEphdmFTY3JpcHQgYW5kIE5vZGUuanMsXG4gKiBJdCBmZWF0dXJlcyByZWFsIGFuZCBjb21wbGV4IG51bWJlcnMsIHVuaXRzLCBtYXRyaWNlcywgYSBsYXJnZSBzZXQgb2ZcbiAqIG1hdGhlbWF0aWNhbCBmdW5jdGlvbnMsIGFuZCBhIGZsZXhpYmxlIGV4cHJlc3Npb24gcGFyc2VyLlxuICpcbiAqIEB2ZXJzaW9uIDMuMi4xXG4gKiBAZGF0ZSAgICAyMDE2LTA0LTI2XG4gKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoQykgMjAxMy0yMDE2IEpvcyBkZSBKb25nIDx3am9zZGVqb25nQGdtYWlsLmNvbT5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdFxuICogdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUXG4gKiBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGVcbiAqIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyXG4gKiB0aGUgTGljZW5zZS5cbiAqL1xuXG52ZWMyIGdhbW1hU3RlcCh2ZWMyIHgsIGludCBpLCB2ZWMyIG4sIGZsb2F0IHApe1xuICAgIGZsb2F0IHJlYWwgPSBuLnggKyBmbG9hdChpKTtcbiAgICBmbG9hdCBkZW4gPSByZWFsICogcmVhbCArIG4ueSAqIG4ueTtcbiAgICBpZihkZW4gIT0gMC4wKXtcbiAgICAgICAgcmV0dXJuIHggKyB2ZWMyKHAgKiByZWFsIC8gZGVuLCAtKHAgKiBuLnkpIC8gZGVuKTtcbiAgICB9XG4gICAgZWxzZSByZXR1cm4gdmVjMigwLjApO1xufVxuXG52ZWMyIGdhbW1hKHZlYzIgbil7XG4gICAgbi54IC09IDEuMDtcbiAgICB2ZWMyIHggPSB2ZWMyKDAuOTk5OTk5OTk5OTk5OTk3MDkxODIsIDAuMCk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgMSwgbiwgNTcuMTU2MjM1NjY1ODYyOTIzNTE3KTtcblx0eCA9IGdhbW1hU3RlcCh4LCAyLCBuLCAtNTkuNTk3OTYwMzU1NDc1NDkxMjQ4KTtcblx0eCA9IGdhbW1hU3RlcCh4LCAzLCBuLCAxNC4xMzYwOTc5NzQ3NDE3NDcxNzQpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDQsIG4sIC0wLjQ5MTkxMzgxNjA5NzYyMDE5OTc4KTtcblx0eCA9IGdhbW1hU3RlcCh4LCA1LCBuLCAwLjMzOTk0NjQ5OTg0ODExODg4Njk5ZS00KTtcblx0eCA9IGdhbW1hU3RlcCh4LCA2LCBuLCAwLjQ2NTIzNjI4OTI3MDQ4NTc1NjY1ZS00KTtcblx0eCA9IGdhbW1hU3RlcCh4LCA3LCBuLCAtMC45ODM3NDQ3NTMwNDg3OTU2NDY3N2UtNCk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgOCwgbiwgMC4xNTgwODg3MDMyMjQ5MTI0ODg4NGUtMyk7XG5cdHggPSBnYW1tYVN0ZXAoeCwgOSwgbiwgLTAuMjEwMjY0NDQxNzI0MTA0ODgzMTllLTMpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDEwLCBuLCAwLjIxNzQzOTYxODExNTIxMjY0MzIwZS0zKTtcblx0eCA9IGdhbW1hU3RlcCh4LCAxMSwgbiwgLTAuMTY0MzE4MTA2NTM2NzYzODkwMjJlLTMpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDEyLCBuLCAwLjg0NDE4MjIzOTgzODUyNzQzMjkzZS00KTtcblx0eCA9IGdhbW1hU3RlcCh4LCAxMywgbiwgLTAuMjYxOTA4Mzg0MDE1ODE0MDg2NzBlLTQpO1xuXHR4ID0gZ2FtbWFTdGVwKHgsIDE0LCBuLCAwLjM2ODk5MTgyNjU5NTMxNjIyNzA0ZS01KTtcbiAgICB2ZWMyIHQgPSB2ZWMyKG4ueCArIDQuNzQyMTg3NSArIDAuNSwgbi55KTtcbiAgICBmbG9hdCB0d29QaVNxcnQgPSBzcXJ0KDIuMCAqIFBJKTtcblxuICAgIG4ueCArPSAwLjU7XG4gICAgdmVjMiByZXN1bHQgPSBjb21wbGV4UG93KHQsIG4pO1xuICAgIHJlc3VsdCAqPSB0d29QaVNxcnQ7XG4gICAgZmxvYXQgciA9IGV4cCgtdC54KTtcbiAgICB0ID0gciAqIHZlYzIoY29zKC10LnkpLCBzaW4oLXQueSkpO1xuXG4gICAgcmV0dXJuIGNvbXBsZXhNdWx0KGNvbXBsZXhNdWx0KHJlc3VsdCwgdCksIHgpO1xufVxuXG5gLFxuICAgIHJvdGF0ZVdpdGhUaW1lOlxuYHZlYzIgcm90YXRlV2l0aFRpbWUodmVjMiB2KXtcbiAgICBmbG9hdCBjb3NUID0gY29zKHRpbWUgKiAyLjAgKiBQSSksIHNpblQgPSBzaW4odGltZSAqIDIuMCAqIFBJKTtcbiAgICByZXR1cm4gdmVjMihcbiAgICAgICAgdi54ICogY29zVCAtIHYueSAqIHNpblQsXG4gICAgICAgIHYueCAqIHNpblQgKyB2LnkgKiBjb3NUXG4gICAgKTtcbn1cblxuYCxcbiAgICBzbm9pc2U6XG5gLy9cbi8vIERlc2NyaXB0aW9uIDogQXJyYXkgYW5kIHRleHR1cmVsZXNzIEdMU0wgMkQvM0QvNEQgc2ltcGxleCBcbi8vICAgICAgICAgICAgICAgbm9pc2UgZnVuY3Rpb25zLlxuLy8gICAgICBBdXRob3IgOiBJYW4gTWNFd2FuLCBBc2hpbWEgQXJ0cy5cbi8vICBNYWludGFpbmVyIDogc3RlZ3Vcbi8vICAgICBMYXN0bW9kIDogMjAxMTA4MjIgKGlqbSlcbi8vICAgICBMaWNlbnNlIDogQ29weXJpZ2h0IChDKSAyMDExIEFzaGltYSBBcnRzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gICAgICAgICAgICAgICBEaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMSUNFTlNFIGZpbGUuXG4vLyAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hc2hpbWEvd2ViZ2wtbm9pc2Vcbi8vICAgICAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL3N0ZWd1L3dlYmdsLW5vaXNlXG4vLyBcblxudmVjNCBtb2QyODkodmVjNCB4KSB7XG4gIHJldHVybiB4IC0gZmxvb3IoeCAqICgxLjAgLyAyODkuMCkpICogMjg5LjA7IH1cblxuZmxvYXQgbW9kMjg5KGZsb2F0IHgpIHtcbiAgcmV0dXJuIHggLSBmbG9vcih4ICogKDEuMCAvIDI4OS4wKSkgKiAyODkuMDsgfVxuXG52ZWM0IHBlcm11dGUodmVjNCB4KSB7XG4gICAgIHJldHVybiBtb2QyODkoKCh4KjM0LjApKzEuMCkqeCk7XG59XG5cbmZsb2F0IHBlcm11dGUoZmxvYXQgeCkge1xuICAgICByZXR1cm4gbW9kMjg5KCgoeCozNC4wKSsxLjApKngpO1xufVxuXG52ZWM0IHRheWxvckludlNxcnQodmVjNCByKVxue1xuICByZXR1cm4gMS43OTI4NDI5MTQwMDE1OSAtIDAuODUzNzM0NzIwOTUzMTQgKiByO1xufVxuXG5mbG9hdCB0YXlsb3JJbnZTcXJ0KGZsb2F0IHIpXG57XG4gIHJldHVybiAxLjc5Mjg0MjkxNDAwMTU5IC0gMC44NTM3MzQ3MjA5NTMxNCAqIHI7XG59XG5cbnZlYzQgZ3JhZDQoZmxvYXQgaiwgdmVjNCBpcClcbiAge1xuICBjb25zdCB2ZWM0IG9uZXMgPSB2ZWM0KDEuMCwgMS4wLCAxLjAsIC0xLjApO1xuICB2ZWM0IHAscztcblxuICBwLnh5eiA9IGZsb29yKCBmcmFjdCAodmVjMyhqKSAqIGlwLnh5eikgKiA3LjApICogaXAueiAtIDEuMDtcbiAgcC53ID0gMS41IC0gZG90KGFicyhwLnh5eiksIG9uZXMueHl6KTtcbiAgcyA9IHZlYzQobGVzc1RoYW4ocCwgdmVjNCgwLjApKSk7XG4gIHAueHl6ID0gcC54eXogKyAocy54eXoqMi4wIC0gMS4wKSAqIHMud3d3OyBcblxuICByZXR1cm4gcDtcbiAgfVxuXHRcdFx0XHRcdFx0XG4vLyAoc3FydCg1KSAtIDEpLzQgPSBGNCwgdXNlZCBvbmNlIGJlbG93XG4jZGVmaW5lIEY0IDAuMzA5MDE2OTk0Mzc0OTQ3NDUxXG5cbmZsb2F0IHNub2lzZSh2ZWM0IHYpXG4gIHtcbiAgY29uc3QgdmVjNCAgQyA9IHZlYzQoIDAuMTM4MTk2NjAxMTI1MDExLCAgLy8gKDUgLSBzcXJ0KDUpKS8yMCAgRzRcbiAgICAgICAgICAgICAgICAgICAgICAgIDAuMjc2MzkzMjAyMjUwMDIxLCAgLy8gMiAqIEc0XG4gICAgICAgICAgICAgICAgICAgICAgICAwLjQxNDU4OTgwMzM3NTAzMiwgIC8vIDMgKiBHNFxuICAgICAgICAgICAgICAgICAgICAgICAtMC40NDcyMTM1OTU0OTk5NTgpOyAvLyAtMSArIDQgKiBHNFxuXG4vLyBGaXJzdCBjb3JuZXJcbiAgdmVjNCBpICA9IGZsb29yKHYgKyBkb3QodiwgdmVjNChGNCkpICk7XG4gIHZlYzQgeDAgPSB2IC0gICBpICsgZG90KGksIEMueHh4eCk7XG5cbi8vIE90aGVyIGNvcm5lcnNcblxuLy8gUmFuayBzb3J0aW5nIG9yaWdpbmFsbHkgY29udHJpYnV0ZWQgYnkgQmlsbCBMaWNlYS1LYW5lLCBBTUQgKGZvcm1lcmx5IEFUSSlcbiAgdmVjNCBpMDtcbiAgdmVjMyBpc1ggPSBzdGVwKCB4MC55encsIHgwLnh4eCApO1xuICB2ZWMzIGlzWVogPSBzdGVwKCB4MC56d3csIHgwLnl5eiApO1xuLy8gIGkwLnggPSBkb3QoIGlzWCwgdmVjMyggMS4wICkgKTtcbiAgaTAueCA9IGlzWC54ICsgaXNYLnkgKyBpc1guejtcbiAgaTAueXp3ID0gMS4wIC0gaXNYO1xuLy8gIGkwLnkgKz0gZG90KCBpc1laLnh5LCB2ZWMyKCAxLjAgKSApO1xuICBpMC55ICs9IGlzWVoueCArIGlzWVoueTtcbiAgaTAuencgKz0gMS4wIC0gaXNZWi54eTtcbiAgaTAueiArPSBpc1laLno7XG4gIGkwLncgKz0gMS4wIC0gaXNZWi56O1xuXG4gIC8vIGkwIG5vdyBjb250YWlucyB0aGUgdW5pcXVlIHZhbHVlcyAwLDEsMiwzIGluIGVhY2ggY2hhbm5lbFxuICB2ZWM0IGkzID0gY2xhbXAoIGkwLCAwLjAsIDEuMCApO1xuICB2ZWM0IGkyID0gY2xhbXAoIGkwLTEuMCwgMC4wLCAxLjAgKTtcbiAgdmVjNCBpMSA9IGNsYW1wKCBpMC0yLjAsIDAuMCwgMS4wICk7XG5cbiAgLy8gIHgwID0geDAgLSAwLjAgKyAwLjAgKiBDLnh4eHhcbiAgLy8gIHgxID0geDAgLSBpMSAgKyAxLjAgKiBDLnh4eHhcbiAgLy8gIHgyID0geDAgLSBpMiAgKyAyLjAgKiBDLnh4eHhcbiAgLy8gIHgzID0geDAgLSBpMyAgKyAzLjAgKiBDLnh4eHhcbiAgLy8gIHg0ID0geDAgLSAxLjAgKyA0LjAgKiBDLnh4eHhcbiAgdmVjNCB4MSA9IHgwIC0gaTEgKyBDLnh4eHg7XG4gIHZlYzQgeDIgPSB4MCAtIGkyICsgQy55eXl5O1xuICB2ZWM0IHgzID0geDAgLSBpMyArIEMuenp6ejtcbiAgdmVjNCB4NCA9IHgwICsgQy53d3d3O1xuXG4vLyBQZXJtdXRhdGlvbnNcbiAgaSA9IG1vZDI4OShpKTsgXG4gIGZsb2F0IGowID0gcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZShpLncpICsgaS56KSArIGkueSkgKyBpLngpO1xuICB2ZWM0IGoxID0gcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZSggcGVybXV0ZSAoXG4gICAgICAgICAgICAgaS53ICsgdmVjNChpMS53LCBpMi53LCBpMy53LCAxLjAgKSlcbiAgICAgICAgICAgKyBpLnogKyB2ZWM0KGkxLnosIGkyLnosIGkzLnosIDEuMCApKVxuICAgICAgICAgICArIGkueSArIHZlYzQoaTEueSwgaTIueSwgaTMueSwgMS4wICkpXG4gICAgICAgICAgICsgaS54ICsgdmVjNChpMS54LCBpMi54LCBpMy54LCAxLjAgKSk7XG5cbi8vIEdyYWRpZW50czogN3g3eDYgcG9pbnRzIG92ZXIgYSBjdWJlLCBtYXBwZWQgb250byBhIDQtY3Jvc3MgcG9seXRvcGVcbi8vIDcqNyo2ID0gMjk0LCB3aGljaCBpcyBjbG9zZSB0byB0aGUgcmluZyBzaXplIDE3KjE3ID0gMjg5LlxuICB2ZWM0IGlwID0gdmVjNCgxLjAvMjk0LjAsIDEuMC80OS4wLCAxLjAvNy4wLCAwLjApIDtcblxuICB2ZWM0IHAwID0gZ3JhZDQoajAsICAgaXApO1xuICB2ZWM0IHAxID0gZ3JhZDQoajEueCwgaXApO1xuICB2ZWM0IHAyID0gZ3JhZDQoajEueSwgaXApO1xuICB2ZWM0IHAzID0gZ3JhZDQoajEueiwgaXApO1xuICB2ZWM0IHA0ID0gZ3JhZDQoajEudywgaXApO1xuXG4vLyBOb3JtYWxpc2UgZ3JhZGllbnRzXG4gIHZlYzQgbm9ybSA9IHRheWxvckludlNxcnQodmVjNChkb3QocDAscDApLCBkb3QocDEscDEpLCBkb3QocDIsIHAyKSwgZG90KHAzLHAzKSkpO1xuICBwMCAqPSBub3JtLng7XG4gIHAxICo9IG5vcm0ueTtcbiAgcDIgKj0gbm9ybS56O1xuICBwMyAqPSBub3JtLnc7XG4gIHA0ICo9IHRheWxvckludlNxcnQoZG90KHA0LHA0KSk7XG5cbi8vIE1peCBjb250cmlidXRpb25zIGZyb20gdGhlIGZpdmUgY29ybmVyc1xuICB2ZWMzIG0wID0gbWF4KDAuNiAtIHZlYzMoZG90KHgwLHgwKSwgZG90KHgxLHgxKSwgZG90KHgyLHgyKSksIDAuMCk7XG4gIHZlYzIgbTEgPSBtYXgoMC42IC0gdmVjMihkb3QoeDMseDMpLCBkb3QoeDQseDQpICAgICAgICAgICAgKSwgMC4wKTtcbiAgbTAgPSBtMCAqIG0wO1xuICBtMSA9IG0xICogbTE7XG4gIHJldHVybiA0OS4wICogKCBkb3QobTAqbTAsIHZlYzMoIGRvdCggcDAsIHgwICksIGRvdCggcDEsIHgxICksIGRvdCggcDIsIHgyICkpKVxuICAgICAgICAgICAgICAgKyBkb3QobTEqbTEsIHZlYzIoIGRvdCggcDMsIHgzICksIGRvdCggcDQsIHg0ICkgKSApICkgO1xuXG59XG5cbmBcbn07XG5cbkRlbW9GdW5jdGlvbnMuZnVuY3Rpb25zID0ge1xuICAgIGxvcmVudHo6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdMb3JlbnR6IEJvb3N0JyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAyMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGksXG4gICAgICAgIGRyYXdGdW5jOlxuYGZsb2F0IGJldGEgPSBzaW4odGltZSAqIDIuMCAqIFBJKSAqIDAuOTtcbmZsb2F0IGdhbW1hID0gMS4wIC8gc3FydCgxLjAgLSBiZXRhICogYmV0YSk7XG5yZXMgPSBnYW1tYSAqIHZlYzIoXG4gICAgY1Bvcy54ICogMS4wICsgY1Bvcy55ICogYmV0YSxcbiAgICBjUG9zLnkgKiAxLjAgKyBjUG9zLnggKiBiZXRhXG4pO1xuXG5gXG4gICAgfSxcbi8vICAgIHJvdGF0aW9uOiB7XG4vLyAgICAgICAgZGlzcGxheU5hbWU6ICdSb3RhdGlvbicsXG4vLyAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbi8vICAgICAgICBudW1GcmFtZXM6IDgwMCxcbi8vICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbi8vICAgICAgICBkcmF3RnVuYzpcbi8vYHJlcyA9IHJvdGF0ZVdpdGhUaW1lKGNQb3MpO1xuLy9gXG4vLyAgICB9LFxuICAgIG1lcmNhdG9yd2FycDoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ01lcmNhdG9yIFdhcnAnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDgwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYiArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgICAgIGRyYXdGdW5jOlxuYHZlYzIgc2NhbGVkUG9zID0gY1BvcyAqIDAuNjtcbnZlYzIgaW52TWVyY2F0b3IgPSB2ZWMyKHNjYWxlZFBvcy54LCAyLjAgKiBhdGFuKGV4cChzY2FsZWRQb3MueSkpIC0gMC41ICogUEkpICogOC4wO1xucmVzID0gcm90YXRlV2l0aFRpbWUoaW52TWVyY2F0b3IpO1xuYFxuICAgIH0sXG4gICAgbWVyY2F0b3JNb2xsd2VpZGU6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdNZXJjYXRvciB0byBNb2xsd2VpZGUnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDEwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSxcbiAgICAgICAgZHJhd0Z1bmM6XG5gdmVjMiBzY2FsZWRQb3MgPSBjUG9zICogMC4zO1xuZmxvYXQgdGhldGEgPSBhc2luKHNjYWxlZFBvcy55ICogMi4wIC8gUEkpO1xudmVjMiBpbnZNb2xsd2VpZGUgPSB2ZWMyKFxuICAgIHNjYWxlZFBvcy54IC8gY29zKHRoZXRhKSxcbiAgICBhc2luKCgyLjAgKiB0aGV0YSArIHNpbigyLjAgKiB0aGV0YSkpIC8gUEkpXG4pO1xudmVjMiBpbnZNZXJjYXRvciA9IHZlYzIoc2NhbGVkUG9zLngsIDIuMCAqIGF0YW4oZXhwKHNjYWxlZFBvcy55KSkgLSAwLjUgKiBQSSk7XG5mbG9hdCBtaXhQYXJhbSA9IC0gY29zKHRpbWUgKiAyLjAgKiBQSSkgLyAyLjAgKyAwLjU7XG5yZXMgPSAoaW52TW9sbHdlaWRlICogbWl4UGFyYW0gKyBpbnZNZXJjYXRvciAqICgxLjAgLSBtaXhQYXJhbSkpICogOC4wO1xuYFxuICAgIH0sXG4gICAgZGlwb2xlOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnRGlwb2xlIEZvcm1hdGlvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMzAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzpcbmBmbG9hdCBkaXN0ID0gc2luKHRpbWUgKiAyLjAgKiBQSSArIFBJIC8gMi4wKSAqIDIuMCArIDIuNTtcbnJlcyA9IDUwLjAgLyAoMi4wICogZGlzdCkgKiAoXG4gICAgY29tcGxleExvZyhjUG9zIC0gdmVjMihkaXN0LCAwLjApKSAtXG4gICAgY29tcGxleExvZyhjUG9zIC0gdmVjMigtZGlzdCwgMC4wKSlcbik7XG5gXG4gICAgfSxcbiAgICBhdHRyYWN0UmVwZWw6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdBdHRyYWN0aW9uIHRvIFJlcHVsc2lvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMTAwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYixcbiAgICAgICAgZHJhd0Z1bmM6IFxuYHJlcyA9IDEwLjAgKiAoXG4gICAgY29tcGxleExvZyhjUG9zIC0gdmVjMigxLjAsIDAuMCkpICtcbiAgICBzaW4odGltZSAqIDIuMCAqIFBJIC0gUEkgLyAyLjApICogY29tcGxleExvZyhjUG9zIC0gdmVjMigtMS4wLCAwLjApKVxuKTtcbmBcbiAgICB9LFxuICAgIG5ldXJhbG5ldHdvcms6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdOZXVyYWwgTmV0d29yaycsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMjAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpLFxuICAgICAgICBkcmF3RnVuYzogXG5gZmxvYXQgbWl4UGFyYW0gPSAtY29zKHRpbWUgKiAyLjAgKiBQSSkgLyAyLjAgKyAwLjU7XG52ZWMyIHVuc2lnbW9pZCA9IC1sb2coMS4wIC8gKChjUG9zICsgdmVjMigzLjMsIDMuMCkpIC8gNi4zKSAtIDEuMCk7XG5yZXMgPSAodmVjMihcbiAgICB1bnNpZ21vaWQueCAqIDIuMCArIHVuc2lnbW9pZC55ICogMS4wLFxuICAgIHVuc2lnbW9pZC54ICogMi4wICsgdW5zaWdtb2lkLnkgKiAzLjBcbikgLSB2ZWMyKDEuMCwgLTIuMCkpICogbWl4UGFyYW0gKyBjUG9zICogKDEuMCAtIG1peFBhcmFtKTtcbmBcbiAgICB9LFxuICAgIGdhbGF4eToge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0dhbGF4eSBXYXJwJyxcbiAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtRnJhbWVzOiAyMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGksXG4gICAgICAgIGRyYXdGdW5jOiBcbmBmbG9hdCBtaXhQYXJhbSA9IC1jb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcbnZlYzIgcG9sUG9zID0gdmVjMihsZW5ndGgoY1BvcyksIGF0YW4oY1Bvcy55LCBjUG9zLngpKTtcbnBvbFBvcyA9IHZlYzIocG9sUG9zLngsIHBvbFBvcy55IC0gbWl4UGFyYW0gLyA1MC4wICogc3FydCgxLjAgLyBwb3cocG9sUG9zLnggLyA0MC4wLCAzLjApKSk7XG5yZXMgPSB2ZWMyKHBvbFBvcy54ICogY29zKHBvbFBvcy55KSwgcG9sUG9zLnggKiBzaW4ocG9sUG9zLnkpKTtcbmBcbiAgICB9LFxuICAgIHNpbXBsZXg6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdTaW1wbGV4IFdhcnAnLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4gICAgICAgIGluY2x1ZGVTcmM6IERlbW9GdW5jdGlvbnMuSU5DTFVERVMucGkgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnNub2lzZSxcbiAgICAgICAgZHJhd0Z1bmM6IFxuYHZlYzIgY2lyY2xlVmFyeSA9IDIuMCAqIHZlYzIoXG4gICAgY29zKHRpbWUgKiAyLjAgKiBQSSksXG4gICAgc2luKHRpbWUgKiAyLjAgKiBQSSlcbik7XG5yZXMgPSAyLjAgKiAoY1BvcyArXG4wLjUgKiB2ZWMyKFxuICAgIHNub2lzZSh2ZWM0KGNQb3MgKiAwLjI1LCBjaXJjbGVWYXJ5ICsgdmVjMigxMDAuMCwgMTAwLjApKSksXG4gICAgc25vaXNlKHZlYzQoY1BvcyAqIDAuMjUsIGNpcmNsZVZhcnkgKyB2ZWMyKDIwMC4wLCAyMDAuMCkpKVxuKSk7XG5gXG4gICAgfSxcbiAgICBleHBvbmVudGlhdGlvbjoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ0NvbXBsZXggRXhwb25lbnRpYXRpb24nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDMwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYixcbiAgICAgICAgZHJhd0Z1bmM6IFxuYHZlYzIgY2FydFJlcyA9IDEwLjAgKiBjb21wbGV4UG93KGNQb3MsIHZlYzIoMS4wIC8gKDIuNSAtIDEuNSAqIGNvcyh0aW1lICogMi4wICogUEkpKSwgMC4wKSk7XG5yZXMgPSB2ZWMyKGxlbmd0aChjYXJ0UmVzKSwgMTAuMCAqIGF0YW4oY2FydFJlcy55LCBjYXJ0UmVzLngpKTtcbmBcbiAgICB9LFxuICAgIG1vYml1czoge1xuICAgICAgICBkaXNwbGF5TmFtZTogJ01vYml1cyBUcmFuc2Zvcm1hdGlvbicsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMTAwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYiArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4gICAgICAgIGRyYXdGdW5jOlxuYHJlcyA9IHJvdGF0ZVdpdGhUaW1lKDEwLjAgKiBjb21wbGV4RGl2KFxuICAgIGNvbXBsZXhNdWx0KHZlYzIoMC41LCAzLjApLCBjUG9zKSArIHZlYzIoMC41LCAxLjUpLFxuICAgIGNvbXBsZXhNdWx0KHZlYzIoNC4wLCAxLjUpLCBjUG9zKSArIHZlYzIoMi4wLCAzLjUpXG4pKTtcbmBcbiAgICB9LFxuLy8gICAgbG9nOiB7XG4vLyAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IExvZ2FyaXRobScsXG4vLyAgICAgICAgaXNBbmltYXRlZDogdHJ1ZSxcbi8vICAgICAgICBudW1GcmFtZXM6IDEwMDAsXG4vLyAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYiArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMucm90YXRlV2l0aFRpbWUsXG4vLyAgICAgICAgZHJhd0Z1bmM6IFxuLy9gcmVzID0gcm90YXRlV2l0aFRpbWUoMTAuMCAqIGNvbXBsZXhMb2coY1BvcykpO1xuLy9gXG4vLyAgICB9LFxuLy8gICAgc2luOiB7XG4vLyAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IFNpbmUnLFxuLy8gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4vLyAgICAgICAgbnVtRnJhbWVzOiAzMDAsXG4vLyAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5yb3RhdGVXaXRoVGltZSxcbi8vICAgICAgICBkcmF3RnVuYzogXG4vL2B2ZWMyIGV4cG9uZW50ID0gdmVjMigtY1Bvcy55LCBjUG9zLngpO1xuLy9yZXMgPSByb3RhdGVXaXRoVGltZShjb21wbGV4RGl2KFxuLy8gICAgY29tcGxleEV4cChleHBvbmVudCkgLSBjb21wbGV4RXhwKC1leHBvbmVudCksXG4vLyAgICB2ZWMyKDAuMCwgMi4wKVxuLy8pKTtcbi8vYFxuLy8gICAgfSxcbiAgICBhcmNzaW46IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4IEludmVyc2UgU2luZScsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogMjAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogXG5gdmVjMiBpbnZTaW4gPSAtIDEwLjAgKiBjb21wbGV4TXVsdChjb21wbGV4TG9nKGNvbXBsZXhQb3codmVjMigxLjAsIDAuMCkgLSBjb21wbGV4UG93KGNQb3MsIHZlYzIoMi4wLCAwLjApKSwgdmVjMigwLjUsIDAuMCkpICsgY29tcGxleE11bHQoY1BvcywgdmVjMigwLjAsIDEuMCkpKSwgdmVjMigwLjAsIDEuMCkpO1xuZmxvYXQgbWl4UGFyYW0gPSAtIGNvcyh0aW1lICogMi4wICogUEkpIC8gMi4wICsgMC41O1xucmVzID0gaW52U2luICogbWl4UGFyYW0gKyBjUG9zICogKDEuMCAtIG1peFBhcmFtKTtcbmBcbiAgICB9LFxuICAgIGdhbW1hOiB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAnR2FtbWEgRnVuY3Rpb24nLFxuICAgICAgICBpc0FuaW1hdGVkOiB0cnVlLFxuICAgICAgICBudW1GcmFtZXM6IDQwMCxcbiAgICAgICAgaW5jbHVkZVNyYzogRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5waSArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuY29tcGxleExpYiArIERlbW9GdW5jdGlvbnMuSU5DTFVERVMuZ2FtbWEgKyBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnJvdGF0ZVdpdGhUaW1lLFxuICAgICAgICBkcmF3RnVuYzpcbmByZXMgPSByb3RhdGVXaXRoVGltZSgxMC4wICogZ2FtbWEoKGNQb3MgKyB2ZWMyKDIuMCwgMC4wKSkgLyAyLjApKTtcbmBcbiAgICB9LFxuICAgIG1hZG5lc3M6IHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdDb21wbGV4ID8/PycsXG4gICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bUZyYW1lczogODAwLFxuICAgICAgICBpbmNsdWRlU3JjOiBEZW1vRnVuY3Rpb25zLklOQ0xVREVTLnBpICsgRGVtb0Z1bmN0aW9ucy5JTkNMVURFUy5jb21wbGV4TGliLFxuICAgICAgICBkcmF3RnVuYzogXG5gdmVjMiBtYWRuZXNzID0gLSAxMC4wICogY29tcGxleE11bHQoY29tcGxleExvZyhjb21wbGV4UG93KHZlYzIoMi4wLCAzLjApIC0gY29tcGxleFBvdyhjUG9zICogMi4wLCB2ZWMyKDIuMCwgMS4wKSksIHZlYzIoMC41LCAxLjApKSArIGNvbXBsZXhNdWx0KGNQb3MgKiAyLjAsIHZlYzIoMi4wLCAxLjApKSksIHZlYzIoMi4wLCAxLjApKTtcbmZsb2F0IG1peFBhcmFtID0gLSBjb3ModGltZSAqIDIuMCAqIFBJKSAvIDIuMCArIDAuNTtcbnJlcyA9IG1hZG5lc3MgKiBtaXhQYXJhbSArIGNQb3MgKiAoMS4wIC0gbWl4UGFyYW0pO1xuYFxuICAgIH0sXG59O1xuIl19
